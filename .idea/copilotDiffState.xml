<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/css/panel.css">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/css/panel.css" />
              <option name="originalContent" value="/* Panel-specific styles */&#10;:root { --ph: 72px; --sbw: 240px; --sbwc: 64px; }&#10;&#10;body { background:#0b0f14; color:#e6edf3; padding-top: var(--ph); }&#10;&#10;header.sticky { position:fixed; top:0; left:0; right:0; background:#0d1117; border-bottom:1px solid #161b22; z-index:100; }&#10;header .container { display:flex; justify-content:space-between; align-items:center; padding:16px 20px; }&#10;.panel-logo { display:flex; align-items:center; gap:10px; color:#e6edf3; text-decoration:none; }&#10;.panel-logo:hover { opacity:.9; }&#10;&#10;.panel-wrap { max-width:1100px; margin:0 auto 40px; padding:0 20px; }&#10;.card { background:#0f141b; border:1px solid #161b22; border-radius:10px; padding:16px; margin-bottom:12px; display:flex; justify-content:space-between; gap:16px; align-items:flex-start; }&#10;.meta { display:flex; gap:10px; flex-wrap:wrap; color:#9ca3af; font-size:12px; }&#10;.badge { background:#111827; border:1px solid #1f2937; color:#9ca3af; border-radius:999px; padding:4px 10px; font-size:12px; }&#10;.name { font-weight:600; margin-bottom:8px; }&#10;.bar { height:8px; background:#0e1621; border-radius:999px; overflow:hidden; border:1px solid #161b22; margin-top:8px; }&#10;.bar &gt; span { display:block; height:100%; background:linear-gradient(90deg,#22c55e,#16a34a); }&#10;.actions { display:flex; gap:8px; align-items:center; }&#10;&#10;/* Buttons */&#10;a.btn { background:#00d4ff; color:#001018; text-decoration:none; border-radius:8px; padding:10px 14px; font-weight:600; }&#10;a.btn:hover { background:#00b8e6; }&#10;a.btn.secondary { background:#111827; color:#e6edf3; border:1px solid #1f2937; }&#10;a.btn.secondary:hover { background:#0f1722; }&#10;a.btn.del { background:#ef4444; color:#fff; }&#10;a.btn.del:hover { background:#dc2626; }&#10;&#10;.muted { color:#9ca3af; }&#10;&#10;/* Sidebar */&#10;.sidebar { position:fixed; top:var(--ph); left:0; bottom:0; width:var(--sbw); background:#0c1219; border-right:1px solid #161b22; transition:width .25s ease; overflow:hidden; z-index:90; }&#10;body.sb-collapsed .sidebar { width:var(--sbwc); }&#10;.sb-brand { display:flex; align-items:center; gap:10px; padding:12px 14px; border-bottom:1px solid #161b22; }&#10;.sb-brand strong { font-size:14px; }&#10;.sb-nav { display:flex; flex-direction:column; padding:8px; }&#10;.sb-link { color:#e6edf3; text-decoration:none; padding:10px 12px; border-radius:8px; display:flex; gap:10px; align-items:center; transition:background .2s ease; }&#10;.sb-link:hover { background:#101722; }&#10;.sb-ico { width:18px; height:18px; display:inline-grid; place-items:center; background:#0d1117; border:1px solid #1b2330; border-radius:6px; font-size:12px; color:#00d4ff; }&#10;.sb-text { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }&#10;&#10;/* Content shifts with sidebar */&#10;.main-with-sidebar { margin-left:var(--sbw); transition:margin-left .25s ease; }&#10;body.sb-collapsed .main-with-sidebar { margin-left:var(--sbwc); }&#10;&#10;/* Handle that moves with sidebar */&#10;.sb-handle { position:fixed; top:calc(var(--ph) + 12px); left:calc(var(--sbw) - 14px); width:28px; height:28px; border-radius:50%; display:grid; place-items:center; background:#0c1219; color:#e6edf3; border:1px solid #161b22; cursor:pointer; z-index:101; transition:left .25s ease, background .2s ease, transform .2s ease; }&#10;body.sb-collapsed .sb-handle { left:calc(var(--sbwc) - 14px); }&#10;.sb-handle:hover { background:#101722; }&#10;.sb-handle:active { transform:scale(0.96); }&#10;.sb-handle-icon { font-size:16px; line-height:1; }&#10;&#10;" />
              <option name="updatedContent" value="/* Panel-specific styles */&#10;:root { --ph: 72px; --sbw: 240px; --sbwc: 64px; }&#10;&#10;body { background:#0b0f14; color:#e6edf3; padding-top: var(--ph); }&#10;&#10;header.sticky { position:fixed; top:0; left:0; right:0; background:#0d1117; border-bottom:1px solid #161b22; z-index:100; }&#10;header .container { display:flex; justify-content:space-between; align-items:center; padding:16px 20px; }&#10;.panel-logo { display:flex; align-items:center; gap:10px; color:#e6edf3; text-decoration:none; }&#10;.panel-logo:hover { opacity:.9; }&#10;&#10;.panel-wrap { max-width:1100px; margin:0 auto 40px; padding:0 20px; }&#10;.card { background:#0f141b; border:1px solid #161b22; border-radius:10px; padding:16px; margin-bottom:12px; display:flex; justify-content:space-between; gap:16px; align-items:flex-start; }&#10;.meta { display:flex; gap:10px; flex-wrap:wrap; color:#9ca3af; font-size:12px; }&#10;.badge { background:#111827; border:1px solid #1f2937; color:#9ca3af; border-radius:999px; padding:4px 10px; font-size:12px; }&#10;.name { font-weight:600; margin-bottom:8px; }&#10;.bar { height:8px; background:#0e1621; border-radius:999px; overflow:hidden; border:1px solid #161b22; margin-top:8px; }&#10;.bar &gt; span { display:block; height:100%; background:linear-gradient(90deg,#22c55e,#16a34a); }&#10;.actions { display:flex; gap:8px; align-items:center; }&#10;&#10;/* Buttons */&#10;a.btn { background:#00d4ff; color:#001018; text-decoration:none; border-radius:8px; padding:10px 14px; font-weight:600; }&#10;a.btn:hover { background:#00b8e6; }&#10;a.btn.secondary { background:#111827; color:#e6edf3; border:1px solid #1f2937; }&#10;a.btn.secondary:hover { background:#0f1722; }&#10;a.btn.del { background:#ef4444; color:#fff; }&#10;a.btn.del:hover { background:#dc2626; }&#10;&#10;.muted { color:#9ca3af; }&#10;&#10;/* Sidebar */&#10;.sidebar { position:fixed; top:var(--ph); left:0; bottom:0; width:var(--sbw); background:#0c1219; border-right:1px solid #161b22; transition:width .25s ease; overflow:hidden; z-index:90; }&#10;body.sb-collapsed .sidebar { width:var(--sbwc); }&#10;.sb-brand { display:flex; align-items:center; gap:10px; padding:12px 14px; border-bottom:1px solid #161b22; }&#10;.sb-brand strong { font-size:14px; }&#10;.sb-nav { display:flex; flex-direction:column; padding:8px; }&#10;.sb-link { color:#e6edf3; text-decoration:none; padding:10px 12px; border-radius:8px; display:flex; gap:10px; align-items:center; transition:background .2s ease; }&#10;.sb-link:hover { background:#101722; }&#10;.sb-ico { width:18px; height:18px; display:inline-grid; place-items:center; background:#0d1117; border:1px solid #1b2330; border-radius:6px; font-size:12px; color:#00d4ff; }&#10;.sb-text { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }&#10;&#10;/* Content shifts with sidebar */&#10;.main-with-sidebar { margin-left:var(--sbw); transition:margin-left .25s ease; }&#10;body.sb-collapsed .main-with-sidebar { margin-left:var(--sbwc); }&#10;&#10;/* Handle that moves with sidebar */&#10;.sb-handle { position:fixed; top:calc(var(--ph) + 12px); left:calc(var(--sbw) - 14px); width:28px; height:28px; border-radius:50%; display:grid; place-items:center; background:#0c1219; color:#e6edf3; border:1px solid #161b22; cursor:pointer; z-index:101; transition:left .25s ease, background .2s ease, transform .2s ease; }&#10;body.sb-collapsed .sb-handle { left:calc(var(--sbwc) - 14px); }&#10;.sb-handle:hover { background:#101722; }&#10;.sb-handle:active { transform:scale(0.96); }&#10;.sb-handle-icon { font-size:16px; line-height:1; }&#10;&#10;/* --- Forms (CT Modal) --- */&#10;.form-row { display:flex; flex-direction:column; gap:6px; margin:8px 0; }&#10;.form-row label { font-size:12px; color:#9ca3af; }&#10;.form-row input, .form-row select { background:#0f141b; color:#e6edf3; border:1px solid #1f2937; border-radius:8px; padding:10px 12px; outline:none; }&#10;.form-row input:focus, .form-row select:focus { border-color:#00d4ff66; box-shadow:0 0 0 2px #00d4ff22; }&#10;.form-grid { display:grid; grid-template-columns: 1fr 1fr; gap:10px; }&#10;@media (max-width: 560px) { .form-grid { grid-template-columns: 1fr; } }" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/css/styles.css">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/css/styles.css" />
              <option name="originalContent" value="* {&#10;    margin: 0;&#10;    padding: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;body {&#10;    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;&#10;    line-height: 1.6;&#10;    color: #000000;&#10;}&#10;&#10;.container {&#10;    max-width: 1200px;&#10;    margin: 0 auto;&#10;    padding: 0 20px;&#10;}&#10;&#10;/* Header */&#10;header {&#10;    background: #0d1117;&#10;    color: white;&#10;    padding: 1rem 0;&#10;    position: fixed;&#10;    width: 100%;&#10;    top: 0;&#10;    z-index: 100;&#10;}&#10;&#10;header .container {&#10;    max-width: 1200px;&#10;    margin: 0 auto;&#10;    padding-left: 20px;&#10;    padding-right: 20px;&#10;}&#10;&#10;header nav {&#10;    display: flex;&#10;    align-items: center;&#10;    width: 100%;&#10;    justify-content: space-between; /* align left and right groups flush to container edges */&#10;    gap: 12px;&#10;}&#10;&#10;.logo {&#10;    font-size: 1.5rem;&#10;    font-weight: bold;&#10;    color: #00d4ff;&#10;    margin-right: 0; /* remove auto margin that created unwanted spacing */&#10;    display: inline-flex; /* ensure vertical centering with img */&#10;    align-items: center;&#10;    gap: 10px;&#10;}&#10;&#10;.nav-links, .user-section {&#10;    display: flex;&#10;    align-items: center;&#10;}&#10;&#10;.nav-links {&#10;    list-style: none;&#10;    margin: 0;&#10;    padding: 0;&#10;    gap: 1.5rem;&#10;}&#10;&#10;.nav-links li {&#10;    list-style: none;&#10;}&#10;&#10;.nav-links a {&#10;    color: #eef2f7;&#10;    text-decoration: none;&#10;    font-weight: 500;&#10;    opacity: 0.9;&#10;    transition: color 160ms ease, opacity 160ms ease;&#10;}&#10;&#10;.nav-links a:hover {&#10;    color: #00d4ff;&#10;    opacity: 1;&#10;}&#10;&#10;.user-section {&#10;    gap: 1rem;&#10;}&#10;&#10;/* User Profile */&#10;.user-section {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 1rem;&#10;}&#10;&#10;.login-btn {&#10;    background: #00d4ff;&#10;    color: white;&#10;    border: none;&#10;    padding: 8px 16px;&#10;    border-radius: 5px;&#10;    cursor: pointer;&#10;    font-size: 0.9rem;&#10;    transition: background 0.3s;&#10;}&#10;&#10;.login-btn:hover {&#10;    background: #00b8e6;&#10;}&#10;&#10;/* Make entire user-profile a clickable hitbox */&#10;.user-profile {&#10;    display: none;&#10;    align-items: center;&#10;    gap: 8px; /* consistent spacing regardless of name length */&#10;    padding: 6px 10px;&#10;    border-radius: 10px;&#10;    cursor: pointer;&#10;    user-select: none;&#10;}&#10;&#10;.user-profile.active {&#10;    display: flex;&#10;}&#10;&#10;.user-profile:hover {&#10;    background: rgba(255,255,255,0.06);&#10;}&#10;&#10;.user-profile:focus {&#10;    outline: 2px solid #00d4ff66;&#10;    outline-offset: 2px;&#10;}&#10;&#10;/* Name spacing and truncation */&#10;.user-name {&#10;    color: white;&#10;    font-size: 0.9rem;&#10;    max-width: clamp(80px, 14vw, 160px); /* adapts to viewport */&#10;    overflow: hidden;&#10;    text-overflow: ellipsis;&#10;    white-space: nowrap;&#10;    margin-right: 2px; /* subtle space before avatar */&#10;    /* Improved readability */&#10;    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;&#10;    font-weight: 600;&#10;    line-height: 1.2;&#10;}&#10;&#10;/* Caret icon to the right of the avatar */&#10;.dropdown-caret {&#10;    display: inline-block;&#10;    width: 0;&#10;    height: 0;&#10;    border-left: 5px solid transparent;&#10;    border-right: 5px solid transparent;&#10;    border-top: 6px solid #eef2f7;&#10;    margin-left: 4px;&#10;    transition: transform 160ms ease;&#10;}&#10;&#10;.user-profile[aria-expanded=&quot;true&quot;] .dropdown-caret {&#10;    transform: rotate(180deg);&#10;}&#10;&#10;/* Avatar keeps size; hitbox is the wrapper */&#10;.user-avatar {&#10;    width: 40px;&#10;    height: 40px;&#10;    border-radius: 50%;&#10;    border: 2px solid #00d4ff;&#10;    transition: transform 0.3s;&#10;    flex: 0 0 auto;&#10;}&#10;&#10;.user-avatar:hover {&#10;    transform: scale(1.05);&#10;}&#10;&#10;/* Space between login button and profile adapts with content */&#10;.user-section {&#10;    gap: 1.25rem;&#10;    margin-left: 0;&#10;}&#10;&#10;/* Dropdown Menu */&#10;.user-dropdown {&#10;    position: relative;&#10;}&#10;&#10;.dropdown-menu {&#10;    position: absolute;&#10;    top: 100%;&#10;    right: 0;&#10;    background: white;&#10;    border-radius: 10px;&#10;    box-shadow: 0 4px 20px rgba(0,0,0,0.15);&#10;    min-width: 200px;&#10;    margin-top: 10px;&#10;    display: none;&#10;    z-index: 1000;&#10;    overflow: hidden;&#10;}&#10;&#10;.dropdown-menu.show {&#10;    display: block;&#10;}&#10;&#10;.dropdown-item {&#10;    padding: 12px 16px;&#10;    border-bottom: 1px solid #f0f0f0;&#10;    cursor: pointer;&#10;    transition: background 0.3s;&#10;}&#10;&#10;.dropdown-item:hover {&#10;    background: #f3f5f7;&#10;}&#10;&#10;.dropdown-item:first-child {&#10;    border-top-left-radius: 10px;&#10;    border-top-right-radius: 10px;&#10;}&#10;&#10;.dropdown-item:last-child {&#10;    border-bottom-left-radius: 10px;&#10;    border-bottom-right-radius: 10px;&#10;    color: #dc3545;&#10;}&#10;&#10;.dropdown-item a {&#10;    color: #333;&#10;    text-decoration: none;&#10;    display: block;&#10;}&#10;&#10;/* Modal */&#10;.modal {&#10;    display: none;&#10;    position: fixed;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: rgba(0,0,0,0.8); /* 50% opacity */&#10;    z-index: 10000;&#10;    justify-content: center;&#10;    align-items: center;&#10;}&#10;&#10;.modal.show {&#10;    display: flex;&#10;}&#10;&#10;.modal-content {&#10;    background: white;&#10;    padding: 30px;&#10;    border-radius: 12px;&#10;    text-align: center;&#10;    max-width: 400px;&#10;    width: 90%;&#10;    position: relative;&#10;}&#10;&#10;.modal-close {&#10;    position: absolute;&#10;    top: 10px;&#10;    right: 15px;&#10;    font-size: 24px;&#10;    cursor: pointer;&#10;    color: #999;&#10;}&#10;&#10;.modal-close:hover {&#10;    color: #333;&#10;}&#10;&#10;/* Hero Section */&#10;.hero {&#10;    background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.3)),&#10;    url('https://newxel.com/wp-content/uploads/2024/06/1920_1080-2.png') center/cover;&#10;    color: white;&#10;    padding: 120px 0 80px;&#10;    text-align: center;&#10;    position: relative;&#10;    overflow: hidden;&#10;    min-height: 500px;&#10;}&#10;&#10;/* --- Hero + integrated carousel overrides --- */&#10;.hero .hero-carousel {&#10;    background: transparent;&#10;    padding: 24px 0 0;&#10;}&#10;.hero .hero-carousel .carousel-container {&#10;    box-shadow: 0 10px 30px rgba(0,0,0,0.25);&#10;}&#10;.hero .hero-carousel h2 {&#10;    color: #fff;&#10;}&#10;/* Make carousel captions readable over hero */&#10;.hero .carousel-caption {&#10;    background: linear-gradient(transparent, rgba(0,0,0,0.75));&#10;}&#10;&#10;/* Section reveal base/active states */&#10;.features, .pricing, .carousel-section {&#10;    opacity: 0;&#10;    transform: translateY(30px);&#10;    transition: opacity 600ms ease, transform 600ms ease;&#10;}&#10;.features.revealed, .pricing.revealed, .carousel-section.revealed {&#10;    opacity: 1;&#10;    transform: translateY(0);&#10;}&#10;&#10;/* Staggered child animations for grids */&#10;.features-grid, .pricing-grid {&#10;    /* mark as stagger containers via JS */&#10;}&#10;&#10;/* Initial state for items */&#10;.features-grid &gt; * , .pricing-grid &gt; * {&#10;    opacity: 0;&#10;    transform: translateY(20px);&#10;    transition: transform 500ms ease, opacity 500ms ease;&#10;}&#10;&#10;/* When container enters view */&#10;.stagger.in-view &gt; * {&#10;    opacity: 1;&#10;    transform: translateY(0);&#10;}&#10;&#10;/* Stagger delays */&#10;.stagger.in-view &gt; *:nth-child(1) { transition-delay: 60ms; }&#10;.stagger.in-view &gt; *:nth-child(2) { transition-delay: 120ms; }&#10;.stagger.in-view &gt; *:nth-child(3) { transition-delay: 180ms; }&#10;.stagger.in-view &gt; *:nth-child(4) { transition-delay: 240ms; }&#10;.stagger.in-view &gt; *:nth-child(5) { transition-delay: 300ms; }&#10;.stagger.in-view &gt; *:nth-child(6) { transition-delay: 360ms; }&#10;.stagger.in-view &gt; *:nth-child(7) { transition-delay: 420ms; }&#10;.stagger.in-view &gt; *:nth-child(8) { transition-delay: 480ms; }&#10;&#10;/* Server Image Container */&#10;.server-image-container {&#10;    position: absolute;&#10;    top: 50%;&#10;    right: 10%;&#10;    transform: translateY(-50%);&#10;    opacity: 0.3;&#10;    z-index: 1;&#10;    animation: float 3s ease-in-out infinite;&#10;}&#10;&#10;.server-image {&#10;    width: 300px;&#10;    height: auto;&#10;    filter: brightness(1.2) drop-shadow(0 0 20px rgba(0, 212, 255, 0.3));&#10;}&#10;&#10;/* Floating animation for server image */&#10;@keyframes float {&#10;    0%, 100% {&#10;        transform: translateY(-50%) translateX(0);&#10;    }&#10;    50% {&#10;        transform: translateY(-55%) translateX(-10px);&#10;    }&#10;}&#10;&#10;/* Alternative: Server icon using CSS */&#10;.server-icon {&#10;    width: 200px;&#10;    height: 240px;&#10;    background: rgba(255, 255, 255, 0.1);&#10;    border: 3px solid rgba(0, 212, 255, 0.5);&#10;    border-radius: 10px;&#10;    position: relative;&#10;    backdrop-filter: blur(10px);&#10;}&#10;&#10;.server-icon::before {&#10;    content: '';&#10;    position: absolute;&#10;    top: 20px;&#10;    left: 20px;&#10;    right: 20px;&#10;    height: 15px;&#10;    background: #00d4ff;&#10;    border-radius: 5px;&#10;    box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);&#10;}&#10;&#10;.server-icon::after {&#10;    content: '';&#10;    position: absolute;&#10;    top: 50px;&#10;    left: 20px;&#10;    right: 20px;&#10;    bottom: 20px;&#10;    background: linear-gradient(180deg, rgba(0, 212, 255, 0.3) 0%, rgba(0, 212, 255, 0.1) 100%);&#10;    border-radius: 5px;&#10;    border: 1px solid rgba(0, 212, 255, 0.3);&#10;}&#10;&#10;/* Server lights */&#10;.server-lights {&#10;    position: absolute;&#10;    bottom: 30px;&#10;    left: 50%;&#10;    transform: translateX(-50%);&#10;    display: flex;&#10;    gap: 8px;&#10;}&#10;&#10;.server-light {&#10;    width: 8px;&#10;    height: 8px;&#10;    border-radius: 50%;&#10;    background: #00d4ff;&#10;    box-shadow: 0 0 8px rgba(0, 212, 255, 0.8);&#10;    animation: blink 2s infinite;&#10;}&#10;&#10;.server-light:nth-child(2) {&#10;    animation-delay: 0.5s;&#10;}&#10;&#10;.server-light:nth-child(3) {&#10;    animation-delay: 1s;&#10;}&#10;&#10;@keyframes blink {&#10;    0%, 50% {&#10;        opacity: 1;&#10;    }&#10;    51%, 100% {&#10;        opacity: 0.3;&#10;    }&#10;}&#10;&#10;/* Carousel */&#10;.carousel-section {&#10;    padding: 60px 0;&#10;    background: #f8f9fa;&#10;}&#10;&#10;.carousel-container {&#10;    position: relative;&#10;    max-width: 800px;&#10;    margin: 0 auto;&#10;    overflow: hidden;&#10;    border-radius: 12px;&#10;    box-shadow: 0 10px 30px rgba(0,0,0,0.15);&#10;}&#10;&#10;.carousel-wrapper {&#10;    display: flex;&#10;    transition: transform 0.5s ease-in-out;&#10;}&#10;&#10;.carousel-slide {&#10;    min-width: 100%;&#10;    position: relative;&#10;}&#10;&#10;.carousel-slide img {&#10;    width: 100%;&#10;    height: 400px;&#10;    object-fit: cover;&#10;    display: block;&#10;}&#10;&#10;.carousel-caption {&#10;    position: absolute;&#10;    bottom: 0;&#10;    left: 0;&#10;    right: 0;&#10;    background: linear-gradient(transparent, rgba(0,0,0,0.8));&#10;    color: white;&#10;    padding: 30px 20px 20px;&#10;    text-align: center;&#10;}&#10;&#10;.carousel-caption h3 {&#10;    font-size: 1.5rem;&#10;    margin-bottom: 0.5rem;&#10;}&#10;&#10;.carousel-caption p {&#10;    opacity: 0.9;&#10;}&#10;&#10;.carousel-nav {&#10;    position: absolute;&#10;    top: 50%;&#10;    transform: translateY(-50%);&#10;    background: rgba(0,0,0,0.5);&#10;    color: white;&#10;    border: none;&#10;    width: 50px;&#10;    height: 50px;&#10;    border-radius: 50%;&#10;    cursor: pointer;&#10;    font-size: 1.2rem;&#10;    transition: background 0.3s;&#10;    z-index: 10;&#10;}&#10;&#10;.carousel-nav:hover {&#10;    background: rgba(0,0,0,0.8);&#10;}&#10;&#10;.carousel-prev {&#10;    left: 15px;&#10;}&#10;&#10;.carousel-next {&#10;    right: 15px;&#10;}&#10;&#10;.carousel-dots {&#10;    display: flex;&#10;    justify-content: center;&#10;    gap: 10px;&#10;    margin-top: 20px;&#10;}&#10;&#10;.carousel-dot {&#10;    width: 12px;&#10;    height: 12px;&#10;    border-radius: 50%;&#10;    background: #ccc;&#10;    cursor: pointer;&#10;    transition: background 0.3s;&#10;}&#10;&#10;.carousel-dot.active {&#10;    background: #00d4ff;&#10;}&#10;&#10;/* Features */&#10;.features {&#10;    padding: 80px 0;&#10;    background: #f8f9fa;&#10;}&#10;&#10;.features-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));&#10;    gap: 2rem;&#10;    margin-top: 3rem;&#10;}&#10;&#10;.feature-card {&#10;    background: white;&#10;    padding: 2rem;&#10;    border-radius: 8px;&#10;    text-align: center;&#10;    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);&#10;}&#10;&#10;.feature-icon {&#10;    font-size: 3rem;&#10;    margin-bottom: 1rem;&#10;}&#10;&#10;/* Pricing */&#10;.pricing {&#10;    padding: 80px 0;&#10;}&#10;&#10;.pricing h2 {&#10;    text-align: center;&#10;    font-size: 2.5rem;&#10;    margin-bottom: 3rem;&#10;}&#10;&#10;.pricing-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));&#10;    gap: 2rem;&#10;    margin-top: 2rem;&#10;}&#10;&#10;.pricing-card {&#10;    background: white;&#10;    border: 2px solid #e9ecef;&#10;    border-radius: 8px;&#10;    padding: 2rem;&#10;    text-align: center;&#10;    position: relative;&#10;    transition: transform 0.3s;&#10;}&#10;&#10;.pricing-card:hover {&#10;    transform: translateY(-5px);&#10;    border-color: #00d4ff;&#10;}&#10;&#10;.popular {&#10;    border-color: #00d4ff;&#10;    transform: scale(1.05);&#10;}&#10;&#10;.popular::before {&#10;    content: &quot;MÃS POPULAR&quot;;&#10;    position: absolute;&#10;    top: -15px;&#10;    left: 50%;&#10;    transform: translateX(-50%);&#10;    background: #00d4ff;&#10;    color: white;&#10;    padding: 5px 20px;&#10;    border-radius: 20px;&#10;    font-size: 0.8rem;&#10;    font-weight: bold;&#10;}&#10;&#10;.plan-name {&#10;    font-size: 1.5rem;&#10;    font-weight: bold;&#10;    margin-bottom: 1rem;&#10;}&#10;&#10;.plan-price {&#10;    font-size: 2.5rem;&#10;    font-weight: bold;&#10;    color: #00d4ff;&#10;    margin-bottom: 0.5rem;&#10;}&#10;&#10;.plan-period {&#10;    color: #000000;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.plan-features {&#10;    list-style: none;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.plan-features li {&#10;    padding: 0.5rem 0;&#10;    border-bottom: 1px solid #f0f0f0;&#10;}&#10;&#10;/* Footer */&#10;footer {&#10;    background: #0d1117;&#10;    color: white;&#10;    padding: 40px 0;&#10;    text-align: center;&#10;}&#10;&#10;.footer-content {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));&#10;    gap: 2rem;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.footer-section h3 {&#10;    margin-bottom: 1rem;&#10;    color: #00d4ff;&#10;}&#10;&#10;.footer-section a {&#10;    color: #ccc;&#10;    text-decoration: none;&#10;    display: block;&#10;    margin-bottom: 0.5rem;&#10;}&#10;&#10;.footer-section a:hover {&#10;    color: #00d4ff;&#10;}&#10;&#10;/* Debug Info */&#10;.debug-info {&#10;    position: fixed;&#10;    bottom: 10px;&#10;    right: 10px;&#10;    background: rgba(0,0,0,0.8);&#10;    color: white;&#10;    padding: 10px;&#10;    border-radius: 5px;&#10;    font-size: 0.8rem;&#10;    z-index: 1000;&#10;}&#10;&#10;/* CTA button as styled link */&#10;a.cta-button {&#10;    background: #00d4ff;&#10;    color: #fff !important;&#10;    padding: 12px 24px;&#10;    border-radius: 8px;&#10;    border: none;&#10;    text-decoration: none !important;&#10;    display: inline-flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    font-weight: 600;&#10;    line-height: 1;&#10;    transition: background 200ms ease, transform 120ms ease;&#10;}&#10;a.cta-button:visited { color: #fff !important; }&#10;a.cta-button:hover { background: #00b8e6; text-decoration: none; }&#10;a.cta-button:active { transform: translateY(1px); }&#10;&#10;/* Legacy .cta-button rule kept for non-anchor buttons */&#10;.cta-button { text-decoration: none; }&#10;" />
              <option name="updatedContent" value="* {&#10;    margin: 0;&#10;    padding: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;body {&#10;    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;&#10;    line-height: 1.6;&#10;    color: #000000;&#10;}&#10;&#10;.container {&#10;    max-width: 1200px;&#10;    margin: 0 auto;&#10;    padding: 0 20px;&#10;}&#10;&#10;/* Header */&#10;header {&#10;    background: #0d1117;&#10;    color: white;&#10;    padding: 1rem 0;&#10;    position: fixed;&#10;    width: 100%;&#10;    top: 0;&#10;    z-index: 100;&#10;}&#10;&#10;header .container {&#10;    max-width: 1200px;&#10;    margin: 0 auto;&#10;    padding-left: 20px;&#10;    padding-right: 20px;&#10;}&#10;&#10;header nav {&#10;    display: flex;&#10;    align-items: center;&#10;    width: 100%;&#10;    justify-content: space-between; /* align left and right groups flush to container edges */&#10;    gap: 12px;&#10;}&#10;&#10;.logo {&#10;    font-size: 1.5rem;&#10;    font-weight: bold;&#10;    color: #00d4ff;&#10;    margin-right: 0; /* remove auto margin that created unwanted spacing */&#10;    display: inline-flex; /* ensure vertical centering with img */&#10;    align-items: center;&#10;    gap: 10px;&#10;}&#10;&#10;.nav-links, .user-section {&#10;    display: flex;&#10;    align-items: center;&#10;}&#10;&#10;.nav-links {&#10;    list-style: none;&#10;    margin: 0;&#10;    padding: 0;&#10;    gap: 1.5rem;&#10;}&#10;&#10;.nav-links li {&#10;    list-style: none;&#10;}&#10;&#10;.nav-links a {&#10;    color: #eef2f7;&#10;    text-decoration: none;&#10;    font-weight: 500;&#10;    opacity: 0.9;&#10;    transition: color 160ms ease, opacity 160ms ease;&#10;}&#10;&#10;.nav-links a:hover {&#10;    color: #00d4ff;&#10;    opacity: 1;&#10;}&#10;&#10;.user-section {&#10;    gap: 1rem;&#10;}&#10;&#10;/* User Profile */&#10;.user-section {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 1rem;&#10;}&#10;&#10;.login-btn {&#10;    background: #00d4ff;&#10;    color: white;&#10;    border: none;&#10;    padding: 8px 16px;&#10;    border-radius: 5px;&#10;    cursor: pointer;&#10;    font-size: 0.9rem;&#10;    transition: background 0.3s;&#10;}&#10;&#10;.login-btn:hover {&#10;    background: #00b8e6;&#10;}&#10;&#10;/* Make entire user-profile a clickable hitbox */&#10;.user-profile {&#10;    display: none;&#10;    align-items: center;&#10;    gap: 8px; /* consistent spacing regardless of name length */&#10;    padding: 6px 10px;&#10;    border-radius: 10px;&#10;    cursor: pointer;&#10;    user-select: none;&#10;}&#10;&#10;.user-profile.active {&#10;    display: flex;&#10;}&#10;&#10;.user-profile:hover {&#10;    background: rgba(255,255,255,0.06);&#10;}&#10;&#10;.user-profile:focus {&#10;    outline: 2px solid #00d4ff66;&#10;    outline-offset: 2px;&#10;}&#10;&#10;/* Name spacing and truncation */&#10;.user-name {&#10;    color: white;&#10;    font-size: 0.9rem;&#10;    max-width: clamp(80px, 14vw, 160px); /* adapts to viewport */&#10;    overflow: hidden;&#10;    text-overflow: ellipsis;&#10;    white-space: nowrap;&#10;    margin-right: 2px; /* subtle space before avatar */&#10;    /* Improved readability */&#10;    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;&#10;    font-weight: 600;&#10;    line-height: 1.2;&#10;}&#10;&#10;/* Caret icon to the right of the avatar */&#10;.dropdown-caret {&#10;    display: inline-block;&#10;    width: 0;&#10;    height: 0;&#10;    border-left: 5px solid transparent;&#10;    border-right: 5px solid transparent;&#10;    border-top: 6px solid #eef2f7;&#10;    margin-left: 4px;&#10;    transition: transform 160ms ease;&#10;}&#10;&#10;.user-profile[aria-expanded=&quot;true&quot;] .dropdown-caret {&#10;    transform: rotate(180deg);&#10;}&#10;&#10;/* Avatar keeps size; hitbox is the wrapper */&#10;.user-avatar {&#10;    width: 40px;&#10;    height: 40px;&#10;    border-radius: 50%;&#10;    border: 2px solid #00d4ff;&#10;    transition: transform 0.3s;&#10;    flex: 0 0 auto;&#10;}&#10;&#10;.user-avatar:hover {&#10;    transform: scale(1.05);&#10;}&#10;&#10;/* Space between login button and profile adapts with content */&#10;.user-section {&#10;    gap: 1.25rem;&#10;    margin-left: 0;&#10;}&#10;&#10;/* Dropdown Menu */&#10;.user-dropdown {&#10;    position: relative;&#10;}&#10;&#10;.dropdown-menu {&#10;    position: absolute;&#10;    top: 100%;&#10;    right: 0;&#10;    background: white;&#10;    border-radius: 10px;&#10;    box-shadow: 0 4px 20px rgba(0,0,0,0.15);&#10;    min-width: 200px;&#10;    margin-top: 10px;&#10;    display: none;&#10;    z-index: 1000;&#10;    overflow: hidden;&#10;}&#10;&#10;.dropdown-menu.show {&#10;    display: block;&#10;}&#10;&#10;.dropdown-item {&#10;    padding: 12px 16px;&#10;    border-bottom: 1px solid #f0f0f0;&#10;    cursor: pointer;&#10;    transition: background 0.3s;&#10;}&#10;&#10;.dropdown-item:hover {&#10;    background: #f3f5f7;&#10;}&#10;&#10;.dropdown-item:first-child {&#10;    border-top-left-radius: 10px;&#10;    border-top-right-radius: 10px;&#10;}&#10;&#10;.dropdown-item:last-child {&#10;    border-bottom-left-radius: 10px;&#10;    border-bottom-right-radius: 10px;&#10;    color: #dc3545;&#10;}&#10;&#10;.dropdown-item a {&#10;    color: #333;&#10;    text-decoration: none;&#10;    display: block;&#10;}&#10;&#10;/* Modal */&#10;.modal {&#10;    display: none;&#10;    position: fixed;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: rgba(0,0,0,0.8); /* 50% opacity */&#10;    z-index: 10000;&#10;    justify-content: center;&#10;    align-items: center;&#10;}&#10;&#10;.modal.show {&#10;    display: flex;&#10;}&#10;&#10;.modal-content {&#10;    background: white;&#10;    padding: 30px;&#10;    border-radius: 12px;&#10;    text-align: center;&#10;    max-width: 400px;&#10;    width: 90%;&#10;    position: relative;&#10;}&#10;&#10;.modal-close {&#10;    position: absolute;&#10;    top: 10px;&#10;    right: 15px;&#10;    font-size: 24px;&#10;    cursor: pointer;&#10;    color: #999;&#10;}&#10;&#10;.modal-close:hover {&#10;    color: #333;&#10;}&#10;&#10;/* Hero Section */&#10;.hero {&#10;    /* use solid base color; dynamic slides provide the imagery */&#10;    background: #0d1117;&#10;    color: white;&#10;    padding: 120px 0 80px;&#10;    text-align: center;&#10;    position: relative;&#10;    overflow: hidden;&#10;    min-height: 500px;&#10;}&#10;&#10;/* overlay above slides, below content for readability */&#10;.hero::after {&#10;    content: '';&#10;    position: absolute;&#10;    inset: 0;&#10;    background: linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.35));&#10;    z-index: 1;&#10;    pointer-events: none;&#10;}&#10;&#10;.hero .hero-content {&#10;    position: relative;&#10;    z-index: 2;&#10;}&#10;&#10;/* Make carousel be the hero background */&#10;.hero .hero-carousel {&#10;    position: absolute;&#10;    inset: 0;&#10;    padding: 0; /* remove spacing */&#10;    z-index: 0;&#10;    pointer-events: none; /* don't block CTA/header; re-enable for controls below */&#10;}&#10;&#10;.hero .hero-carousel .carousel-container {&#10;    width: 100%;&#10;    height: 100%;&#10;    max-width: none;&#10;    margin: 0;&#10;    border-radius: 0;&#10;    box-shadow: none;&#10;}&#10;&#10;.hero .carousel-wrapper {&#10;    height: 100%;&#10;}&#10;&#10;.hero .carousel-slide {&#10;    height: 100%;&#10;}&#10;&#10;.hero .carousel-slide img {&#10;    height: 100%;&#10;    object-fit: cover;&#10;}&#10;&#10;.hero .carousel-nav, .hero .carousel-dots {&#10;    z-index: 3;&#10;    pointer-events: auto;&#10;}&#10;&#10;.hero .carousel-dots {&#10;    position: absolute;&#10;    bottom: 16px;&#10;    left: 0;&#10;    right: 0;&#10;}&#10;&#10;/* --- Hero + integrated carousel overrides --- */&#10;.hero .hero-carousel {&#10;    background: transparent;&#10;    padding: 0; /* fully flush to edges */&#10;}&#10;.hero .hero-carousel .carousel-container {&#10;    box-shadow: none; /* no halo, true background */&#10;}&#10;/* Make carousel captions readable over hero */&#10;.hero .carousel-caption {&#10;    background: linear-gradient(transparent, rgba(0,0,0,0.75));&#10;}&#10;&#10;/* Section reveal base/active states */&#10;.features, .pricing, .carousel-section {&#10;    opacity: 0;&#10;    transform: translateY(30px);&#10;    transition: opacity 600ms ease, transform 600ms ease;&#10;}&#10;.features.revealed, .pricing.revealed, .carousel-section.revealed {&#10;    opacity: 1;&#10;    transform: translateY(0);&#10;}&#10;&#10;/* Staggered child animations for grids */&#10;.features-grid, .pricing-grid {&#10;    /* mark as stagger containers via JS */&#10;}&#10;&#10;/* Initial state for items */&#10;.features-grid &gt; * , .pricing-grid &gt; * {&#10;    opacity: 0;&#10;    transform: translateY(20px);&#10;    transition: transform 500ms ease, opacity 500ms ease;&#10;}&#10;&#10;/* When container enters view */&#10;.stagger.in-view &gt; * {&#10;    opacity: 1;&#10;    transform: translateY(0);&#10;}&#10;&#10;/* Stagger delays */&#10;.stagger.in-view &gt; *:nth-child(1) { transition-delay: 60ms; }&#10;.stagger.in-view &gt; *:nth-child(2) { transition-delay: 120ms; }&#10;.stagger.in-view &gt; *:nth-child(3) { transition-delay: 180ms; }&#10;.stagger.in-view &gt; *:nth-child(4) { transition-delay: 240ms; }&#10;.stagger.in-view &gt; *:nth-child(5) { transition-delay: 300ms; }&#10;.stagger.in-view &gt; *:nth-child(6) { transition-delay: 360ms; }&#10;.stagger.in-view &gt; *:nth-child(7) { transition-delay: 420ms; }&#10;.stagger.in-view &gt; *:nth-child(8) { transition-delay: 480ms; }&#10;&#10;/* Server Image Container */&#10;.server-image-container {&#10;    position: absolute;&#10;    top: 50%;&#10;    right: 10%;&#10;    transform: translateY(-50%);&#10;    opacity: 0.3;&#10;    z-index: 1;&#10;    animation: float 3s ease-in-out infinite;&#10;}&#10;&#10;.server-image {&#10;    width: 300px;&#10;    height: auto;&#10;    filter: brightness(1.2) drop-shadow(0 0 20px rgba(0, 212, 255, 0.3));&#10;}&#10;&#10;/* Floating animation for server image */&#10;@keyframes float {&#10;    0%, 100% {&#10;        transform: translateY(-50%) translateX(0);&#10;    }&#10;    50% {&#10;        transform: translateY(-55%) translateX(-10px);&#10;    }&#10;}&#10;&#10;/* Alternative: Server icon using CSS */&#10;.server-icon {&#10;    width: 200px;&#10;    height: 240px;&#10;    background: rgba(255, 255, 255, 0.1);&#10;    border: 3px solid rgba(0, 212, 255, 0.5);&#10;    border-radius: 10px;&#10;    position: relative;&#10;    backdrop-filter: blur(10px);&#10;}&#10;&#10;.server-icon::before {&#10;    content: '';&#10;    position: absolute;&#10;    top: 20px;&#10;    left: 20px;&#10;    right: 20px;&#10;    height: 15px;&#10;    background: #00d4ff;&#10;    border-radius: 5px;&#10;    box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);&#10;}&#10;&#10;.server-icon::after {&#10;    content: '';&#10;    position: absolute;&#10;    top: 50px;&#10;    left: 20px;&#10;    right: 20px;&#10;    bottom: 20px;&#10;    background: linear-gradient(180deg, rgba(0, 212, 255, 0.3) 0%, rgba(0, 212, 255, 0.1) 100%);&#10;    border-radius: 5px;&#10;    border: 1px solid rgba(0, 212, 255, 0.3);&#10;}&#10;&#10;/* Server lights */&#10;.server-lights {&#10;    position: absolute;&#10;    bottom: 30px;&#10;    left: 50%;&#10;    transform: translateX(-50%);&#10;    display: flex;&#10;    gap: 8px;&#10;}&#10;&#10;.server-light {&#10;    width: 8px;&#10;    height: 8px;&#10;    border-radius: 50%;&#10;    background: #00d4ff;&#10;    box-shadow: 0 0 8px rgba(0, 212, 255, 0.8);&#10;    animation: blink 2s infinite;&#10;}&#10;&#10;.server-light:nth-child(2) {&#10;    animation-delay: 0.5s;&#10;}&#10;&#10;.server-light:nth-child(3) {&#10;    animation-delay: 1s;&#10;}&#10;&#10;@keyframes blink {&#10;    0%, 50% {&#10;        opacity: 1;&#10;    }&#10;    51%, 100% {&#10;        opacity: 0.3;&#10;    }&#10;}&#10;&#10;/* Carousel */&#10;.carousel-section {&#10;    padding: 60px 0;&#10;    background: #f8f9fa;&#10;}&#10;&#10;.carousel-container {&#10;    position: relative;&#10;    max-width: 800px;&#10;    margin: 0 auto;&#10;    overflow: hidden;&#10;    border-radius: 12px;&#10;    box-shadow: 0 10px 30px rgba(0,0,0,0.15);&#10;}&#10;&#10;.carousel-wrapper {&#10;    display: flex;&#10;    transition: transform 0.5s ease-in-out;&#10;}&#10;&#10;.carousel-slide {&#10;    min-width: 100%;&#10;    position: relative;&#10;}&#10;&#10;.carousel-slide img {&#10;    width: 100%;&#10;    height: 400px;&#10;    object-fit: cover;&#10;    display: block;&#10;}&#10;&#10;.carousel-caption {&#10;    position: absolute;&#10;    bottom: 0;&#10;    left: 0;&#10;    right: 0;&#10;    background: linear-gradient(transparent, rgba(0,0,0,0.8));&#10;    color: white;&#10;    padding: 30px 20px 20px;&#10;    text-align: center;&#10;}&#10;&#10;.carousel-caption h3 {&#10;    font-size: 1.5rem;&#10;    margin-bottom: 0.5rem;&#10;}&#10;&#10;.carousel-caption p {&#10;    opacity: 0.9;&#10;}&#10;&#10;.carousel-nav {&#10;    position: absolute;&#10;    top: 50%;&#10;    transform: translateY(-50%);&#10;    background: rgba(0,0,0,0.5);&#10;    color: white;&#10;    border: none;&#10;    width: 50px;&#10;    height: 50px;&#10;    border-radius: 50%;&#10;    cursor: pointer;&#10;    font-size: 1.2rem;&#10;    transition: background 0.3s;&#10;    z-index: 10;&#10;}&#10;&#10;.carousel-nav:hover {&#10;    background: rgba(0,0,0,0.8);&#10;}&#10;&#10;.carousel-prev {&#10;    left: 15px;&#10;}&#10;&#10;.carousel-next {&#10;    right: 15px;&#10;}&#10;&#10;.carousel-dots {&#10;    display: flex;&#10;    justify-content: center;&#10;    gap: 10px;&#10;    margin-top: 20px;&#10;}&#10;&#10;.carousel-dot {&#10;    width: 12px;&#10;    height: 12px;&#10;    border-radius: 50%;&#10;    background: #ccc;&#10;    cursor: pointer;&#10;    transition: background 0.3s;&#10;}&#10;&#10;.carousel-dot.active {&#10;    background: #00d4ff;&#10;}&#10;&#10;/* Features */&#10;.features {&#10;    padding: 80px 0;&#10;    background: #f8f9fa;&#10;}&#10;&#10;.features-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));&#10;    gap: 2rem;&#10;    margin-top: 3rem;&#10;}&#10;&#10;.feature-card {&#10;    background: white;&#10;    padding: 2rem;&#10;    border-radius: 8px;&#10;    text-align: center;&#10;    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);&#10;}&#10;&#10;.feature-icon {&#10;    font-size: 3rem;&#10;    margin-bottom: 1rem;&#10;}&#10;&#10;/* Pricing */&#10;.pricing {&#10;    padding: 80px 0;&#10;}&#10;&#10;.pricing h2 {&#10;    text-align: center;&#10;    font-size: 2.5rem;&#10;    margin-bottom: 3rem;&#10;}&#10;&#10;.pricing-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));&#10;    gap: 2rem;&#10;    margin-top: 2rem;&#10;}&#10;&#10;.pricing-card {&#10;    background: white;&#10;    border: 2px solid #e9ecef;&#10;    border-radius: 8px;&#10;    padding: 2rem;&#10;    text-align: center;&#10;    position: relative;&#10;    transition: transform 0.3s;&#10;}&#10;&#10;.pricing-card:hover {&#10;    transform: translateY(-5px);&#10;    border-color: #00d4ff;&#10;}&#10;&#10;.popular {&#10;    border-color: #00d4ff;&#10;    transform: scale(1.05);&#10;}&#10;&#10;.popular::before {&#10;    content: &quot;MÃS POPULAR&quot;;&#10;    position: absolute;&#10;    top: -15px;&#10;    left: 50%;&#10;    transform: translateX(-50%);&#10;    background: #00d4ff;&#10;    color: white;&#10;    padding: 5px 20px;&#10;    border-radius: 20px;&#10;    font-size: 0.8rem;&#10;    font-weight: bold;&#10;}&#10;&#10;.plan-name {&#10;    font-size: 1.5rem;&#10;    font-weight: bold;&#10;    margin-bottom: 1rem;&#10;}&#10;&#10;.plan-price {&#10;    font-size: 2.5rem;&#10;    font-weight: bold;&#10;    color: #00d4ff;&#10;    margin-bottom: 0.5rem;&#10;}&#10;&#10;.plan-period {&#10;    color: #000000;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.plan-features {&#10;    list-style: none;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.plan-features li {&#10;    padding: 0.5rem 0;&#10;    border-bottom: 1px solid #f0f0f0;&#10;}&#10;&#10;/* Footer */&#10;footer {&#10;    background: #0d1117;&#10;    color: white;&#10;    padding: 40px 0;&#10;    text-align: center;&#10;}&#10;&#10;.footer-content {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));&#10;    gap: 2rem;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.footer-section h3 {&#10;    margin-bottom: 1rem;&#10;    color: #00d4ff;&#10;}&#10;&#10;.footer-section a {&#10;    color: #ccc;&#10;    text-decoration: none;&#10;    display: block;&#10;    margin-bottom: 0.5rem;&#10;}&#10;&#10;.footer-section a:hover {&#10;    color: #00d4ff;&#10;}&#10;&#10;/* Debug Info */&#10;.debug-info {&#10;    position: fixed;&#10;    bottom: 10px;&#10;    right: 10px;&#10;    background: rgba(0,0,0,0.8);&#10;    color: white;&#10;    padding: 10px;&#10;    border-radius: 5px;&#10;    font-size: 0.8rem;&#10;    z-index: 1000;&#10;}&#10;&#10;/* CTA button as styled link */&#10;a.cta-button {&#10;    background: #00d4ff;&#10;    color: #fff !important;&#10;    padding: 12px 24px;&#10;    border-radius: 8px;&#10;    border: none;&#10;    text-decoration: none !important;&#10;    display: inline-flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    font-weight: 600;&#10;    line-height: 1;&#10;    transition: background 200ms ease, transform 120ms ease;&#10;}&#10;a.cta-button:visited { color: #fff !important; }&#10;a.cta-button:hover { background: #00b8e6; text-decoration: none; }&#10;a.cta-button:active { transform: translateY(1px); }&#10;&#10;/* Legacy .cta-button rule kept for non-anchor buttons */&#10;.cta-button { text-decoration: none; }" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/index.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/index.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;es&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;BitHosting Argentina - Hosting Local&lt;/title&gt;&#10;    &lt;script src=&quot;https://accounts.google.com/gsi/client&quot; async defer&gt;&lt;/script&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;css/styles.css&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;&lt;!-- Header --&gt;&#10;&lt;header&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;nav&gt;&#10;            &lt;a href=&quot;/&quot; id=&quot;siteLogo&quot; class=&quot;logo&quot; style=&quot;display:flex;align-items:center;gap:10px;text-decoration:none;&quot;&gt;&#10;                &lt;!-- Inline SVG logo to avoid remote loading issues --&gt;&#10;                &lt;svg class=&quot;bh-logo&quot; width=&quot;40&quot; height=&quot;40&quot; viewBox=&quot;0 0 40 40&quot; aria-hidden=&quot;true&quot;&gt;&#10;                    &lt;defs&gt;&#10;                        &lt;linearGradient id=&quot;bhg&quot; x1=&quot;0&quot; y1=&quot;0&quot; x2=&quot;1&quot; y2=&quot;1&quot;&gt;&#10;                            &lt;stop offset=&quot;0%&quot; stop-color=&quot;#00d4ff&quot;/&gt;&#10;                            &lt;stop offset=&quot;100%&quot; stop-color=&quot;#00b8e6&quot;/&gt;&#10;                        &lt;/linearGradient&gt;&#10;                    &lt;/defs&gt;&#10;                    &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;40&quot; height=&quot;40&quot; rx=&quot;8&quot; ry=&quot;8&quot; fill=&quot;url(#bhg)&quot;/&gt;&#10;                    &lt;text x=&quot;50%&quot; y=&quot;50%&quot; dominant-baseline=&quot;middle&quot; text-anchor=&quot;middle&quot; font-family=&quot;Segoe UI, Roboto, sans-serif&quot; font-size=&quot;20&quot; fill=&quot;#001018&quot;&gt;B&lt;/text&gt;&#10;                &lt;/svg&gt;&#10;                BitHosting&#10;            &lt;/a&gt;&#10;            &lt;ul class=&quot;nav-links&quot;&gt;&#10;                &lt;li&gt;&lt;a href=&quot;#inicio&quot;&gt;Inicio&lt;/a&gt;&lt;/li&gt;&#10;                &lt;li&gt;&lt;a href=&quot;#precios&quot;&gt;Precios&lt;/a&gt;&lt;/li&gt;&#10;                &lt;li&gt;&lt;a href=&quot;#contacto&quot;&gt;Soporte&lt;/a&gt;&lt;/li&gt;&#10;                &lt;li&gt;&lt;a href=&quot;#contacto&quot;&gt;Contacto&lt;/a&gt;&lt;/li&gt;&#10;                &lt;li&gt;&lt;a href=&quot;#cuenta&quot; id=&quot;miCuentaLink&quot; style=&quot;display: none;&quot;&gt;Mi Cuenta&lt;/a&gt;&lt;/li&gt;&#10;            &lt;/ul&gt;&#10;            &lt;div class=&quot;user-section&quot;&gt;&#10;                &lt;button class=&quot;login-btn&quot; id=&quot;loginBtn&quot;&gt;&#10;                    &lt;span&gt;Iniciar Sesión&lt;/span&gt;&#10;                &lt;/button&gt;&#10;                &lt;div class=&quot;user-profile&quot; id=&quot;userProfile&quot; role=&quot;button&quot; tabindex=&quot;0&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;&#10;                    &lt;span class=&quot;user-name&quot; id=&quot;userName&quot;&gt;&lt;/span&gt;&#10;                    &lt;img class=&quot;user-avatar&quot; id=&quot;userAvatar&quot; src=&quot;&quot; alt=&quot;User&quot;&gt;&#10;                    &lt;span class=&quot;dropdown-caret&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&#10;                    &lt;div class=&quot;dropdown-menu&quot; id=&quot;dropdownMenu&quot;&gt;&#10;                        &lt;div class=&quot;dropdown-item&quot;&gt;&#10;                            &lt;a href=&quot;/panel&quot; id=&quot;panelLink&quot;&gt;Panel de Control&lt;/a&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;dropdown-item&quot;&gt;&#10;                            &lt;a href=&quot;#facturas&quot;&gt;Facturación&lt;/a&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;dropdown-item&quot;&gt;&#10;                            &lt;a href=&quot;#contacto&quot;&gt;Soporte&lt;/a&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;dropdown-item&quot; id=&quot;logoutBtn&quot;&gt;&#10;                            Cerrar Sesión&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/nav&gt;&#10;    &lt;/div&gt;&#10;&lt;/header&gt;&#10;&#10;&lt;!-- Login Modal --&gt;&#10;&lt;div class=&quot;modal&quot; id=&quot;loginModal&quot;&gt;&#10;    &lt;div class=&quot;modal-content&quot;&gt;&#10;        &lt;!-- Replace inline onclick with button id --&gt;&#10;        &lt;button type=&quot;button&quot; class=&quot;modal-close&quot; id=&quot;closeLoginBtn&quot; aria-label=&quot;Cerrar&quot;&gt;&amp;times;&lt;/button&gt;&#10;        &lt;h3&gt;Iniciar Sesión&lt;/h3&gt;&#10;        &lt;p&gt;Usa tu cuenta de Google para acceder&lt;/p&gt;&#10;        &lt;!-- Declarative Google Sign-In fallback --&gt;&#10;        &lt;div id=&quot;google-signin-fallback&quot;&gt;&#10;            &lt;div id=&quot;g_id_onload&quot;&#10;                 data-client_id=&quot;614144050505-a02n5fod2ofne58nt9i01tj5ok977eot.apps.googleusercontent.com&quot;&#10;                 data-context=&quot;signin&quot;&#10;                 data-ux_mode=&quot;popup&quot;&#10;                 data-callback=&quot;handleCredentialResponse&quot;&#10;                 data-auto_prompt=&quot;false&quot;&gt;&lt;/div&gt;&#10;            &lt;div class=&quot;g_id_signin&quot;&#10;                 data-type=&quot;standard&quot;&#10;                 data-size=&quot;large&quot;&#10;                 data-theme=&quot;outline&quot;&#10;                 data-text=&quot;signin_with&quot;&#10;                 data-shape=&quot;pill&quot;&#10;                 data-logo_alignment=&quot;left&quot;&gt;&lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;!-- Programmatic render target --&gt;&#10;        &lt;div id=&quot;google-signin-button&quot;&gt;&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- Hero Section --&gt;&#10;&lt;section class=&quot;hero with-server-bg&quot; id=&quot;inicio&quot;&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;div class=&quot;hero-content&quot;&gt;&#10;            &lt;h1&gt;BitHosting&lt;/h1&gt;&#10;            &lt;p&gt;Servidores virtuales de alto rendimiento con baja latencia, soporte en español y precios en pesos&lt;/p&gt;&#10;            &lt;a href=&quot;#precios&quot; class=&quot;cta-button&quot;&gt;Ver Planes&lt;/a&gt;&#10;        &lt;/div&gt;&#10;        &lt;!-- Integrated carousel inside hero as full background --&gt;&#10;        &lt;section class=&quot;carousel-section hero-carousel&quot;&gt;&#10;            &lt;!-- removed section heading for full-bg integration --&gt;&#10;            &lt;div class=&quot;carousel-container&quot;&gt;&#10;                &lt;div class=&quot;carousel-wrapper&quot; id=&quot;carouselWrapper&quot;&gt;&#10;                    &lt;!-- ...existing slides... --&gt;&#10;                    &lt;div class=&quot;carousel-slide&quot;&gt;&#10;                        &lt;img src=&quot;https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=1600&amp;h=900&amp;fit=crop&quot; alt=&quot;Datacenter&quot;&gt;&#10;                        &lt;div class=&quot;carousel-caption&quot;&gt;&#10;                            &lt;h3&gt;Infraestructura Moderna&lt;/h3&gt;&#10;                            &lt;p&gt;Servidores de última generación con SSD y procesadores Intel de alto rendimiento&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;carousel-slide&quot;&gt;&#10;                        &lt;img src=&quot;https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=1600&amp;h=900&amp;fit=crop&quot; alt=&quot;Conexión&quot;&gt;&#10;                        &lt;div class=&quot;carousel-caption&quot;&gt;&#10;                            &lt;h3&gt;Conectividad Premium&lt;/h3&gt;&#10;                            &lt;p&gt;Conexión directa a Buenos Aires con latencia ultra baja para usuarios argentinos&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;carousel-slide&quot;&gt;&#10;                        &lt;img src=&quot;https://images.unsplash.com/photo-1560472355-536de3962603?w=1600&amp;h=900&amp;fit=crop&quot; alt=&quot;Soporte&quot;&gt;&#10;                        &lt;div class=&quot;carousel-caption&quot;&gt;&#10;                            &lt;h3&gt;Soporte 24/7&lt;/h3&gt;&#10;                            &lt;p&gt;Atención técnica especializada en español durante horarios comerciales argentinos&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;carousel-slide&quot;&gt;&#10;                        &lt;img src=&quot;https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1600&amp;h=900&amp;fit=crop&quot; alt=&quot;Seguridad&quot;&gt;&#10;                        &lt;div class=&quot;carousel-caption&quot;&gt;&#10;                            &lt;h3&gt;Máxima Seguridad&lt;/h3&gt;&#10;                            &lt;p&gt;Backups automáticos, firewall configurado y monitoreo constante de todos los servicios&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;button class=&quot;carousel-nav carousel-prev&quot; onclick=&quot;changeSlide(-1)&quot;&gt;‹&lt;/button&gt;&#10;                &lt;button class=&quot;carousel-nav carousel-next&quot; onclick=&quot;changeSlide(1)&quot;&gt;›&lt;/button&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;carousel-dots&quot;&gt;&#10;                &lt;span class=&quot;carousel-dot active&quot; onclick=&quot;currentSlide(1)&quot;&gt;&lt;/span&gt;&#10;                &lt;span class=&quot;carousel-dot&quot; onclick=&quot;currentSlide(2)&quot;&gt;&lt;/span&gt;&#10;                &lt;span class=&quot;carousel-dot&quot; onclick=&quot;currentSlide(3)&quot;&gt;&lt;/span&gt;&#10;                &lt;span class=&quot;carousel-dot&quot; onclick=&quot;currentSlide(4)&quot;&gt;&lt;/span&gt;&#10;            &lt;/div&gt;&#10;        &lt;/section&gt;&#10;    &lt;/div&gt;&#10;&lt;/section&gt;&#10;&#10;&lt;!-- Features --&gt;&#10;&lt;section class=&quot;features&quot;&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;h2 style=&quot;text-align: center; font-size: 2.5rem; margin-bottom: 1rem;&quot;&gt;¿Por qué elegir VPS Argentina?&lt;/h2&gt;&#10;        &lt;div class=&quot;features-grid&quot;&gt;&#10;            &lt;div class=&quot;feature-card&quot;&gt;&#10;                &lt;div class=&quot;feature-icon&quot;&gt;&lt;/div&gt;&#10;                &lt;h3&gt;Servidores Locales&lt;/h3&gt;&#10;                &lt;p&gt;Ubicados en Buenos Aires para mínima latencia. Ideal para usuarios argentinos.&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;feature-card&quot;&gt;&#10;                &lt;div class=&quot;feature-icon&quot;&gt;⚡&lt;/div&gt;&#10;                &lt;h3&gt;Setup Instantáneo&lt;/h3&gt;&#10;                &lt;p&gt;Tu servidor listo en menos de 5 minutos. Sin esperas ni complicaciones.&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;feature-card&quot;&gt;&#10;                &lt;div class=&quot;feature-icon&quot;&gt;&lt;/div&gt;&#10;                &lt;h3&gt;Soporte en Español&lt;/h3&gt;&#10;                &lt;p&gt;Atención técnica en tu idioma y horario argentino. WhatsApp directo.&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;feature-card&quot;&gt;&#10;                &lt;div class=&quot;feature-icon&quot;&gt;&lt;/div&gt;&#10;                &lt;h3&gt;Precios en Pesos&lt;/h3&gt;&#10;                &lt;p&gt;Sin fluctuaciones del dólar. Facturación local argentina.&lt;/p&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/section&gt;&#10;&#10;&lt;!-- Pricing --&gt;&#10;&lt;section class=&quot;pricing&quot; id=&quot;precios&quot;&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;h2&gt;Planes VPS Linux&lt;/h2&gt;&#10;        &lt;div class=&quot;pricing-grid&quot;&gt;&#10;            &lt;div class=&quot;pricing-card&quot;&gt;&#10;                &lt;div class=&quot;plan-name&quot;&gt;Mini&lt;/div&gt;&#10;                &lt;div class=&quot;plan-price&quot;&gt;$5000&lt;/div&gt;&#10;                &lt;div class=&quot;plan-period&quot;&gt;ARS / mes&lt;/div&gt;&#10;                &lt;ul class=&quot;plan-features&quot;&gt;&#10;                    &lt;li&gt;1 vCPU&lt;/li&gt;&#10;                    &lt;li&gt;250 MB RAM&lt;/li&gt;&#10;                    &lt;li&gt;5 GB SSD&lt;/li&gt;&#10;                    &lt;li&gt;1 IP Pública&lt;/li&gt;&#10;                    &lt;li&gt;Ubuntu/CentOS&lt;/li&gt;&#10;                    &lt;li&gt;Acceso SSH&lt;/li&gt;&#10;                &lt;/ul&gt;&#10;                &lt;a href=&quot;#&quot; class=&quot;cta-button&quot;&gt;Elegir Plan&lt;/a&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;pricing-card popular&quot;&gt;&#10;                &lt;div class=&quot;plan-name&quot;&gt;Estándar&lt;/div&gt;&#10;                &lt;div class=&quot;plan-price&quot;&gt;$15.000&lt;/div&gt;&#10;                &lt;div class=&quot;plan-period&quot;&gt;ARS / mes&lt;/div&gt;&#10;                &lt;ul class=&quot;plan-features&quot;&gt;&#10;                    &lt;li&gt;2 vCPU&lt;/li&gt;&#10;                    &lt;li&gt;2 GB RAM&lt;/li&gt;&#10;                    &lt;li&gt;50 GB SSD&lt;/li&gt;&#10;                    &lt;li&gt;1 IP Pública&lt;/li&gt;&#10;                    &lt;li&gt;Ubuntu/CentOS/Debian&lt;/li&gt;&#10;                    &lt;li&gt;Backup Semanal&lt;/li&gt;&#10;                &lt;/ul&gt;&#10;                &lt;a href=&quot;#&quot; class=&quot;cta-button&quot;&gt;Elegir Plan&lt;/a&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;pricing-card&quot;&gt;&#10;                &lt;div class=&quot;plan-name&quot;&gt;Profesional&lt;/div&gt;&#10;                &lt;div class=&quot;plan-price&quot;&gt;$25.000&lt;/div&gt;&#10;                &lt;div class=&quot;plan-period&quot;&gt;ARS / mes&lt;/div&gt;&#10;                &lt;ul class=&quot;plan-features&quot;&gt;&#10;                    &lt;li&gt;4 vCPU&lt;/li&gt;&#10;                    &lt;li&gt;4 GB RAM&lt;/li&gt;&#10;                    &lt;li&gt;80 GB SSD&lt;/li&gt;&#10;                    &lt;li&gt;1 IP Pública&lt;/li&gt;&#10;                    &lt;li&gt;Todas las distros&lt;/li&gt;&#10;                    &lt;li&gt;Backup Diario&lt;/li&gt;&#10;                &lt;/ul&gt;&#10;                &lt;a href=&quot;#&quot; class=&quot;cta-button&quot;&gt;Elegir Plan&lt;/a&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/section&gt;&#10;&#10;&lt;!-- Footer --&gt;&#10;&lt;footer id=&quot;contacto&quot;&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;div class=&quot;footer-content&quot;&gt;&#10;            &lt;div class=&quot;footer-section&quot;&gt;&#10;                &lt;h3&gt;Contacto&lt;/h3&gt;&#10;                &lt;a href=&quot;#&quot;&gt;WhatsApp: +54 9 11 XXXX-XXXX&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Email: soporte@XXXXX.com&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Buenos Aires, Argentina&lt;/a&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;footer-section&quot;&gt;&#10;                &lt;h3&gt;Servicios&lt;/h3&gt;&#10;                &lt;a href=&quot;#&quot;&gt;VPS Linux&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Migración Gratuita&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Soporte Técnico&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Backups&lt;/a&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;footer-section&quot;&gt;&#10;                &lt;h3&gt;Recursos&lt;/h3&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Documentación&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Tutoriales&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Estado del Servicio&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Términos de Servicio&lt;/a&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;p&gt;&amp;copy; 2025 BitHosting. Todos los derechos reservados.&lt;/p&gt;&#10;    &lt;/div&gt;&#10;&lt;/footer&gt;&#10;&#10;&lt;!-- Debug Info --&gt;&#10;&lt;div class=&quot;debug-info&quot; id=&quot;debugInfo&quot;&gt;&#10;    URL: &lt;span id=&quot;currentUrl&quot;&gt;&lt;/span&gt;&lt;br&gt;&#10;    Status: &lt;span id=&quot;authStatus&quot;&gt;No logueado&lt;/span&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;script src=&quot;js/auth.js&quot;&gt;&lt;/script&gt;&#10;&lt;script src=&quot;js/carousel.js&quot;&gt;&lt;/script&gt;&#10;&lt;script src=&quot;js/main.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;es&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;BitHosting Argentina - Hosting Local&lt;/title&gt;&#10;    &lt;script src=&quot;https://accounts.google.com/gsi/client&quot; async defer&gt;&lt;/script&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;css/styles.css&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;&lt;!-- Header --&gt;&#10;&lt;header&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;nav&gt;&#10;            &lt;a href=&quot;/&quot; id=&quot;siteLogo&quot; class=&quot;logo&quot; style=&quot;display:flex;align-items:center;gap:10px;text-decoration:none;&quot;&gt;&#10;                &lt;!-- Inline SVG logo to avoid remote loading issues --&gt;&#10;                &lt;svg class=&quot;bh-logo&quot; width=&quot;40&quot; height=&quot;40&quot; viewBox=&quot;0 0 40 40&quot; aria-hidden=&quot;true&quot;&gt;&#10;                    &lt;defs&gt;&#10;                        &lt;linearGradient id=&quot;bhg&quot; x1=&quot;0&quot; y1=&quot;0&quot; x2=&quot;1&quot; y2=&quot;1&quot;&gt;&#10;                            &lt;stop offset=&quot;0%&quot; stop-color=&quot;#00d4ff&quot;/&gt;&#10;                            &lt;stop offset=&quot;100%&quot; stop-color=&quot;#00b8e6&quot;/&gt;&#10;                        &lt;/linearGradient&gt;&#10;                    &lt;/defs&gt;&#10;                    &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;40&quot; height=&quot;40&quot; rx=&quot;8&quot; ry=&quot;8&quot; fill=&quot;url(#bhg)&quot;/&gt;&#10;                    &lt;text x=&quot;50%&quot; y=&quot;50%&quot; dominant-baseline=&quot;middle&quot; text-anchor=&quot;middle&quot; font-family=&quot;Segoe UI, Roboto, sans-serif&quot; font-size=&quot;20&quot; fill=&quot;#001018&quot;&gt;B&lt;/text&gt;&#10;                &lt;/svg&gt;&#10;                BitHosting&#10;            &lt;/a&gt;&#10;            &lt;ul class=&quot;nav-links&quot;&gt;&#10;                &lt;li&gt;&lt;a href=&quot;#inicio&quot;&gt;Inicio&lt;/a&gt;&lt;/li&gt;&#10;                &lt;li&gt;&lt;a href=&quot;#precios&quot;&gt;Precios&lt;/a&gt;&lt;/li&gt;&#10;                &lt;li&gt;&lt;a href=&quot;#contacto&quot;&gt;Soporte&lt;/a&gt;&lt;/li&gt;&#10;                &lt;li&gt;&lt;a href=&quot;#contacto&quot;&gt;Contacto&lt;/a&gt;&lt;/li&gt;&#10;                &lt;li&gt;&lt;a href=&quot;#cuenta&quot; id=&quot;miCuentaLink&quot; style=&quot;display: none;&quot;&gt;Mi Cuenta&lt;/a&gt;&lt;/li&gt;&#10;            &lt;/ul&gt;&#10;            &lt;div class=&quot;user-section&quot;&gt;&#10;                &lt;button class=&quot;login-btn&quot; id=&quot;loginBtn&quot;&gt;&#10;                    &lt;span&gt;Iniciar Sesión&lt;/span&gt;&#10;                &lt;/button&gt;&#10;                &lt;div class=&quot;user-profile&quot; id=&quot;userProfile&quot; role=&quot;button&quot; tabindex=&quot;0&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;&#10;                    &lt;span class=&quot;user-name&quot; id=&quot;userName&quot;&gt;&lt;/span&gt;&#10;                    &lt;img class=&quot;user-avatar&quot; id=&quot;userAvatar&quot; src=&quot;&quot; alt=&quot;User&quot;&gt;&#10;                    &lt;span class=&quot;dropdown-caret&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&#10;                    &lt;div class=&quot;dropdown-menu&quot; id=&quot;dropdownMenu&quot;&gt;&#10;                        &lt;div class=&quot;dropdown-item&quot;&gt;&#10;                            &lt;a href=&quot;/panel&quot; id=&quot;panelLink&quot;&gt;Panel de Control&lt;/a&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;dropdown-item&quot;&gt;&#10;                            &lt;a href=&quot;#facturas&quot;&gt;Facturación&lt;/a&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;dropdown-item&quot;&gt;&#10;                            &lt;a href=&quot;#contacto&quot;&gt;Soporte&lt;/a&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;dropdown-item&quot; id=&quot;logoutBtn&quot;&gt;&#10;                            Cerrar Sesión&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/nav&gt;&#10;    &lt;/div&gt;&#10;&lt;/header&gt;&#10;&#10;&lt;!-- Login Modal --&gt;&#10;&lt;div class=&quot;modal&quot; id=&quot;loginModal&quot;&gt;&#10;    &lt;div class=&quot;modal-content&quot;&gt;&#10;        &lt;!-- Replace inline onclick with button id --&gt;&#10;        &lt;button type=&quot;button&quot; class=&quot;modal-close&quot; id=&quot;closeLoginBtn&quot; aria-label=&quot;Cerrar&quot;&gt;&amp;times;&lt;/button&gt;&#10;        &lt;h3&gt;Iniciar Sesión&lt;/h3&gt;&#10;        &lt;p&gt;Usa tu cuenta de Google para acceder&lt;/p&gt;&#10;        &lt;!-- Declarative Google Sign-In fallback --&gt;&#10;        &lt;div id=&quot;google-signin-fallback&quot;&gt;&#10;            &lt;div id=&quot;g_id_onload&quot;&#10;                 data-client_id=&quot;614144050505-a02n5fod2ofne58nt9i01tj5ok977eot.apps.googleusercontent.com&quot;&#10;                 data-context=&quot;signin&quot;&#10;                 data-ux_mode=&quot;popup&quot;&#10;                 data-callback=&quot;handleCredentialResponse&quot;&#10;                 data-auto_prompt=&quot;false&quot;&gt;&lt;/div&gt;&#10;            &lt;div class=&quot;g_id_signin&quot;&#10;                 data-type=&quot;standard&quot;&#10;                 data-size=&quot;large&quot;&#10;                 data-theme=&quot;outline&quot;&#10;                 data-text=&quot;signin_with&quot;&#10;                 data-shape=&quot;pill&quot;&#10;                 data-logo_alignment=&quot;left&quot;&gt;&lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;!-- Programmatic render target --&gt;&#10;        &lt;div id=&quot;google-signin-button&quot;&gt;&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- Hero Section --&gt;&#10;&lt;section class=&quot;hero with-server-bg&quot; id=&quot;inicio&quot;&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;div class=&quot;hero-content&quot;&gt;&#10;            &lt;h1&gt;BitHosting&lt;/h1&gt;&#10;            &lt;p&gt;Servidores virtuales de alto rendimiento con baja latencia, soporte en español y precios en pesos&lt;/p&gt;&#10;            &lt;a href=&quot;#precios&quot; class=&quot;cta-button&quot;&gt;Ver Planes&lt;/a&gt;&#10;        &lt;/div&gt;&#10;        &lt;!-- Integrated carousel inside hero as full background --&gt;&#10;        &lt;section class=&quot;carousel-section hero-carousel&quot;&gt;&#10;            &lt;!-- removed section heading for full-bg integration --&gt;&#10;            &lt;div class=&quot;carousel-container&quot;&gt;&#10;                &lt;div class=&quot;carousel-wrapper&quot; id=&quot;carouselWrapper&quot;&gt;&#10;                    &lt;!-- ...existing slides... --&gt;&#10;                    &lt;div class=&quot;carousel-slide&quot;&gt;&#10;                        &lt;img src=&quot;https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=1600&amp;h=900&amp;fit=crop&quot; alt=&quot;Datacenter&quot;&gt;&#10;                        &lt;div class=&quot;carousel-caption&quot;&gt;&#10;                            &lt;h3&gt;Infraestructura Moderna&lt;/h3&gt;&#10;                            &lt;p&gt;Servidores de última generación con SSD y procesadores Intel de alto rendimiento&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;carousel-slide&quot;&gt;&#10;                        &lt;img src=&quot;https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=1600&amp;h=900&amp;fit=crop&quot; alt=&quot;Conexión&quot;&gt;&#10;                        &lt;div class=&quot;carousel-caption&quot;&gt;&#10;                            &lt;h3&gt;Conectividad Premium&lt;/h3&gt;&#10;                            &lt;p&gt;Conexión directa a Buenos Aires con latencia ultra baja para usuarios argentinos&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;carousel-slide&quot;&gt;&#10;                        &lt;img src=&quot;https://images.unsplash.com/photo-1560472355-536de3962603?w=1600&amp;h=900&amp;fit=crop&quot; alt=&quot;Soporte&quot;&gt;&#10;                        &lt;div class=&quot;carousel-caption&quot;&gt;&#10;                            &lt;h3&gt;Soporte 24/7&lt;/h3&gt;&#10;                            &lt;p&gt;Atención técnica especializada en español durante horarios comerciales argentinos&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;carousel-slide&quot;&gt;&#10;                        &lt;img src=&quot;https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1600&amp;h=900&amp;fit=crop&quot; alt=&quot;Seguridad&quot;&gt;&#10;                        &lt;div class=&quot;carousel-caption&quot;&gt;&#10;                            &lt;h3&gt;Máxima Seguridad&lt;/h3&gt;&#10;                            &lt;p&gt;Backups automáticos, firewall configurado y monitoreo constante de todos los servicios&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;carousel-slide&quot;&gt;&#10;                        &lt;img src=&quot;https://static.vecteezy.com/system/resources/previews/022/277/081/large_2x/data-center-server-room-or-database-cloud-storage-free-vector.jpg&quot; alt=&quot;Data center&quot;&gt;&#10;                        &lt;div class=&quot;carousel-caption&quot;&gt;&#10;                            &lt;h3&gt;Data Center&lt;/h3&gt;&#10;                            &lt;p&gt;Capacidad y rendimiento para tus proyectos en la nube&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;button class=&quot;carousel-nav carousel-prev&quot; onclick=&quot;changeSlide(-1)&quot;&gt;‹&lt;/button&gt;&#10;                &lt;button class=&quot;carousel-nav carousel-next&quot; onclick=&quot;changeSlide(1)&quot;&gt;›&lt;/button&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;carousel-dots&quot;&gt;&#10;                &lt;span class=&quot;carousel-dot active&quot; onclick=&quot;currentSlide(1)&quot;&gt;&lt;/span&gt;&#10;                &lt;span class=&quot;carousel-dot&quot; onclick=&quot;currentSlide(2)&quot;&gt;&lt;/span&gt;&#10;                &lt;span class=&quot;carousel-dot&quot; onclick=&quot;currentSlide(3)&quot;&gt;&lt;/span&gt;&#10;                &lt;span class=&quot;carousel-dot&quot; onclick=&quot;currentSlide(4)&quot;&gt;&lt;/span&gt;&#10;                &lt;span class=&quot;carousel-dot&quot; onclick=&quot;currentSlide(5)&quot;&gt;&lt;/span&gt;&#10;            &lt;/div&gt;&#10;        &lt;/section&gt;&#10;    &lt;/div&gt;&#10;&lt;/section&gt;&#10;&#10;&lt;!-- Features --&gt;&#10;&lt;section class=&quot;features&quot;&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;h2 style=&quot;text-align: center; font-size: 2.5rem; margin-bottom: 1rem;&quot;&gt;¿Por qué elegir VPS Argentina?&lt;/h2&gt;&#10;        &lt;div class=&quot;features-grid&quot;&gt;&#10;            &lt;div class=&quot;feature-card&quot;&gt;&#10;                &lt;div class=&quot;feature-icon&quot;&gt;&lt;/div&gt;&#10;                &lt;h3&gt;Servidores Locales&lt;/h3&gt;&#10;                &lt;p&gt;Ubicados en Buenos Aires para mínima latencia. Ideal para usuarios argentinos.&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;feature-card&quot;&gt;&#10;                &lt;div class=&quot;feature-icon&quot;&gt;⚡&lt;/div&gt;&#10;                &lt;h3&gt;Setup Instantáneo&lt;/h3&gt;&#10;                &lt;p&gt;Tu servidor listo en menos de 5 minutos. Sin esperas ni complicaciones.&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;feature-card&quot;&gt;&#10;                &lt;div class=&quot;feature-icon&quot;&gt;&lt;/div&gt;&#10;                &lt;h3&gt;Soporte en Español&lt;/h3&gt;&#10;                &lt;p&gt;Atención técnica en tu idioma y horario argentino. WhatsApp directo.&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;feature-card&quot;&gt;&#10;                &lt;div class=&quot;feature-icon&quot;&gt;&lt;/div&gt;&#10;                &lt;h3&gt;Precios en Pesos&lt;/h3&gt;&#10;                &lt;p&gt;Sin fluctuaciones del dólar. Facturación local argentina.&lt;/p&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/section&gt;&#10;&#10;&lt;!-- Pricing --&gt;&#10;&lt;section class=&quot;pricing&quot; id=&quot;precios&quot;&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;h2&gt;Planes VPS Linux&lt;/h2&gt;&#10;        &lt;div class=&quot;pricing-grid&quot;&gt;&#10;            &lt;div class=&quot;pricing-card&quot;&gt;&#10;                &lt;div class=&quot;plan-name&quot;&gt;Mini&lt;/div&gt;&#10;                &lt;div class=&quot;plan-price&quot;&gt;$5000&lt;/div&gt;&#10;                &lt;div class=&quot;plan-period&quot;&gt;ARS / mes&lt;/div&gt;&#10;                &lt;ul class=&quot;plan-features&quot;&gt;&#10;                    &lt;li&gt;1 vCPU&lt;/li&gt;&#10;                    &lt;li&gt;250 MB RAM&lt;/li&gt;&#10;                    &lt;li&gt;5 GB SSD&lt;/li&gt;&#10;                    &lt;li&gt;1 IP Pública&lt;/li&gt;&#10;                    &lt;li&gt;Ubuntu/CentOS&lt;/li&gt;&#10;                    &lt;li&gt;Acceso SSH&lt;/li&gt;&#10;                &lt;/ul&gt;&#10;                &lt;a href=&quot;#&quot; class=&quot;cta-button&quot;&gt;Elegir Plan&lt;/a&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;pricing-card popular&quot;&gt;&#10;                &lt;div class=&quot;plan-name&quot;&gt;Estándar&lt;/div&gt;&#10;                &lt;div class=&quot;plan-price&quot;&gt;$15.000&lt;/div&gt;&#10;                &lt;div class=&quot;plan-period&quot;&gt;ARS / mes&lt;/div&gt;&#10;                &lt;ul class=&quot;plan-features&quot;&gt;&#10;                    &lt;li&gt;2 vCPU&lt;/li&gt;&#10;                    &lt;li&gt;2 GB RAM&lt;/li&gt;&#10;                    &lt;li&gt;50 GB SSD&lt;/li&gt;&#10;                    &lt;li&gt;1 IP Pública&lt;/li&gt;&#10;                    &lt;li&gt;Ubuntu/CentOS/Debian&lt;/li&gt;&#10;                    &lt;li&gt;Backup Semanal&lt;/li&gt;&#10;                &lt;/ul&gt;&#10;                &lt;a href=&quot;#&quot; class=&quot;cta-button&quot;&gt;Elegir Plan&lt;/a&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;pricing-card&quot;&gt;&#10;                &lt;div class=&quot;plan-name&quot;&gt;Profesional&lt;/div&gt;&#10;                &lt;div class=&quot;plan-price&quot;&gt;$25.000&lt;/div&gt;&#10;                &lt;div class=&quot;plan-period&quot;&gt;ARS / mes&lt;/div&gt;&#10;                &lt;ul class=&quot;plan-features&quot;&gt;&#10;                    &lt;li&gt;4 vCPU&lt;/li&gt;&#10;                    &lt;li&gt;4 GB RAM&lt;/li&gt;&#10;                    &lt;li&gt;80 GB SSD&lt;/li&gt;&#10;                    &lt;li&gt;1 IP Pública&lt;/li&gt;&#10;                    &lt;li&gt;Todas las distros&lt;/li&gt;&#10;                    &lt;li&gt;Backup Diario&lt;/li&gt;&#10;                &lt;/ul&gt;&#10;                &lt;a href=&quot;#&quot; class=&quot;cta-button&quot;&gt;Elegir Plan&lt;/a&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/section&gt;&#10;&#10;&lt;!-- Footer --&gt;&#10;&lt;footer id=&quot;contacto&quot;&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;div class=&quot;footer-content&quot;&gt;&#10;            &lt;div class=&quot;footer-section&quot;&gt;&#10;                &lt;h3&gt;Contacto&lt;/h3&gt;&#10;                &lt;a href=&quot;#&quot;&gt;WhatsApp: +54 9 11 XXXX-XXXX&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Email: soporte@XXXXX.com&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Buenos Aires, Argentina&lt;/a&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;footer-section&quot;&gt;&#10;                &lt;h3&gt;Servicios&lt;/h3&gt;&#10;                &lt;a href=&quot;#&quot;&gt;VPS Linux&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Migración Gratuita&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Soporte Técnico&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Backups&lt;/a&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;footer-section&quot;&gt;&#10;                &lt;h3&gt;Recursos&lt;/h3&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Documentación&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Tutoriales&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Estado del Servicio&lt;/a&gt;&#10;                &lt;a href=&quot;#&quot;&gt;Términos de Servicio&lt;/a&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;p&gt;&amp;copy; 2025 BitHosting. Todos los derechos reservados.&lt;/p&gt;&#10;    &lt;/div&gt;&#10;&lt;/footer&gt;&#10;&#10;&lt;!-- Debug Info --&gt;&#10;&lt;div class=&quot;debug-info&quot; id=&quot;debugInfo&quot;&gt;&#10;    URL: &lt;span id=&quot;currentUrl&quot;&gt;&lt;/span&gt;&lt;br&gt;&#10;    Status: &lt;span id=&quot;authStatus&quot;&gt;No logueado&lt;/span&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;script src=&quot;js/auth.js&quot;&gt;&lt;/script&gt;&#10;&lt;script src=&quot;js/carousel.js&quot;&gt;&lt;/script&gt;&#10;&lt;script src=&quot;js/main.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/js/auth.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/js/auth.js" />
              <option name="originalContent" value="// Variables globales para autenticación&#10;let currentUser = null;&#10;let googleInitialized = false;&#10;&#10;// Restore session from localStorage (same browser/IP context)&#10;(function restoreSession() {&#10;    try {&#10;        const stored = localStorage.getItem('bh_currentUser');&#10;        if (stored) {&#10;            currentUser = JSON.parse(stored);&#10;            console.log('Sesión restaurada para:', currentUser?.email || currentUser?.name);&#10;        }&#10;    } catch (e) {&#10;        console.warn('No se pudo restaurar sesión:', e);&#10;    }&#10;})();&#10;&#10;// Helper: wait until Google library is available&#10;async function waitForGoogle(timeoutMs = 10000) {&#10;    const start = Date.now();&#10;    while (Date.now() - start &lt; timeoutMs) {&#10;        if (typeof google !== 'undefined' &amp;&amp; google?.accounts?.id) return true;&#10;        await new Promise(r =&gt; setTimeout(r, 100));&#10;    }&#10;    return false;&#10;}&#10;&#10;// Inicializar Google Sign-In (resilient)&#10;async function initializeGoogleSignIn() {&#10;    console.log('Inicializando Google Sign-In...');&#10;&#10;    const ok = await waitForGoogle(10000);&#10;    if (!ok) {&#10;        console.error('Google Sign-In library not loaded aún');&#10;        const s = document.getElementById('authStatus');&#10;        if (s) s.textContent = 'Google no disponible';&#10;        return;&#10;    }&#10;&#10;    try {&#10;        google.accounts.id.initialize({&#10;            client_id: &quot;614144050505-a02n5fod2ofne58nt9i01tj5ok977eot.apps.googleusercontent.com&quot;,&#10;            callback: handleCredentialResponse,&#10;            auto_select: false,&#10;            cancel_on_tap_outside: true,&#10;            // Usar popup para ejecutar el callback en esta misma página&#10;            ux_mode: 'popup'&#10;            // login_uri eliminado para evitar modo redirect&#10;        });&#10;        googleInitialized = true;&#10;        console.log('Google Sign-In inicializado correctamente');&#10;        const s = document.getElementById('authStatus');&#10;        if (s) s.textContent = 'Google listo';&#10;    } catch (error) {&#10;        console.error('Error al inicializar Google Sign-In:', error);&#10;        const s = document.getElementById('authStatus');&#10;        if (s) s.textContent = 'Error: ' + error.message;&#10;    }&#10;}&#10;&#10;// Función de login (abre modal y delega render en showLoginModal para evitar duplicados)&#10;async function loginWithGoogle() {&#10;    console.log('Intentando login...');&#10;&#10;    // Abrir modal primero&#10;    showLoginModal();&#10;&#10;    // Asegurar inicialización en segundo plano; el render lo hace showLoginModal&#10;    if (!googleInitialized) {&#10;        try { await initializeGoogleSignIn(); } catch {}&#10;    }&#10;}&#10;&#10;// Manejar respuesta de Google&#10;function handleCredentialResponse(response) {&#10;    console.log('Respuesta de Google recibida');&#10;&#10;    (async () =&gt; {&#10;        try {&#10;            if (!response || !response.credential) {&#10;                throw new Error('No se recibió credencial de Google');&#10;            }&#10;&#10;            // 1) Intentar crear sesión en el servidor con la credencial cruda (más robusto)&#10;            try {&#10;                const res = await fetch('/api/gsicred', {&#10;                    method: 'POST',&#10;                    headers: { 'Content-Type': 'application/json' },&#10;                    body: JSON.stringify({ credential: response.credential })&#10;                });&#10;                if (res.ok) {&#10;                    const data = await res.json();&#10;                    if (data &amp;&amp; data.user) {&#10;                        currentUser = data.user;&#10;                        try { localStorage.setItem('bh_currentUser', JSON.stringify(currentUser)); } catch {}&#10;                        updateUserInterface();&#10;                        closeLoginModal();&#10;                        console.log('Usuario logueado vía servidor:', currentUser);&#10;                        // Redirect to control panel after successful login&#10;                        try { window.location.assign('/panel'); } catch {}&#10;                        return; // listo&#10;                    }&#10;                }&#10;            } catch (e) {&#10;                console.warn('Fallo creando sesión en servidor con credencial directa, usando fallback local:', e);&#10;            }&#10;&#10;            // 2) Fallback: decodificar en el cliente y luego guardar sesión en servidor&#10;            const userInfo = parseJwt(response.credential);&#10;            if (!userInfo) throw new Error('No se pudo decodificar el token');&#10;&#10;            currentUser = {&#10;                name: userInfo.name,&#10;                email: userInfo.email,&#10;                picture: userInfo.picture,&#10;                sub: userInfo.sub&#10;            };&#10;&#10;            const ok = await setServerSession(currentUser);&#10;            try { localStorage.setItem('bh_currentUser', JSON.stringify(currentUser)); } catch {}&#10;            if (!ok) {&#10;                const s = document.getElementById('authStatus');&#10;                if (s) s.textContent = 'Error guardando sesión en servidor';&#10;                try { window.showNotification?.('No se pudo guardar la sesión en el servidor', 'error'); } catch {}&#10;            }&#10;            console.log('Usuario logueado (fallback):', currentUser);&#10;            updateUserInterface();&#10;            closeLoginModal();&#10;            // Redirect to control panel after successful login&#10;            try { window.location.assign('/panel'); } catch {}&#10;&#10;        } catch (error) {&#10;            console.error('Error al procesar login:', error);&#10;            try { window.showNotification?.(error.message || 'Error al iniciar sesión', 'error'); } catch {}&#10;            const s = document.getElementById('authStatus');&#10;            if (s) s.textContent = 'Error de login';&#10;        }&#10;    })();&#10;}&#10;&#10;// Surface GIS errors from declarative button&#10;function onGoogleSignInError(err) {&#10;    console.error('Google Sign-In error:', err);&#10;    const msg = (err &amp;&amp; (err.error || err.type || err.message)) || 'Fallo de Google Sign-In';&#10;    const s = document.getElementById('authStatus');&#10;    if (s) s.textContent = 'Google Sign-In: ' + msg;&#10;    try { window.showNotification?.('Google Sign-In: ' + msg, 'error'); } catch {}&#10;}&#10;&#10;// Decodificar JWT token&#10;function parseJwt(token) {&#10;    try {&#10;        const base64Url = token.split('.')[1];&#10;        if (!base64Url) return null;&#10;        // Convertir base64url a base64 y agregar padding si es necesario&#10;        let base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');&#10;        const pad = base64.length % 4;&#10;        if (pad) base64 += '='.repeat(4 - pad);&#10;        const jsonPayload = decodeURIComponent(&#10;            atob(base64).split('').map(function(c) {&#10;                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);&#10;            }).join('')&#10;        );&#10;        return JSON.parse(jsonPayload);&#10;    } catch (error) {&#10;        console.error('Error al parsear JWT:', error);&#10;        return null;&#10;    }&#10;}&#10;&#10;&#10;// Mostrar modal de login&#10;function showLoginModal() {&#10;    const modal = document.getElementById('loginModal');&#10;    modal.classList.add('show');&#10;&#10;    const buttonContainer = document.getElementById('google-signin-button');&#10;    if (!buttonContainer) return;&#10;&#10;    // Show loading state&#10;    buttonContainer.innerHTML = '&lt;div style=&quot;color:#666&quot;&gt;Cargando botón de Google...&lt;/div&gt;';&#10;&#10;    const renderBtn = () =&gt; {&#10;        try {&#10;            buttonContainer.innerHTML = '';&#10;            google.accounts.id.renderButton(buttonContainer, {&#10;                theme: 'outline',&#10;                size: 'large',&#10;                width: 280,&#10;                text: 'signin_with',&#10;                shape: 'pill'&#10;            });&#10;            const fb = document.getElementById('google-signin-fallback');&#10;            if (fb) fb.style.display = 'none';&#10;            return true;&#10;        } catch (e) {&#10;            return false;&#10;        }&#10;    };&#10;&#10;    // Si ya está lista la librería, render inmediato (una sola vez)&#10;    if (typeof google !== 'undefined' &amp;&amp; google?.accounts?.id) {&#10;        if (!renderBtn()) {&#10;            buttonContainer.innerHTML = '&lt;p&gt;No se pudo cargar el botón de Google. Reintenta.&lt;/p&gt;';&#10;        }&#10;        return;&#10;    }&#10;&#10;    // Iniciar inicialización en segundo plano si no se hizo&#10;    (async () =&gt; {&#10;        try {&#10;            if (!googleInitialized) {&#10;                await initializeGoogleSignIn();&#10;            }&#10;        } catch {}&#10;    })();&#10;&#10;    // Reintentar hasta que la librería esté lista (máx ~10s)&#10;    let tries = 0;&#10;    const iv = setInterval(() =&gt; {&#10;        tries++;&#10;        if (typeof google !== 'undefined' &amp;&amp; google?.accounts?.id) {&#10;            clearInterval(iv);&#10;            if (!renderBtn()) {&#10;                buttonContainer.innerHTML = '&lt;p&gt;No se pudo cargar el botón de Google. Reintenta.&lt;/p&gt;';&#10;            }&#10;        } else if (tries &gt; 50) { // ~10s total&#10;            clearInterval(iv);&#10;            buttonContainer.innerHTML = '&lt;p&gt;Google no disponible. Reintenta en unos segundos.&lt;/p&gt;';&#10;            const fb = document.getElementById('google-signin-fallback');&#10;            if (fb) fb.style.display = '';&#10;        }&#10;    }, 200);&#10;}&#10;&#10;// Cerrar modal&#10;function closeLoginModal() {&#10;    const modal = document.getElementById('loginModal');&#10;    modal.classList.remove('show');&#10;}&#10;&#10;// Util: generar avatar como data URL (SVG) con la inicial del usuario&#10;function makeAvatarDataUrl(initial = 'U') {&#10;    const ch = encodeURIComponent((initial || 'U').toUpperCase());&#10;    const svg = `&lt;svg xmlns='http://www.w3.org/2000/svg' width='40' height='40'&gt;&#10;      &lt;defs&gt;&#10;        &lt;linearGradient id='g' x1='0' y1='0' x2='1' y2='1'&gt;&#10;          &lt;stop offset='0%' stop-color='#00d4ff'/&gt;&#10;          &lt;stop offset='100%' stop-color='#00b8e6'/&gt;&#10;        &lt;/linearGradient&gt;&#10;      &lt;/defs&gt;&#10;      &lt;rect rx='20' ry='20' width='40' height='40' fill='url(#g)'/&gt;&#10;      &lt;text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Segoe UI, Roboto, sans-serif' font-size='20' fill='#001018'&gt;${ch}&lt;/text&gt;&#10;    &lt;/svg&gt;`;&#10;    return 'data:image/svg+xml;utf8,' + svg;&#10;}&#10;&#10;// Actualizar interfaz de usuario&#10;function updateUserInterface() {&#10;    const loginBtn = document.getElementById('loginBtn');&#10;    const userProfile = document.getElementById('userProfile');&#10;    const userName = document.getElementById('userName');&#10;    const userAvatar = document.getElementById('userAvatar');&#10;    const miCuentaLink = document.getElementById('miCuentaLink');&#10;    const authStatus = document.getElementById('authStatus');&#10;&#10;    if (currentUser) {&#10;        // Usuario logueado&#10;        if (loginBtn) loginBtn.style.display = 'none';&#10;        if (userProfile) userProfile.classList.add('active');&#10;        if (miCuentaLink) miCuentaLink.style.display = 'block';&#10;&#10;        if (userName) userName.textContent = currentUser.name || currentUser.email || 'Usuario';&#10;        if (userAvatar) {&#10;            const fallback = makeAvatarDataUrl(currentUser.name?.[0] || currentUser.email?.[0] || 'U');&#10;            userAvatar.referrerPolicy = 'no-referrer';&#10;            userAvatar.alt = currentUser.name || 'Usuario';&#10;            userAvatar.onerror = () =&gt; { userAvatar.onerror = null; userAvatar.src = fallback; };&#10;            userAvatar.src = currentUser.picture || fallback;&#10;        }&#10;&#10;        if (authStatus) authStatus.textContent = 'Logueado: ' + (currentUser.name || '');&#10;    } else {&#10;        // Usuario no logueado&#10;        if (loginBtn) loginBtn.style.display = 'block';&#10;        if (userProfile) userProfile.classList.remove('active');&#10;        if (miCuentaLink) miCuentaLink.style.display = 'none';&#10;&#10;        if (authStatus) authStatus.textContent = 'No logueado';&#10;    }&#10;}&#10;&#10;// Toggle dropdown&#10;function toggleDropdown() {&#10;    const dropdown = document.getElementById('dropdownMenu');&#10;    const profile = document.getElementById('userProfile');&#10;    if (!dropdown || !profile) return;&#10;    const willShow = !dropdown.classList.contains('show');&#10;    dropdown.classList.toggle('show', willShow);&#10;    profile.setAttribute('aria-expanded', String(willShow));&#10;}&#10;&#10;// Simple session API helpers&#10;async function getServerSession() {&#10;    try {&#10;        const res = await fetch('/api/session');&#10;        if (!res.ok) return null;&#10;        const data = await res.json();&#10;        return data?.user || null;&#10;    } catch { return null; }&#10;}&#10;async function setServerSession(user) {&#10;    try {&#10;        const res = await fetch('/api/session', {&#10;            method: 'POST',&#10;            headers: { 'Content-Type': 'application/json' },&#10;            body: JSON.stringify({ user })&#10;        });&#10;        if (!res.ok) throw new Error('HTTP ' + res.status);&#10;        return true;&#10;    } catch (e) {&#10;        console.error('No se pudo guardar la sesión en el servidor:', e);&#10;        return false;&#10;    }&#10;}&#10;async function clearServerSession() {&#10;    try {&#10;        const res = await fetch('/api/session', { method: 'DELETE' });&#10;        return !!res.ok;&#10;    } catch (e) {&#10;        console.warn('No se pudo limpiar la sesión del servidor:', e);&#10;        return false;&#10;    }&#10;}&#10;&#10;// On load, sync session from server (IP-based persistence)&#10;document.addEventListener('DOMContentLoaded', async () =&gt; {&#10;    const srvUser = await getServerSession();&#10;    if (srvUser) {&#10;        currentUser = srvUser;&#10;        try { updateUserInterface(); } catch {}&#10;    }&#10;    // Hook Panel de Control&#10;    const panelLink = document.getElementById('panelLink');&#10;    if (panelLink) {&#10;        panelLink.addEventListener('click', function(e) {&#10;            e.preventDefault();&#10;            // navegar a la página del panel del servidor&#10;            window.location.assign('/panel');&#10;        });&#10;    }&#10;});&#10;&#10;// Persistent VPS store in localStorage&#10;const VPS_STORE_KEY = 'bh_vpsByUser';&#10;function loadVpsStore() {&#10;    try { return JSON.parse(localStorage.getItem(VPS_STORE_KEY) || '{}'); } catch { return {}; }&#10;}&#10;function saveVpsStore(store) {&#10;    try { localStorage.setItem(VPS_STORE_KEY, JSON.stringify(store)); } catch {}&#10;}&#10;&#10;// Generate or get user's VPS list (persisted as JSON in localStorage)&#10;function getUserVps(user) {&#10;    if (!user) return [];&#10;    const key = user.email || user.sub || 'anon';&#10;    const store = loadVpsStore();&#10;    if (!store[key]) {&#10;        const base = (user.sub ? parseInt(user.sub.slice(-3), 10) : (user.email?.length || 7)) || 7;&#10;        const count = Math.max(2, (base % 4) + 2);&#10;        const regions = ['Buenos Aires', 'Córdoba', 'Mendoza', 'Rosario'];&#10;        const statuses = ['running', 'stopped', 'pending'];&#10;        store[key] = Array.from({ length: count }).map((_, i) =&gt; {&#10;            const disk = [20, 40, 80, 160][(base + i) % 4];&#10;            const used = Math.min(disk - 1, Math.max(2, (disk * ((base + i) % 70 + 20) / 100) | 0));&#10;            return {&#10;                id: 'vps-' + (base + i),&#10;                name: `VPS-${(base + i) % 9999}`,&#10;                region: regions[(base + i) % regions.length],&#10;                status: statuses[(base + i) % statuses.length],&#10;                cpu: ((base + i) % 4) + 1 + ' vCPU',&#10;                ram: [512, 1024, 2048, 4096][(base + i) % 4] + ' MB',&#10;                disk: disk + ' GB',&#10;                used: used + ' GB'&#10;            };&#10;        });&#10;        saveVpsStore(store);&#10;    }&#10;    return store[key];&#10;}&#10;&#10;// Export user's VPS JSON&#10;function exportUserVpsJson(user) {&#10;    const data = getUserVps(user);&#10;    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });&#10;    const url = URL.createObjectURL(blob);&#10;    const a = document.createElement('a');&#10;    a.href = url;&#10;    a.download = 'vps.json';&#10;    document.body.appendChild(a);&#10;    a.click();&#10;    a.remove();&#10;    URL.revokeObjectURL(url);&#10;}&#10;&#10;// Open control panel in a new tab with user's VPS list and sidebar&#10;function openControlPanel() {&#10;    if (!currentUser) {&#10;        alert('Inicia sesión para ver tu panel.');&#10;        return;&#10;    }&#10;    const w = window.open('', '_blank');&#10;    if (!w) return;&#10;    const style = `&#10;        :root{--bg:#0b0f14;--header:#0d1117;--panel:#0f141b;--border:#161b22;--text:#e6edf3;--muted:#9ca3af;--accent:#00d4ff;}&#10;        *{box-sizing:border-box}&#10;        body{margin:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text)}&#10;        header{background:var(--header);color:var(--text);padding:16px 20px;position:sticky;top:0;z-index:20;border-bottom:1px solid var(--border)}&#10;        .layout{display:flex;min-height:calc(100vh - 66px)}&#10;        .sidebar{width:240px;background:#0c1219;border-right:1px solid var(--border);padding:16px;position:sticky;top:66px;align-self:flex-start;height:calc(100vh - 66px)}&#10;        .sb-title{font-weight:700;margin-bottom:12px}&#10;        .sb-nav{display:flex;flex-direction:column;gap:6px}&#10;        .sb-link{color:var(--text);text-decoration:none;padding:10px 12px;border-radius:8px;display:flex;gap:8px;align-items:center}&#10;        .sb-link:hover{background:#0f1722}&#10;        .content{flex:1;padding:24px}&#10;        .container{max-width:1100px;margin:0 auto}&#10;        .summary{background:var(--panel);border:1px solid var(--border);border-radius:10px;padding:16px;margin-bottom:16px}&#10;        .bar{height:12px;background:#0e1621;border-radius:999px;overflow:hidden;border:1px solid var(--border)}&#10;        .bar &gt; span{display:block;height:100%;background:linear-gradient(90deg,#00d4ff,#00b8e6);width:0%}&#10;        .bar-label{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-top:8px}&#10;        .list{margin-top:16px}&#10;        .card{background:var(--panel);border:1px solid var(--border);border-radius:10px;padding:16px;margin-bottom:12px;display:flex;justify-content:space-between;gap:16px;align-items:flex-start}&#10;        .meta{display:flex;gap:10px;flex-wrap:wrap;color:var(--muted);font-size:12px}&#10;        .badge{background:#111827;border:1px solid #1f2937;color:#9ca3af;border-radius:999px;padding:4px 10px;font-size:12px}&#10;        .name{font-weight:600;margin-bottom:8px}&#10;        .vbar{height:8px;background:#0e1621;border-radius:999px;overflow:hidden;border:1px solid var(--border);margin-top:8px}&#10;        .vbar &gt; span{display:block;height:100%;background:linear-gradient(90deg,#22c55e,#16a34a)}&#10;        .actions{display:flex;gap:8px;align-items:center}&#10;        a.btn{background:var(--accent);color:#001018;text-decoration:none;border-radius:8px;padding:10px 14px;font-weight:600}&#10;        a.btn:hover{background:#00b8e6}&#10;        a.btn.secondary{background:#111827;color:var(--text);border:1px solid #1f2937}&#10;        a.btn.secondary:hover{background:#0f1722}&#10;        a.btn.del{background:#ef4444;color:#fff}&#10;        a.btn.del:hover{background:#dc2626}&#10;        .muted{color:var(--muted);font-size:12px}&#10;    `;&#10;    const html = `&lt;!doctype html&gt;&lt;html lang=&quot;es&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;&lt;title&gt;Panel - BitHosting&lt;/title&gt;&lt;style&gt;${style}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&#10;      &lt;header&gt;&lt;div class=&quot;container&quot;&gt;&lt;div style=&quot;display:flex;justify-content:space-between;align-items:center;gap:12px&quot;&gt;&lt;h1 style=&quot;margin:0;font-size:20px&quot;&gt;Panel de Control&lt;/h1&gt;&lt;div class=&quot;muted&quot;&gt;${currentUser.name} · ${currentUser.email}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/header&gt;&#10;      &lt;div class=&quot;layout&quot;&gt;&#10;        &lt;aside class=&quot;sidebar&quot;&gt;&#10;          &lt;div class=&quot;sb-title&quot;&gt;Navegación&lt;/div&gt;&#10;          &lt;nav class=&quot;sb-nav&quot;&gt;&#10;            &lt;a class=&quot;sb-link&quot; href=&quot;#&quot;&gt;Dashboard&lt;/a&gt;&#10;            &lt;a class=&quot;sb-link&quot; href=&quot;#&quot;&gt;Mis VPS&lt;/a&gt;&#10;            &lt;a class=&quot;sb-link&quot; href=&quot;#&quot;&gt;Facturación&lt;/a&gt;&#10;            &lt;a class=&quot;sb-link&quot; href=&quot;#&quot;&gt;Soporte&lt;/a&gt;&#10;          &lt;/nav&gt;&#10;        &lt;/aside&gt;&#10;        &lt;main class=&quot;content&quot;&gt;&#10;          &lt;div class=&quot;container&quot;&gt;&#10;            &lt;section class=&quot;summary&quot;&gt;&#10;              &lt;div style=&quot;display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:10px&quot;&gt;&#10;                &lt;div&gt;&lt;strong&gt;Uso total de almacenamiento&lt;/strong&gt;&lt;/div&gt;&#10;                &lt;div style=&quot;display:flex;gap:8px;flex-wrap:wrap&quot;&gt;&#10;                  &lt;a href=&quot;#&quot; id=&quot;createVps&quot; class=&quot;btn secondary&quot;&gt;Crear VPS (debug)&lt;/a&gt;&#10;                  &lt;a href=&quot;#&quot; id=&quot;exportJson&quot; class=&quot;btn&quot;&gt;Exportar JSON&lt;/a&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;              &lt;div class=&quot;bar&quot;&gt;&lt;span id=&quot;totalBarFill&quot;&gt;&lt;/span&gt;&lt;/div&gt;&#10;              &lt;div class=&quot;bar-label&quot; id=&quot;totalBarLabel&quot;&gt;Cargando...&lt;/div&gt;&#10;            &lt;/section&gt;&#10;            &lt;section class=&quot;list&quot; id=&quot;vpsList&quot;&gt;&#10;              &lt;div class=&quot;muted&quot;&gt;Cargando VPS...&lt;/div&gt;&#10;            &lt;/section&gt;&#10;          &lt;/div&gt;&#10;        &lt;/main&gt;&#10;      &lt;/div&gt;&#10;      &lt;script&gt;&#10;        async function loadVps() {&#10;          try {&#10;            const res = await fetch('/api/vps');&#10;            const list = await res.json();&#10;            const totalDisk = list.reduce((s,v)=&gt;s+parseInt((v.disk||'0')),0);&#10;            const totalUsed = list.reduce((s,v)=&gt;s+parseInt((v.used||'0')),0);&#10;            const pct = totalDisk? Math.round((totalUsed/totalDisk)*100):0;&#10;            document.getElementById('totalBarFill').style.width = pct + '%';&#10;            document.getElementById('totalBarLabel').textContent = totalUsed + ' / ' + totalDisk + ' GB usados ('+pct+'%)';&#10;            const cards = list.map(item=&gt;{&#10;              const total = parseInt(item.disk||'0');&#10;              const used = parseInt(item.used||'0');&#10;              const p = total? Math.min(100, Math.round((used/total)*100)) : 0;&#10;              return \`&#10;                &lt;div class=\&quot;card\&quot; data-id=\&quot;${item.id}\&quot;&gt;\n                  &lt;div style=\&quot;flex:1\&quot;&gt;\n                    &lt;div class=\&quot;name\&quot;&gt;${item.name} &lt;span class=\&quot;badge\&quot;&gt;${item.id}&lt;/span&gt;&lt;/div&gt;\n                    &lt;div class=\&quot;meta\&quot;&gt;\n                      &lt;span class=\&quot;badge\&quot;&gt;${item.cpu}&lt;/span&gt;\n                      &lt;span class=\&quot;badge\&quot;&gt;${item.ram}&lt;/span&gt;\n                      &lt;span class=\&quot;badge\&quot;&gt;${item.disk}&lt;/span&gt;\n                      &lt;span class=\&quot;badge\&quot;&gt;${item.region}&lt;/span&gt;\n                      &lt;span class=\&quot;badge\&quot;&gt;${item.status}&lt;/span&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\&quot;vbar\&quot;&gt;&lt;span style=\&quot;width:${p}%\&quot;&gt;&lt;/span&gt;&lt;/div&gt;\n                    &lt;div class=\&quot;bar-label\&quot;&gt;${used} / ${total} GB usados (${p}%)&lt;/div&gt;\n                  &lt;/div&gt;\n                  &lt;div class=\&quot;actions\&quot;&gt;\n                    &lt;a href=\&quot;#\&quot; class=\&quot;btn del\&quot;&gt;Eliminar&lt;/a&gt;\n                    &lt;a href=\&quot;#\&quot; class=\&quot;btn\&quot;&gt;Administrar&lt;/a&gt;\n                  &lt;/div&gt;\n                &lt;/div&gt;\`&#10;            }).join('');&#10;            document.getElementById('vpsList').innerHTML = cards || '&lt;div class=&quot;muted&quot;&gt;Sin VPS&lt;/div&gt;';&#10;          } catch (e) {&#10;            document.getElementById('vpsList').innerHTML = '&lt;div class=&quot;muted&quot;&gt;Error al cargar VPS&lt;/div&gt;';&#10;          }&#10;        }&#10;        async function createVps() {&#10;          try {&#10;            await fetch('/api/vps', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({}) });&#10;            await loadVps();&#10;          } catch {}&#10;        }&#10;        async function deleteVps(id) {&#10;          try {&#10;            await fetch('/api/vps/' + encodeURIComponent(id), { method: 'DELETE' });&#10;            await loadVps();&#10;          } catch {}&#10;        }&#10;        document.addEventListener('click', (e)=&gt;{&#10;          const createBtn = e.target.closest('#createVps');&#10;          if (createBtn) { e.preventDefault(); createVps(); return; }&#10;          const delBtn = e.target.closest('.btn.del');&#10;          if (delBtn) {&#10;            e.preventDefault();&#10;            const card = delBtn.closest('.card');&#10;            const id = card?.getAttribute('data-id');&#10;            if (id) deleteVps(id);&#10;          }&#10;          const exp = e.target.closest('#exportJson');&#10;          if (exp) {&#10;            e.preventDefault();&#10;            (async ()=&gt;{&#10;              try {&#10;                const res = await fetch('/api/vps');&#10;                const list = await res.json();&#10;                const url = URL.createObjectURL(new Blob([JSON.stringify(list,null,2)],{type:'application/json'}));&#10;                const a = document.createElement('a'); a.href = url; a.download = 'vps.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);&#10;              } catch {}&#10;            })();&#10;          }&#10;        });&#10;        loadVps();&#10;      &lt;/script&gt;&#10;    &lt;/body&gt;&lt;/html&gt;`;&#10;    w.document.open();&#10;    w.document.write(html);&#10;    w.document.close();&#10;    const dropdown = document.getElementById('dropdownMenu');&#10;    if (dropdown) dropdown.classList.remove('show');&#10;}&#10;&#10;// Logout&#10;function logout() {&#10;    console.log('Cerrando sesión...');&#10;    currentUser = null;&#10;    updateUserInterface();&#10;    clearServerSession();&#10;&#10;    // Clear local storage persisted user&#10;    try { localStorage.removeItem('bh_currentUser'); } catch {}&#10;&#10;    // Cerrar dropdown&#10;    const dd = document.getElementById('dropdownMenu');&#10;    const profile = document.getElementById('userProfile');&#10;    if (dd) dd.classList.remove('show');&#10;    if (profile) profile.setAttribute('aria-expanded', 'false');&#10;&#10;    // Opcional: revocar acceso de Google&#10;    if (googleInitialized) {&#10;        google.accounts.id.disableAutoSelect();&#10;    }&#10;}&#10;&#10;// Provide safe global stubs so inline handlers exist immediately&#10;window.loginWithGoogle = window.loginWithGoogle || function() {&#10;    try { document.getElementById('loginModal')?.classList.add('show'); } catch {}&#10;};&#10;window.closeLoginModal = window.closeLoginModal || function() {&#10;    try { document.getElementById('loginModal')?.classList.remove('show'); } catch {}&#10;};&#10;window.toggleDropdown = window.toggleDropdown || function() {&#10;    const dd = document.getElementById('dropdownMenu');&#10;    const profile = document.getElementById('userProfile');&#10;    const willShow = dd ? !dd.classList.contains('show') : false;&#10;    if (dd) dd.classList.toggle('show', willShow);&#10;    if (profile) profile.setAttribute('aria-expanded', String(willShow));&#10;};&#10;window.logout = window.logout || function() { console.warn('Logout not ready'); };&#10;&#10;// Expose functions to global scope for inline handlers&#10;window.initializeGoogleSignIn = initializeGoogleSignIn;&#10;window.updateUserInterface = updateUserInterface;&#10;window.openControlPanel = openControlPanel;&#10;// Ensure real implementations are exported for inline handlers&#10;window.loginWithGoogle = loginWithGoogle;&#10;window.closeLoginModal = closeLoginModal;&#10;window.toggleDropdown = toggleDropdown;&#10;window.logout = logout;&#10;&#10;// Ensure declarative callback is globally accessible&#10;window.handleCredentialResponse = handleCredentialResponse;&#10;window.onGoogleSignInError = onGoogleSignInError;&#10;" />
              <option name="updatedContent" value="// Variables globales para autenticación&#10;let currentUser = null;&#10;let googleInitialized = false;&#10;&#10;// Restore session from localStorage (same browser/IP context)&#10;(function restoreSession() {&#10;    try {&#10;        const stored = localStorage.getItem('bh_currentUser');&#10;        if (stored) {&#10;            currentUser = JSON.parse(stored);&#10;            console.log('Sesión restaurada para:', currentUser?.email || currentUser?.name);&#10;        }&#10;    } catch (e) {&#10;        console.warn('No se pudo restaurar sesión:', e);&#10;    }&#10;})();&#10;&#10;// Helper: wait until Google library is available&#10;async function waitForGoogle(timeoutMs = 10000) {&#10;    const start = Date.now();&#10;    while (Date.now() - start &lt; timeoutMs) {&#10;        if (typeof google !== 'undefined' &amp;&amp; google?.accounts?.id) return true;&#10;        await new Promise(r =&gt; setTimeout(r, 100));&#10;    }&#10;    return false;&#10;}&#10;&#10;// Inicializar Google Sign-In (resilient)&#10;async function initializeGoogleSignIn() {&#10;    console.log('Inicializando Google Sign-In...');&#10;&#10;    const ok = await waitForGoogle(10000);&#10;    if (!ok) {&#10;        console.error('Google Sign-In library not loaded aún');&#10;        const s = document.getElementById('authStatus');&#10;        if (s) s.textContent = 'Google no disponible';&#10;        return;&#10;    }&#10;&#10;    try {&#10;        google.accounts.id.initialize({&#10;            client_id: &quot;614144050505-a02n5fod2ofne58nt9i01tj5ok977eot.apps.googleusercontent.com&quot;,&#10;            callback: handleCredentialResponse,&#10;            auto_select: false,&#10;            cancel_on_tap_outside: true,&#10;            // Usar popup para ejecutar el callback en esta misma página&#10;            ux_mode: 'popup'&#10;            // login_uri eliminado para evitar modo redirect&#10;        });&#10;        googleInitialized = true;&#10;        console.log('Google Sign-In inicializado correctamente');&#10;        const s = document.getElementById('authStatus');&#10;        if (s) s.textContent = 'Google listo';&#10;    } catch (error) {&#10;        console.error('Error al inicializar Google Sign-In:', error);&#10;        const s = document.getElementById('authStatus');&#10;        if (s) s.textContent = 'Error: ' + error.message;&#10;    }&#10;}&#10;&#10;// Función de login (abre modal y delega render en showLoginModal para evitar duplicados)&#10;async function loginWithGoogle() {&#10;    console.log('Intentando login...');&#10;&#10;    // Abrir modal primero&#10;    showLoginModal();&#10;&#10;    // Asegurar inicialización en segundo plano; el render lo hace showLoginModal&#10;    if (!googleInitialized) {&#10;        try { await initializeGoogleSignIn(); } catch {}&#10;    }&#10;}&#10;&#10;// Manejar respuesta de Google&#10;function handleCredentialResponse(response) {&#10;    console.log('Respuesta de Google recibida');&#10;&#10;    (async () =&gt; {&#10;        try {&#10;            if (!response || !response.credential) {&#10;                throw new Error('No se recibió credencial de Google');&#10;            }&#10;&#10;            // 1) Intentar crear sesión en el servidor con la credencial cruda (más robusto)&#10;            try {&#10;                const res = await fetch('/api/gsicred', {&#10;                    method: 'POST',&#10;                    headers: { 'Content-Type': 'application/json' },&#10;                    body: JSON.stringify({ credential: response.credential })&#10;                });&#10;                if (res.ok) {&#10;                    const data = await res.json();&#10;                    if (data &amp;&amp; data.user) {&#10;                        currentUser = data.user;&#10;                        try { localStorage.setItem('bh_currentUser', JSON.stringify(currentUser)); } catch {}&#10;                        updateUserInterface();&#10;                        closeLoginModal();&#10;                        console.log('Usuario logueado vía servidor:', currentUser);&#10;                        // Redirect to control panel after successful login&#10;                        try { window.location.assign('/panel'); } catch {}&#10;                        return; // listo&#10;                    }&#10;                }&#10;            } catch (e) {&#10;                console.warn('Fallo creando sesión en servidor con credencial directa, usando fallback local:', e);&#10;            }&#10;&#10;            // 2) Fallback: decodificar en el cliente y luego guardar sesión en servidor&#10;            const userInfo = parseJwt(response.credential);&#10;            if (!userInfo) throw new Error('No se pudo decodificar el token');&#10;&#10;            currentUser = {&#10;                name: userInfo.name,&#10;                email: userInfo.email,&#10;                picture: userInfo.picture,&#10;                sub: userInfo.sub&#10;            };&#10;&#10;            const ok = await setServerSession(currentUser);&#10;            try { localStorage.setItem('bh_currentUser', JSON.stringify(currentUser)); } catch {}&#10;            if (!ok) {&#10;                const s = document.getElementById('authStatus');&#10;                if (s) s.textContent = 'Error guardando sesión en servidor';&#10;                try { window.showNotification?.('No se pudo guardar la sesión en el servidor', 'error'); } catch {}&#10;            }&#10;            console.log('Usuario logueado (fallback):', currentUser);&#10;            updateUserInterface();&#10;            closeLoginModal();&#10;            // Redirect to control panel after successful login&#10;            try { window.location.assign('/panel'); } catch {}&#10;&#10;        } catch (error) {&#10;            console.error('Error al procesar login:', error);&#10;            try { window.showNotification?.(error.message || 'Error al iniciar sesión', 'error'); } catch {}&#10;            const s = document.getElementById('authStatus');&#10;            if (s) s.textContent = 'Error de login';&#10;        }&#10;    })();&#10;}&#10;&#10;// Surface GIS errors from declarative button&#10;function onGoogleSignInError(err) {&#10;    console.error('Google Sign-In error:', err);&#10;    const msg = (err &amp;&amp; (err.error || err.type || err.message)) || 'Fallo de Google Sign-In';&#10;    const s = document.getElementById('authStatus');&#10;    if (s) s.textContent = 'Google Sign-In: ' + msg;&#10;    try { window.showNotification?.('Google Sign-In: ' + msg, 'error'); } catch {}&#10;}&#10;&#10;// Decodificar JWT token&#10;function parseJwt(token) {&#10;    try {&#10;        const base64Url = token.split('.')[1];&#10;        if (!base64Url) return null;&#10;        // Convertir base64url a base64 y agregar padding si es necesario&#10;        let base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');&#10;        const pad = base64.length % 4;&#10;        if (pad) base64 += '='.repeat(4 - pad);&#10;        const jsonPayload = decodeURIComponent(&#10;            atob(base64).split('').map(function(c) {&#10;                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);&#10;            }).join('')&#10;        );&#10;        return JSON.parse(jsonPayload);&#10;    } catch (error) {&#10;        console.error('Error al parsear JWT:', error);&#10;        return null;&#10;    }&#10;}&#10;&#10;&#10;// Mostrar modal de login&#10;function showLoginModal() {&#10;    const modal = document.getElementById('loginModal');&#10;    modal.classList.add('show');&#10;&#10;    const buttonContainer = document.getElementById('google-signin-button');&#10;    if (!buttonContainer) return;&#10;&#10;    // Show loading state&#10;    buttonContainer.innerHTML = '&lt;div style=&quot;color:#666&quot;&gt;Cargando botón de Google...&lt;/div&gt;';&#10;&#10;    const renderBtn = () =&gt; {&#10;        try {&#10;            buttonContainer.innerHTML = '';&#10;            google.accounts.id.renderButton(buttonContainer, {&#10;                theme: 'outline',&#10;                size: 'large',&#10;                width: 280,&#10;                text: 'signin_with',&#10;                shape: 'pill'&#10;            });&#10;            const fb = document.getElementById('google-signin-fallback');&#10;            if (fb) fb.style.display = 'none';&#10;            return true;&#10;        } catch (e) {&#10;            return false;&#10;        }&#10;    };&#10;&#10;    // Si ya está lista la librería, render inmediato (una sola vez)&#10;    if (typeof google !== 'undefined' &amp;&amp; google?.accounts?.id) {&#10;        if (!renderBtn()) {&#10;            buttonContainer.innerHTML = '&lt;p&gt;No se pudo cargar el botón de Google. Reintenta.&lt;/p&gt;';&#10;        }&#10;        return;&#10;    }&#10;&#10;    // Iniciar inicialización en segundo plano si no se hizo&#10;    (async () =&gt; {&#10;        try {&#10;            if (!googleInitialized) {&#10;                await initializeGoogleSignIn();&#10;            }&#10;        } catch {}&#10;    })();&#10;&#10;    // Reintentar hasta que la librería esté lista (máx ~10s)&#10;    let tries = 0;&#10;    const iv = setInterval(() =&gt; {&#10;        tries++;&#10;        if (typeof google !== 'undefined' &amp;&amp; google?.accounts?.id) {&#10;            clearInterval(iv);&#10;            if (!renderBtn()) {&#10;                buttonContainer.innerHTML = '&lt;p&gt;No se pudo cargar el botón de Google. Reintenta.&lt;/p&gt;';&#10;            }&#10;        } else if (tries &gt; 50) { // ~10s total&#10;            clearInterval(iv);&#10;            buttonContainer.innerHTML = '&lt;p&gt;Google no disponible. Reintenta en unos segundos.&lt;/p&gt;';&#10;            const fb = document.getElementById('google-signin-fallback');&#10;            if (fb) fb.style.display = '';&#10;        }&#10;    }, 200);&#10;}&#10;&#10;// Cerrar modal&#10;function closeLoginModal() {&#10;    const modal = document.getElementById('loginModal');&#10;    modal.classList.remove('show');&#10;}&#10;&#10;// Util: generar avatar como data URL (SVG) con la inicial del usuario&#10;function makeAvatarDataUrl(initial = 'U') {&#10;    const ch = encodeURIComponent((initial || 'U').toUpperCase());&#10;    const svg = `&lt;svg xmlns='http://www.w3.org/2000/svg' width='40' height='40'&gt;&#10;      &lt;defs&gt;&#10;        &lt;linearGradient id='g' x1='0' y1='0' x2='1' y2='1'&gt;&#10;          &lt;stop offset='0%' stop-color='#00d4ff'/&gt;&#10;          &lt;stop offset='100%' stop-color='#00b8e6'/&gt;&#10;        &lt;/linearGradient&gt;&#10;      &lt;/defs&gt;&#10;      &lt;rect rx='20' ry='20' width='40' height='40' fill='url(#g)'/&gt;&#10;      &lt;text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Segoe UI, Roboto, sans-serif' font-size='20' fill='#001018'&gt;${ch}&lt;/text&gt;&#10;    &lt;/svg&gt;`;&#10;    return 'data:image/svg+xml;utf8,' + svg;&#10;}&#10;&#10;// Actualizar interfaz de usuario&#10;function updateUserInterface() {&#10;    const loginBtn = document.getElementById('loginBtn');&#10;    const userProfile = document.getElementById('userProfile');&#10;    const userName = document.getElementById('userName');&#10;    const userAvatar = document.getElementById('userAvatar');&#10;    const miCuentaLink = document.getElementById('miCuentaLink');&#10;    const authStatus = document.getElementById('authStatus');&#10;&#10;    if (currentUser) {&#10;        // Usuario logueado&#10;        if (loginBtn) loginBtn.style.display = 'none';&#10;        if (userProfile) userProfile.classList.add('active');&#10;        if (miCuentaLink) miCuentaLink.style.display = 'block';&#10;&#10;        if (userName) userName.textContent = currentUser.name || currentUser.email || 'Usuario';&#10;        if (userAvatar) {&#10;            const fallback = makeAvatarDataUrl(currentUser.name?.[0] || currentUser.email?.[0] || 'U');&#10;            userAvatar.referrerPolicy = 'no-referrer';&#10;            userAvatar.alt = currentUser.name || 'Usuario';&#10;            userAvatar.onerror = () =&gt; { userAvatar.onerror = null; userAvatar.src = fallback; };&#10;            userAvatar.src = currentUser.picture || fallback;&#10;        }&#10;&#10;        if (authStatus) authStatus.textContent = 'Logueado: ' + (currentUser.name || '');&#10;    } else {&#10;        // Usuario no logueado&#10;        if (loginBtn) loginBtn.style.display = 'block';&#10;        if (userProfile) userProfile.classList.remove('active');&#10;        if (miCuentaLink) miCuentaLink.style.display = 'none';&#10;&#10;        if (authStatus) authStatus.textContent = 'No logueado';&#10;    }&#10;}&#10;&#10;// Toggle dropdown&#10;function toggleDropdown() {&#10;    const dropdown = document.getElementById('dropdownMenu');&#10;    const profile = document.getElementById('userProfile');&#10;    if (!dropdown || !profile) return;&#10;    const willShow = !dropdown.classList.contains('show');&#10;    dropdown.classList.toggle('show', willShow);&#10;    profile.setAttribute('aria-expanded', String(willShow));&#10;}&#10;&#10;// Simple session API helpers&#10;async function getServerSession() {&#10;    try {&#10;        const res = await fetch('/api/session');&#10;        if (!res.ok) return null;&#10;        const data = await res.json();&#10;        return data?.user || null;&#10;    } catch { return null; }&#10;}&#10;async function setServerSession(user) {&#10;    try {&#10;        const res = await fetch('/api/session', {&#10;            method: 'POST',&#10;            headers: { 'Content-Type': 'application/json' },&#10;            body: JSON.stringify({ user })&#10;        });&#10;        if (!res.ok) throw new Error('HTTP ' + res.status);&#10;        return true;&#10;    } catch (e) {&#10;        console.error('No se pudo guardar la sesión en el servidor:', e);&#10;        return false;&#10;    }&#10;}&#10;async function clearServerSession() {&#10;    try {&#10;        const res = await fetch('/api/session', { method: 'DELETE' });&#10;        return !!res.ok;&#10;    } catch (e) {&#10;        console.warn('No se pudo limpiar la sesión del servidor:', e);&#10;        return false;&#10;    }&#10;}&#10;&#10;// On load, sync session from server (IP-based persistence)&#10;document.addEventListener('DOMContentLoaded', async () =&gt; {&#10;    const srvUser = await getServerSession();&#10;    if (srvUser) {&#10;        currentUser = srvUser;&#10;        try { updateUserInterface(); } catch {}&#10;    }&#10;    // Hook Panel de Control&#10;    const panelLink = document.getElementById('panelLink');&#10;    if (panelLink) {&#10;        panelLink.addEventListener('click', async function(e) {&#10;            e.preventDefault();&#10;            // If not logged in, open login modal&#10;            if (!currentUser) {&#10;                try { showLoginModal(); } catch {}&#10;                return;&#10;            }&#10;            // Ensure server session exists before navigating&#10;            try {&#10;                const s = await getServerSession();&#10;                if (!s) { await setServerSession(currentUser); }&#10;            } catch {}&#10;            // Navigate to protected panel&#10;            window.location.assign('/panel');&#10;        });&#10;    }&#10;});&#10;&#10;// Persistent VPS store in localStorage&#10;const VPS_STORE_KEY = 'bh_vpsByUser';&#10;function loadVpsStore() {&#10;    try { return JSON.parse(localStorage.getItem(VPS_STORE_KEY) || '{}'); } catch { return {}; }&#10;}&#10;function saveVpsStore(store) {&#10;    try { localStorage.setItem(VPS_STORE_KEY, JSON.stringify(store)); } catch {}&#10;}&#10;&#10;// Generate or get user's VPS list (persisted as JSON in localStorage)&#10;function getUserVps(user) {&#10;    if (!user) return [];&#10;    const key = user.email || user.sub || 'anon';&#10;    const store = loadVpsStore();&#10;    if (!store[key]) {&#10;        const base = (user.sub ? parseInt(user.sub.slice(-3), 10) : (user.email?.length || 7)) || 7;&#10;        const count = Math.max(2, (base % 4) + 2);&#10;        const regions = ['Buenos Aires', 'Córdoba', 'Mendoza', 'Rosario'];&#10;        const statuses = ['running', 'stopped', 'pending'];&#10;        store[key] = Array.from({ length: count }).map((_, i) =&gt; {&#10;            const disk = [20, 40, 80, 160][(base + i) % 4];&#10;            const used = Math.min(disk - 1, Math.max(2, (disk * ((base + i) % 70 + 20) / 100) | 0));&#10;            return {&#10;                id: 'vps-' + (base + i),&#10;                name: `VPS-${(base + i) % 9999}`,&#10;                region: regions[(base + i) % regions.length],&#10;                status: statuses[(base + i) % statuses.length],&#10;                cpu: ((base + i) % 4) + 1 + ' vCPU',&#10;                ram: [512, 1024, 2048, 4096][(base + i) % 4] + ' MB',&#10;                disk: disk + ' GB',&#10;                used: used + ' GB'&#10;            };&#10;        });&#10;        saveVpsStore(store);&#10;    }&#10;    return store[key];&#10;}&#10;&#10;// Export user's VPS JSON&#10;function exportUserVpsJson(user) {&#10;    const data = getUserVps(user);&#10;    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });&#10;    const url = URL.createObjectURL(blob);&#10;    const a = document.createElement('a');&#10;    a.href = url;&#10;    a.download = 'vps.json';&#10;    document.body.appendChild(a);&#10;    a.click();&#10;    a.remove();&#10;    URL.revokeObjectURL(url);&#10;}&#10;&#10;// Open control panel in a new tab with user's VPS list and sidebar&#10;function openControlPanel() {&#10;    if (!currentUser) {&#10;        alert('Inicia sesión para ver tu panel.');&#10;        return;&#10;    }&#10;    const w = window.open('', '_blank');&#10;    if (!w) return;&#10;    const style = `&#10;        :root{--bg:#0b0f14;--header:#0d1117;--panel:#0f141b;--border:#161b22;--text:#e6edf3;--muted:#9ca3af;--accent:#00d4ff;}&#10;        *{box-sizing:border-box}&#10;        body{margin:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text)}&#10;        header{background:var(--header);color:var(--text);padding:16px 20px;position:sticky;top:0;z-index:20;border-bottom:1px solid var(--border)}&#10;        .layout{display:flex;min-height:calc(100vh - 66px)}&#10;        .sidebar{width:240px;background:#0c1219;border-right:1px solid var(--border);padding:16px;position:sticky;top:66px;align-self:flex-start;height:calc(100vh - 66px)}&#10;        .sb-title{font-weight:700;margin-bottom:12px}&#10;        .sb-nav{display:flex;flex-direction:column;gap:6px}&#10;        .sb-link{color:var(--text);text-decoration:none;padding:10px 12px;border-radius:8px;display:flex;gap:8px;align-items:center}&#10;        .sb-link:hover{background:#0f1722}&#10;        .content{flex:1;padding:24px}&#10;        .container{max-width:1100px;margin:0 auto}&#10;        .summary{background:var(--panel);border:1px solid var(--border);border-radius:10px;padding:16px;margin-bottom:16px}&#10;        .bar{height:12px;background:#0e1621;border-radius:999px;overflow:hidden;border:1px solid var(--border)}&#10;        .bar &gt; span{display:block;height:100%;background:linear-gradient(90deg,#00d4ff,#00b8e6);width:0%}&#10;        .bar-label{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-top:8px}&#10;        .list{margin-top:16px}&#10;        .card{background:var(--panel);border:1px solid var(--border);border-radius:10px;padding:16px;margin-bottom:12px;display:flex;justify-content:space-between;gap:16px;align-items:flex-start}&#10;        .meta{display:flex;gap:10px;flex-wrap:wrap;color:var(--muted);font-size:12px}&#10;        .badge{background:#111827;border:1px solid #1f2937;color:#9ca3af;border-radius:999px;padding:4px 10px;font-size:12px}&#10;        .name{font-weight:600;margin-bottom:8px}&#10;        .vbar{height:8px;background:#0e1621;border-radius:999px;overflow:hidden;border:1px solid var(--border);margin-top:8px}&#10;        .vbar &gt; span{display:block;height:100%;background:linear-gradient(90deg,#22c55e,#16a34a)}&#10;        .actions{display:flex;gap:8px;align-items:center}&#10;        a.btn{background:var(--accent);color:#001018;text-decoration:none;border-radius:8px;padding:10px 14px;font-weight:600}&#10;        a.btn:hover{background:#00b8e6}&#10;        a.btn.secondary{background:#111827;color:var(--text);border:1px solid #1f2937}&#10;        a.btn.secondary:hover{background:#0f1722}&#10;        a.btn.del{background:#ef4444;color:#fff}&#10;        a.btn.del:hover{background:#dc2626}&#10;        .muted{color:var(--muted);font-size:12px}&#10;    `;&#10;    const html = `&lt;!doctype html&gt;&lt;html lang=&quot;es&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;&lt;title&gt;Panel - BitHosting&lt;/title&gt;&lt;style&gt;${style}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&#10;      &lt;header&gt;&lt;div class=&quot;container&quot;&gt;&lt;div style=&quot;display:flex;justify-content:space-between;align-items:center;gap:12px&quot;&gt;&lt;h1 style=&quot;margin:0;font-size:20px&quot;&gt;Panel de Control&lt;/h1&gt;&lt;div class=&quot;muted&quot;&gt;${currentUser.name} · ${currentUser.email}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/header&gt;&#10;      &lt;div class=&quot;layout&quot;&gt;&#10;        &lt;aside class=&quot;sidebar&quot;&gt;&#10;          &lt;div class=&quot;sb-title&quot;&gt;Navegación&lt;/div&gt;&#10;          &lt;nav class=&quot;sb-nav&quot;&gt;&#10;            &lt;a class=&quot;sb-link&quot; href=&quot;#&quot;&gt;Dashboard&lt;/a&gt;&#10;            &lt;a class=&quot;sb-link&quot; href=&quot;#&quot;&gt;Mis VPS&lt;/a&gt;&#10;            &lt;a class=&quot;sb-link&quot; href=&quot;#&quot;&gt;Facturación&lt;/a&gt;&#10;            &lt;a class=&quot;sb-link&quot; href=&quot;#&quot;&gt;Soporte&lt;/a&gt;&#10;          &lt;/nav&gt;&#10;        &lt;/aside&gt;&#10;        &lt;main class=&quot;content&quot;&gt;&#10;          &lt;div class=&quot;container&quot;&gt;&#10;            &lt;section class=&quot;summary&quot;&gt;&#10;              &lt;div style=&quot;display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:10px&quot;&gt;&#10;                &lt;div&gt;&lt;strong&gt;Uso total de almacenamiento&lt;/strong&gt;&lt;/div&gt;&#10;                &lt;div style=&quot;display:flex;gap:8px;flex-wrap:wrap&quot;&gt;&#10;                  &lt;a href=&quot;#&quot; id=&quot;createVps&quot; class=&quot;btn secondary&quot;&gt;Crear VPS (debug)&lt;/a&gt;&#10;                  &lt;a href=&quot;#&quot; id=&quot;exportJson&quot; class=&quot;btn&quot;&gt;Exportar JSON&lt;/a&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;              &lt;div class=&quot;bar&quot;&gt;&lt;span id=&quot;totalBarFill&quot;&gt;&lt;/span&gt;&lt;/div&gt;&#10;              &lt;div class=&quot;bar-label&quot; id=&quot;totalBarLabel&quot;&gt;Cargando...&lt;/div&gt;&#10;            &lt;/section&gt;&#10;            &lt;section class=&quot;list&quot; id=&quot;vpsList&quot;&gt;&#10;              &lt;div class=&quot;muted&quot;&gt;Cargando VPS...&lt;/div&gt;&#10;            &lt;/section&gt;&#10;          &lt;/div&gt;&#10;        &lt;/main&gt;&#10;      &lt;/div&gt;&#10;      &lt;script&gt;&#10;        async function loadVps() {&#10;          try {&#10;            const res = await fetch('/api/vps');&#10;            const list = await res.json();&#10;            const totalDisk = list.reduce((s,v)=&gt;s+parseInt((v.disk||'0')),0);&#10;            const totalUsed = list.reduce((s,v)=&gt;s+parseInt((v.used||'0')),0);&#10;            const pct = totalDisk? Math.round((totalUsed/totalDisk)*100):0;&#10;            document.getElementById('totalBarFill').style.width = pct + '%';&#10;            document.getElementById('totalBarLabel').textContent = totalUsed + ' / ' + totalDisk + ' GB usados ('+pct+'%)';&#10;            const cards = list.map(item=&gt;{&#10;              const total = parseInt(item.disk||'0');&#10;              const used = parseInt(item.used||'0');&#10;              const p = total? Math.min(100, Math.round((used/total)*100)) : 0;&#10;              return \`&#10;                &lt;div class=\&quot;card\&quot; data-id=\&quot;${item.id}\&quot;&gt;\n                  &lt;div style=\&quot;flex:1\&quot;&gt;\n                    &lt;div class=\&quot;name\&quot;&gt;${item.name} &lt;span class=\&quot;badge\&quot;&gt;${item.id}&lt;/span&gt;&lt;/div&gt;\n                    &lt;div class=\&quot;meta\&quot;&gt;\n                      &lt;span class=\&quot;badge\&quot;&gt;${item.cpu}&lt;/span&gt;\n                      &lt;span class=\&quot;badge\&quot;&gt;${item.ram}&lt;/span&gt;\n                      &lt;span class=\&quot;badge\&quot;&gt;${item.disk}&lt;/span&gt;\n                      &lt;span class=\&quot;badge\&quot;&gt;${item.region}&lt;/span&gt;\n                      &lt;span class=\&quot;badge\&quot;&gt;${item.status}&lt;/span&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\&quot;vbar\&quot;&gt;&lt;span style=\&quot;width:${p}%\&quot;&gt;&lt;/span&gt;&lt;/div&gt;\n                    &lt;div class=\&quot;bar-label\&quot;&gt;${used} / ${total} GB usados (${p}%)&lt;/div&gt;\n                  &lt;/div&gt;\n                  &lt;div class=\&quot;actions\&quot;&gt;\n                    &lt;a href=\&quot;#\&quot; class=\&quot;btn del\&quot;&gt;Eliminar&lt;/a&gt;\n                    &lt;a href=\&quot;#\&quot; class=\&quot;btn\&quot;&gt;Administrar&lt;/a&gt;\n                  &lt;/div&gt;\n                &lt;/div&gt;\`&#10;            }).join('');&#10;            document.getElementById('vpsList').innerHTML = cards || '&lt;div class=&quot;muted&quot;&gt;Sin VPS&lt;/div&gt;';&#10;          } catch (e) {&#10;            document.getElementById('vpsList').innerHTML = '&lt;div class=&quot;muted&quot;&gt;Error al cargar VPS&lt;/div&gt;';&#10;          }&#10;        }&#10;        async function createVps() {&#10;          try {&#10;            await fetch('/api/vps', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({}) });&#10;            await loadVps();&#10;          } catch {}&#10;        }&#10;        async function deleteVps(id) {&#10;          try {&#10;            await fetch('/api/vps/' + encodeURIComponent(id), { method: 'DELETE' });&#10;            await loadVps();&#10;          } catch {}&#10;        }&#10;        document.addEventListener('click', (e)=&gt;{&#10;          const createBtn = e.target.closest('#createVps');&#10;          if (createBtn) { e.preventDefault(); createVps(); return; }&#10;          const delBtn = e.target.closest('.btn.del');&#10;          if (delBtn) {&#10;            e.preventDefault();&#10;            const card = delBtn.closest('.card');&#10;            const id = card?.getAttribute('data-id');&#10;            if (id) deleteVps(id);&#10;          }&#10;          const exp = e.target.closest('#exportJson');&#10;          if (exp) {&#10;            e.preventDefault();&#10;            (async ()=&gt;{&#10;              try {&#10;                const res = await fetch('/api/vps');&#10;                const list = await res.json();&#10;                const url = URL.createObjectURL(new Blob([JSON.stringify(list,null,2)],{type:'application/json'}));&#10;                const a = document.createElement('a'); a.href = url; a.download = 'vps.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);&#10;              } catch {}&#10;            })();&#10;          }&#10;        });&#10;        loadVps();&#10;      &lt;/script&gt;&#10;    &lt;/body&gt;&lt;/html&gt;`;&#10;    w.document.open();&#10;    w.document.write(html);&#10;    w.document.close();&#10;    const dropdown = document.getElementById('dropdownMenu');&#10;    if (dropdown) dropdown.classList.remove('show');&#10;}&#10;&#10;// Logout&#10;function logout() {&#10;    console.log('Cerrando sesión...');&#10;    currentUser = null;&#10;    updateUserInterface();&#10;    clearServerSession();&#10;&#10;    // Clear local storage persisted user&#10;    try { localStorage.removeItem('bh_currentUser'); } catch {}&#10;&#10;    // Cerrar dropdown&#10;    const dd = document.getElementById('dropdownMenu');&#10;    const profile = document.getElementById('userProfile');&#10;    if (dd) dd.classList.remove('show');&#10;    if (profile) profile.setAttribute('aria-expanded', 'false');&#10;&#10;    // Opcional: revocar acceso de Google&#10;    if (googleInitialized) {&#10;        google.accounts.id.disableAutoSelect();&#10;    }&#10;}&#10;&#10;// Provide safe global stubs so inline handlers exist immediately&#10;window.loginWithGoogle = window.loginWithGoogle || function() {&#10;    try { document.getElementById('loginModal')?.classList.add('show'); } catch {}&#10;};&#10;window.closeLoginModal = window.closeLoginModal || function() {&#10;    try { document.getElementById('loginModal')?.classList.remove('show'); } catch {}&#10;};&#10;window.toggleDropdown = window.toggleDropdown || function() {&#10;    const dd = document.getElementById('dropdownMenu');&#10;    const profile = document.getElementById('userProfile');&#10;    const willShow = dd ? !dd.classList.contains('show') : false;&#10;    if (dd) dd.classList.toggle('show', willShow);&#10;    if (profile) profile.setAttribute('aria-expanded', String(willShow));&#10;};&#10;window.logout = window.logout || function() { console.warn('Logout not ready'); };&#10;&#10;// Expose functions to global scope for inline handlers&#10;window.initializeGoogleSignIn = initializeGoogleSignIn;&#10;window.updateUserInterface = updateUserInterface;&#10;window.openControlPanel = openControlPanel;&#10;// Ensure real implementations are exported for inline handlers&#10;window.loginWithGoogle = loginWithGoogle;&#10;window.closeLoginModal = closeLoginModal;&#10;window.toggleDropdown = toggleDropdown;&#10;window.logout = logout;&#10;&#10;// Ensure declarative callback is globally accessible&#10;window.handleCredentialResponse = handleCredentialResponse;&#10;window.onGoogleSignInError = onGoogleSignInError;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/js/carousel.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/js/carousel.js" />
              <option name="originalContent" value="// Carousel functionality&#10;let currentSlideIndex = 0;&#10;const slides = document.querySelectorAll('.carousel-slide');&#10;const totalSlides = slides.length;&#10;const wrapper = document.getElementById('carouselWrapper');&#10;const dots = document.querySelectorAll('.carousel-dot');&#10;&#10;function updateCarousel() {&#10;    const translateX = -currentSlideIndex * 100;&#10;    wrapper.style.transform = `translateX(${translateX}%)`;&#10;" />
              <option name="updatedContent" value="// Carousel functionality&#10;let currentSlideIndex = 0;&#10;const slides = document.querySelectorAll('.carousel-slide');&#10;const totalSlides = slides.length;&#10;const wrapper = document.getElementById('carouselWrapper');&#10;const dots = document.querySelectorAll('.carousel-dot');&#10;&#10;function updateCarousel() {&#10;    const translateX = -currentSlideIndex * 100;&#10;    if (wrapper) {&#10;        wrapper.style.transform = `translateX(${translateX}%)`;&#10;    }&#10;&#10;    // Update dots&#10;    dots.forEach((dot, index) =&gt; {&#10;        dot.classList.toggle('active', index === currentSlideIndex);&#10;    });&#10;}&#10;&#10;function changeSlide(direction) {&#10;    currentSlideIndex += direction;&#10;&#10;    if (currentSlideIndex &gt;= totalSlides) {&#10;        currentSlideIndex = 0;&#10;    } else if (currentSlideIndex &lt; 0) {&#10;        currentSlideIndex = totalSlides - 1;&#10;    }&#10;&#10;    updateCarousel();&#10;}&#10;&#10;function currentSlide(slideIndex) {&#10;    currentSlideIndex = slideIndex - 1;&#10;    updateCarousel();&#10;}&#10;&#10;// Expose functions for inline handlers&#10;window.changeSlide = changeSlide;&#10;window.currentSlide = currentSlide;&#10;&#10;// Auto-advance carousel every 5 segundos&#10;function startCarouselAutoplay() {&#10;    setInterval(() =&gt; {&#10;        changeSlide(1);&#10;    }, 5000);&#10;}&#10;&#10;// Touch/swipe support for mobile&#10;function initCarouselTouchSupport() {&#10;    let startX = 0;&#10;    let endX = 0;&#10;&#10;    if (wrapper) {&#10;        wrapper.addEventListener('touchstart', (e) =&gt; {&#10;            startX = e.touches[0].clientX;&#10;        });&#10;&#10;        wrapper.addEventListener('touchend', (e) =&gt; {&#10;            endX = e.changedTouches[0].clientX;&#10;            const diffX = startX - endX;&#10;&#10;            if (Math.abs(diffX) &gt; 50) { // Minimum swipe distance&#10;                if (diffX &gt; 0) {&#10;                    changeSlide(1); // Swipe left - next slide&#10;                } else {&#10;                    changeSlide(-1); // Swipe right - previous slide&#10;                }&#10;            }&#10;        });&#10;    }&#10;}&#10;&#10;// Initialize carousel when DOM is loaded&#10;document.addEventListener('DOMContentLoaded', function() {&#10;    if (wrapper &amp;&amp; slides.length &gt; 0) {&#10;        startCarouselAutoplay();&#10;        initCarouselTouchSupport();&#10;    }&#10;});" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/js/main.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/js/main.js" />
              <option name="originalContent" value="// Debug: mostrar URL actual&#10;document.addEventListener('DOMContentLoaded', function() {&#10;    const currentUrlElement = document.getElementById('currentUrl');&#10;    if (currentUrlElement) {&#10;        currentUrlElement.textContent = window.location.href;&#10;    }&#10;});&#10;&#10;// Inicializar cuando carga la página (robusto)&#10;window.addEventListener('load', async () =&gt; {&#10;    console.log('Inicializando aplicación...');&#10;    try {&#10;        if (typeof window.initializeGoogleSignIn === 'function') {&#10;            await window.initializeGoogleSignIn();&#10;        }&#10;    } catch (e) {&#10;        console.warn('No se pudo inicializar Google aún:', e);&#10;    }&#10;    try {&#10;        if (typeof window.updateUserInterface === 'function') {&#10;            window.updateUserInterface();&#10;        }&#10;    } catch (e) {&#10;        console.warn('No se pudo actualizar UI:', e);&#10;    }&#10;});&#10;&#10;// Smooth scrolling para los enlaces del menú&#10;document.querySelectorAll('a[href^=&quot;#&quot;]').forEach(anchor =&gt; {&#10;    anchor.addEventListener('click', function (e) {&#10;        e.preventDefault();&#10;        const target = document.querySelector(this.getAttribute('href'));&#10;        if (target) {&#10;            target.scrollIntoView({&#10;                behavior: 'smooth',&#10;                block: 'start'&#10;            });&#10;        }&#10;    });&#10;});&#10;&#10;// Efecto hover en las tarjetas de pricing&#10;document.addEventListener('DOMContentLoaded', function() {&#10;    document.querySelectorAll('.pricing-card').forEach(card =&gt; {&#10;        card.addEventListener('mouseenter', function() {&#10;            this.style.boxShadow = '0 10px 30px rgba(0, 212, 255, 0.3)';&#10;        });&#10;&#10;        card.addEventListener('mouseleave', function() {&#10;            this.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';&#10;        });&#10;    });&#10;});&#10;&#10;// Cerrar dropdown al hacer click fuera&#10;document.addEventListener('click', function(event) {&#10;    const dropdown = document.getElementById('dropdownMenu');&#10;    const avatar = document.getElementById('userAvatar');&#10;&#10;    if (dropdown &amp;&amp; dropdown.classList.contains('show') &amp;&amp;&#10;        !dropdown.contains(event.target) &amp;&amp;&#10;        event.target !== avatar) {&#10;        dropdown.classList.remove('show');&#10;    }&#10;});&#10;&#10;// Cerrar modal al hacer click fuera&#10;document.addEventListener('DOMContentLoaded', function() {&#10;    const loginModal = document.getElementById('loginModal');&#10;    if (loginModal) {&#10;        loginModal.addEventListener('click', function(e) {&#10;            if (e.target === this) {&#10;                closeLoginModal();&#10;            }&#10;        });&#10;    }&#10;});&#10;&#10;// Cerrar modal con tecla Escape&#10;document.addEventListener('keydown', function(e) {&#10;    if (e.key === 'Escape') {&#10;        closeLoginModal();&#10;    }&#10;});&#10;&#10;// Función utilitaria para mostrar notificaciones (opcional)&#10;function showNotification(message, type = 'info') {&#10;    // Crear elemento de notificación&#10;    const notification = document.createElement('div');&#10;    notification.className = `notification notification-${type}`;&#10;    notification.textContent = message;&#10;    notification.style.cssText = `&#10;        position: fixed;&#10;        top: 20px;&#10;        right: 20px;&#10;        padding: 15px 20px;&#10;        background: ${type === 'error' ? '#dc3545' : '#00d4ff'};&#10;        color: white;&#10;        border-radius: 5px;&#10;        z-index: 10001;&#10;        transition: opacity 0.3s;&#10;    `;&#10;&#10;    document.body.appendChild(notification);&#10;&#10;    // Remover después de 3 segundos&#10;    setTimeout(() =&gt; {&#10;        notification.style.opacity = '0';&#10;        setTimeout(() =&gt; {&#10;            document.body.removeChild(notification);&#10;        }, 300);&#10;    }, 3000);&#10;}&#10;&#10;// Reveal-on-scroll animations (no blur)&#10;(() =&gt; {&#10;    const REVEAL_SECTIONS = ['.carousel-section', '.features', '.pricing'];&#10;    const STAGGER_CONTAINERS = ['.features-grid', '.pricing-grid'];&#10;&#10;    const io = new IntersectionObserver((entries) =&gt; {&#10;        entries.forEach(entry =&gt; {&#10;            const el = entry.target;&#10;            const isSection = el.classList.contains('features') || el.classList.contains('pricing') || el.classList.contains('carousel-section');&#10;            const isStagger = el.classList.contains('stagger');&#10;&#10;            if (entry.isIntersecting) {&#10;                if (isSection) el.classList.add('revealed');&#10;                if (isStagger) el.classList.add('in-view');&#10;            } else {&#10;                // Remove classes when leaving so they can animate again later&#10;                if (isSection) el.classList.remove('revealed');&#10;                if (isStagger) el.classList.remove('in-view');&#10;            }&#10;        });&#10;    }, { threshold: 0.15, rootMargin: '0px 0px -60px 0px' });&#10;&#10;    document.addEventListener('DOMContentLoaded', () =&gt; {&#10;        // Observe main sections&#10;        REVEAL_SECTIONS.forEach(sel =&gt; {&#10;            document.querySelectorAll(sel).forEach(el =&gt; io.observe(el));&#10;        });&#10;        // Add and observe stagger containers&#10;        STAGGER_CONTAINERS.forEach(sel =&gt; {&#10;            document.querySelectorAll(sel).forEach(el =&gt; {&#10;                el.classList.add('stagger');&#10;                io.observe(el);&#10;            });&#10;        });&#10;    });&#10;})();&#10;&#10;// Bind login button click to global loginWithGoogle&#10;document.addEventListener('DOMContentLoaded', function() {&#10;    const loginBtn = document.getElementById('loginBtn');&#10;    if (loginBtn) {&#10;        loginBtn.addEventListener('click', async () =&gt; {&#10;            if (typeof window.loginWithGoogle === 'function') {&#10;                try { await window.loginWithGoogle(); } catch (e) { console.warn('Login error:', e); }&#10;            } else {&#10;                // Fallback: open modal if function is not ready yet&#10;                try { document.getElementById('loginModal')?.classList.add('show'); } catch {}&#10;            }&#10;        });&#10;    }&#10;});&#10;});&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="// Debug: mostrar URL actual&#10;document.addEventListener('DOMContentLoaded', function() {&#10;    const currentUrlElement = document.getElementById('currentUrl');&#10;    if (currentUrlElement) {&#10;        currentUrlElement.textContent = window.location.href;&#10;    }&#10;});&#10;&#10;// Inicializar cuando carga la página (robusto)&#10;window.addEventListener('load', async () =&gt; {&#10;    console.log('Inicializando aplicación...');&#10;    try {&#10;        if (typeof window.initializeGoogleSignIn === 'function') {&#10;            await window.initializeGoogleSignIn();&#10;        }&#10;    } catch (e) {&#10;        console.warn('No se pudo inicializar Google aún:', e);&#10;    }&#10;    try {&#10;        if (typeof window.updateUserInterface === 'function') {&#10;            window.updateUserInterface();&#10;        }&#10;    } catch (e) {&#10;        console.warn('No se pudo actualizar UI:', e);&#10;    }&#10;});&#10;&#10;// Smooth scrolling para los enlaces del menú&#10;document.querySelectorAll('a[href^=&quot;#&quot;]').forEach(anchor =&gt; {&#10;    anchor.addEventListener('click', function (e) {&#10;        e.preventDefault();&#10;        const target = document.querySelector(this.getAttribute('href'));&#10;        if (target) {&#10;            target.scrollIntoView({&#10;                behavior: 'smooth',&#10;                block: 'start'&#10;            });&#10;        }&#10;    });&#10;});&#10;&#10;// Efecto hover en las tarjetas de pricing&#10;document.addEventListener('DOMContentLoaded', function() {&#10;    document.querySelectorAll('.pricing-card').forEach(card =&gt; {&#10;        card.addEventListener('mouseenter', function() {&#10;            this.style.boxShadow = '0 10px 30px rgba(0, 212, 255, 0.3)';&#10;        });&#10;&#10;        card.addEventListener('mouseleave', function() {&#10;            this.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';&#10;        });&#10;    });&#10;});&#10;&#10;// Cerrar dropdown al hacer click fuera&#10;document.addEventListener('click', function(event) {&#10;    const dropdown = document.getElementById('dropdownMenu');&#10;    const userProfile = document.getElementById('userProfile');&#10;&#10;    if (!dropdown || !userProfile) return;&#10;&#10;    const clickedInsideProfile = userProfile.contains(event.target);&#10;    const clickedInsideMenu = dropdown.contains(event.target);&#10;&#10;    if (dropdown.classList.contains('show') &amp;&amp; !clickedInsideProfile &amp;&amp; !clickedInsideMenu) {&#10;        dropdown.classList.remove('show');&#10;        userProfile.setAttribute('aria-expanded', 'false');&#10;    }&#10;});&#10;&#10;// Cerrar modal al hacer click fuera&#10;document.addEventListener('DOMContentLoaded', function() {&#10;    const loginModal = document.getElementById('loginModal');&#10;    if (loginModal) {&#10;        loginModal.addEventListener('click', function(e) {&#10;            if (e.target === this) {&#10;                closeLoginModal();&#10;            }&#10;        });&#10;    }&#10;});&#10;&#10;// Cerrar modal con tecla Escape&#10;document.addEventListener('keydown', function(e) {&#10;    if (e.key === 'Escape') {&#10;        closeLoginModal();&#10;    }&#10;});&#10;&#10;// Función utilitaria para mostrar notificaciones (opcional)&#10;function showNotification(message, type = 'info') {&#10;    // Crear elemento de notificación&#10;    const notification = document.createElement('div');&#10;    notification.className = `notification notification-${type}`;&#10;    notification.textContent = message;&#10;    notification.style.cssText = `&#10;        position: fixed;&#10;        top: 20px;&#10;        right: 20px;&#10;        padding: 15px 20px;&#10;        background: ${type === 'error' ? '#dc3545' : '#00d4ff'};&#10;        color: white;&#10;        border-radius: 5px;&#10;        z-index: 10001;&#10;        transition: opacity 0.3s;&#10;    `;&#10;&#10;    document.body.appendChild(notification);&#10;&#10;    // Remover después de 3 segundos&#10;    setTimeout(() =&gt; {&#10;        notification.style.opacity = '0';&#10;        setTimeout(() =&gt; {&#10;            document.body.removeChild(notification);&#10;        }, 300);&#10;    }, 3000);&#10;}&#10;&#10;// Reveal-on-scroll animations (no blur)&#10;(() =&gt; {&#10;    const REVEAL_SECTIONS = ['.carousel-section', '.features', '.pricing'];&#10;    const STAGGER_CONTAINERS = ['.features-grid', '.pricing-grid'];&#10;&#10;    const io = new IntersectionObserver((entries) =&gt; {&#10;        entries.forEach(entry =&gt; {&#10;            const el = entry.target;&#10;            const isSection = el.classList.contains('features') || el.classList.contains('pricing') || el.classList.contains('carousel-section');&#10;            const isStagger = el.classList.contains('stagger');&#10;&#10;            if (entry.isIntersecting) {&#10;                if (isSection) el.classList.add('revealed');&#10;                if (isStagger) el.classList.add('in-view');&#10;            } else {&#10;                // Remove classes when leaving so they can animate again later&#10;                if (isSection) el.classList.remove('revealed');&#10;                if (isStagger) el.classList.remove('in-view');&#10;            }&#10;        });&#10;    }, { threshold: 0.15, rootMargin: '0px 0px -60px 0px' });&#10;&#10;    document.addEventListener('DOMContentLoaded', () =&gt; {&#10;        // Observe main sections&#10;        REVEAL_SECTIONS.forEach(sel =&gt; {&#10;            document.querySelectorAll(sel).forEach(el =&gt; io.observe(el));&#10;        });&#10;        // Add and observe stagger containers&#10;        STAGGER_CONTAINERS.forEach(sel =&gt; {&#10;            document.querySelectorAll(sel).forEach(el =&gt; {&#10;                el.classList.add('stagger');&#10;                io.observe(el);&#10;            });&#10;        });&#10;    });&#10;})();&#10;&#10;// Bind login button click to global loginWithGoogle&#10;document.addEventListener('DOMContentLoaded', function() {&#10;    const loginBtn = document.getElementById('loginBtn');&#10;    if (loginBtn) {&#10;        loginBtn.addEventListener('click', async () =&gt; {&#10;            if (typeof window.loginWithGoogle === 'function') {&#10;                try { await window.loginWithGoogle(); } catch (e) { console.warn('Login error:', e); }&#10;            } else {&#10;                // Fallback: open modal if function is not ready yet&#10;                try { document.getElementById('loginModal')?.classList.add('show'); } catch {}&#10;            }&#10;        });&#10;    }&#10;&#10;    // Toggle dropdown al clickear todo el recuadro de perfil&#10;    const userProfile = document.getElementById('userProfile');&#10;    if (userProfile) {&#10;        userProfile.addEventListener('click', (e) =&gt; {&#10;            // Evita que clics en enlaces internos (como logout) abran/cieran sin querer&#10;            const isInteractive = e.target.closest('a, button, .dropdown-item');&#10;            if (isInteractive &amp;&amp; !e.target.closest('#dropdownMenu')) return;&#10;            if (typeof window.toggleDropdown === 'function') window.toggleDropdown();&#10;        });&#10;        // Accesible con teclado&#10;        userProfile.addEventListener('keydown', (e) =&gt; {&#10;            if (e.key === 'Enter' || e.key === ' ') {&#10;                e.preventDefault();&#10;                if (typeof window.toggleDropdown === 'function') window.toggleDropdown();&#10;            }&#10;        });&#10;    }&#10;&#10;    // Logout desde el menú&#10;    const logoutBtn = document.getElementById('logoutBtn');&#10;    if (logoutBtn) {&#10;        logoutBtn.addEventListener('click', () =&gt; {&#10;            if (typeof window.logout === 'function') window.logout();&#10;        });&#10;    }&#10;&#10;    // Cerrar modal con la X&#10;    const closeLoginBtn = document.getElementById('closeLoginBtn');&#10;    if (closeLoginBtn) {&#10;        closeLoginBtn.addEventListener('click', () =&gt; {&#10;            if (typeof window.closeLoginModal === 'function') window.closeLoginModal();&#10;        });&#10;    }&#10;&#10;    // Logo click: go home or scroll to top if already on home&#10;    const siteLogo = document.getElementById('siteLogo');&#10;    if (siteLogo) {&#10;        siteLogo.addEventListener('click', function(e) {&#10;            const onHome = location.pathname === '/' || /\/index\.html$/i.test(location.pathname);&#10;            if (onHome) {&#10;                e.preventDefault();&#10;                window.scrollTo({ top: 0, behavior: 'smooth' });&#10;            }&#10;        });&#10;    }&#10;});" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/js/panel.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/js/panel.js" />
              <option name="originalContent" value="// Panel page JS (modularized)&#10;&#10;// Sync CSS var --ph with actual header height to avoid overlap&#10;(function(){&#10;  function setHeaderVar(){&#10;    const h = document.querySelector('header.sticky');&#10;    if(!h) return;&#10;    const ph = h.offsetHeight || 72;&#10;    document.documentElement.style.setProperty('--ph', ph + 'px');&#10;  }&#10;  window.addEventListener('load', setHeaderVar);&#10;  window.addEventListener('resize', setHeaderVar);&#10;})();&#10;&#10;// Sidebar state and handle&#10;(function(){&#10;  const KEY='bh_sb_collapsed';&#10;  try{ if(localStorage.getItem(KEY)==='1'){ document.body.classList.add('sb-collapsed'); } }catch(e){}&#10;  const handle=document.getElementById('sbHandle');&#10;  const updateAria=()=&gt;{ handle?.setAttribute('aria-expanded', String(!document.body.classList.contains('sb-collapsed'))); };&#10;  updateAria();&#10;  handle?.addEventListener('click',()=&gt;{&#10;    document.body.classList.toggle('sb-collapsed');&#10;    updateAria();&#10;    try{ localStorage.setItem(KEY, document.body.classList.contains('sb-collapsed') ? '1' : '0'); }catch(e){}&#10;  });&#10;})();&#10;&#10;async function loadUser(){&#10;  try{&#10;    const res = await fetch('/api/session');&#10;    const data = await res.json();&#10;    const user = data &amp;&amp; data.user;&#10;    const el = document.getElementById('userInfo');&#10;    if(!user){&#10;      // If somehow reached here without a session, bounce to home&#10;      location.replace('/');&#10;      return;&#10;    }&#10;    if(el){ el.textContent = (user.name||user.email||'Usuario'); }&#10;  }catch(e){&#10;    location.replace('/');&#10;  }&#10;}&#10;&#10;async function loadVps(){&#10;  try{&#10;    const res = await fetch('/api/vps');&#10;    if(!res.ok){ if(res.status===401) return location.replace('/'); throw new Error('HTTP '+res.status); }&#10;    const list = await res.json();&#10;    const totalDisk = list.reduce((s,v)=&gt;s+parseInt((v.disk||'0')),0);&#10;    const totalUsed = list.reduce((s,v)=&gt;s+parseInt((v.used||'0')),0);&#10;    const pct = totalDisk? Math.round((totalUsed/totalDisk)*100):0;&#10;    const fill = document.getElementById('totalBarFill');&#10;    if (fill) fill.style.width = pct + '%';&#10;    const label = document.getElementById('totalBarLabel');&#10;    if (label) label.textContent = `${totalUsed} / ${totalDisk} GB usados (${pct}%)`;&#10;    const cards = list.map(item=&gt;{&#10;      const total = parseInt(item.disk||'0');&#10;      const used = parseInt(item.used||'0');&#10;      const p = total? Math.min(100, Math.round((used/total)*100)) : 0;&#10;      return `&#10;        &lt;div class=&quot;card&quot; data-id=&quot;${item.id}&quot;&gt;&#10;          &lt;div style=&quot;flex:1&quot;&gt;&#10;            &lt;div class=&quot;name&quot;&gt;${item.name} &lt;span class=&quot;badge&quot;&gt;${item.id}&lt;/span&gt;&lt;/div&gt;&#10;            &lt;div class=&quot;meta&quot;&gt;&#10;              &lt;span class=&quot;badge&quot;&gt;${item.cpu}&lt;/span&gt;&#10;              &lt;span class=&quot;badge&quot;&gt;${item.ram}&lt;/span&gt;&#10;              &lt;span class=&quot;badge&quot;&gt;${item.disk}&lt;/span&gt;&#10;              &lt;span class=&quot;badge&quot;&gt;${item.region}&lt;/span&gt;&#10;              &lt;span class=&quot;badge&quot;&gt;${item.status}&lt;/span&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;bar&quot;&gt;&lt;span style=&quot;width:${p}%&quot;&gt;&lt;/span&gt;&lt;/div&gt;&#10;            &lt;div class=&quot;meta&quot;&gt;${used} / ${total} GB usados (${p}%)&lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &lt;div class=&quot;actions&quot;&gt;&#10;            &lt;a href=&quot;#&quot; class=&quot;btn del&quot;&gt;Eliminar&lt;/a&gt;&#10;            &lt;a href=&quot;#&quot; class=&quot;btn&quot;&gt;Administrar&lt;/a&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;`&#10;    }).join('');&#10;    const listEl = document.getElementById('vpsList');&#10;    if (listEl) listEl.innerHTML = cards || '&lt;div class=&quot;muted&quot;&gt;Sin VPS&lt;/div&gt;';&#10;  }catch(e){&#10;    const listEl = document.getElementById('vpsList');&#10;    if (listEl) listEl.innerHTML = '&lt;div class=&quot;muted&quot;&gt;Error al cargar VPS&lt;/div&gt;';&#10;  }&#10;}&#10;&#10;async function createVps(){&#10;  try{ await fetch('/api/vps', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({}) }); await loadVps(); }catch(e){}&#10;}&#10;async function deleteVps(id){&#10;  try{ await fetch('/api/vps/' + encodeURIComponent(id), { method: 'DELETE' }); await loadVps(); }catch(e){}&#10;}&#10;&#10;// Event delegation for buttons&#10;document.addEventListener('click', (e)=&gt;{&#10;  const createBtn = e.target.closest('#createVps');&#10;  if(createBtn){ e.preventDefault(); createVps(); return; }&#10;  const delBtn = e.target.closest('.btn.del');&#10;  if(delBtn){ e.preventDefault(); const card = delBtn.closest('.card'); const id = card &amp;&amp; card.getAttribute('data-id'); if(id) deleteVps(id); }&#10;  const exp = e.target.closest('#exportJson');&#10;  if(exp){&#10;    e.preventDefault();&#10;    (async ()=&gt;{&#10;      try{&#10;        const res = await fetch('/api/vps');&#10;        const list = await res.json();&#10;        const url = URL.createObjectURL(new Blob([JSON.stringify(list,null,2)],{type:'application/json'}));&#10;        const a = document.createElement('a'); a.href = url; a.download = 'vps.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);&#10;      }catch(e){}&#10;    })();&#10;  }&#10;});&#10;&#10;// === Proxmox CT (LXC) creation ===&#10;(function(){&#10;  let wired = false;&#10;  function qs(id){ return document.getElementById(id); }&#10;  function show(el){ el &amp;&amp; el.classList.add('show'); }&#10;  function hide(el){ el &amp;&amp; el.classList.remove('show'); }&#10;  function setStatus(msg){ const s = qs('ctStatus'); if (s) s.textContent = msg || ''; }&#10;  async function loadTemplates(){&#10;    const sel = qs('ctTemplate'); if (!sel) return;&#10;    sel.innerHTML = '&lt;option&gt;Cargando templates...&lt;/option&gt;';&#10;    try{&#10;      const r = await fetch('/api/proxmox/templates');&#10;      if (r.status === 501){ sel.innerHTML=''; setStatus('Proxmox no configurado en el servidor'); return; }&#10;      const data = await r.json();&#10;      const list = (data &amp;&amp; data.templates) || [];&#10;      if (!list.length){ sel.innerHTML=''; setStatus('No hay templates disponibles'); return; }&#10;      sel.innerHTML = '';&#10;      list.forEach(v =&gt; {&#10;        const opt = document.createElement('option');&#10;        opt.value = v; opt.textContent = v; sel.appendChild(opt);&#10;      });&#10;    }catch(e){ sel.innerHTML=''; setStatus('Error cargando templates'); }&#10;  }&#10;  function openCtModal(){&#10;    const m = qs('ctModal'); if (!m) return;&#10;    // reset form&#10;    qs('ctForm')?.reset();&#10;    setStatus('');&#10;    show(m);&#10;    loadTemplates();&#10;  }&#10;  function closeCtModal(){ hide(qs('ctModal')); }&#10;  async function submitCt(e){&#10;    e.preventDefault();&#10;    const btn = qs('ctSubmitBtn');&#10;    const form = qs('ctForm');&#10;    if (!form) return;&#10;    const payload = {&#10;      hostname: qs('ctHostname')?.value?.trim(),&#10;      password: qs('ctPassword')?.value || '',&#10;      template: qs('ctTemplate')?.value || '',&#10;      cores: Number(qs('ctCores')?.value || 1),&#10;      memory: Number(qs('ctMemory')?.value || 1024),&#10;      rootfs: Number(qs('ctDisk')?.value || 8),&#10;      swap: Number(qs('ctSwap')?.value || 512),&#10;      netBridge: qs('ctBridge')?.value || 'vmbr0',&#10;      start: qs('ctStart')?.checked ? 1 : 0&#10;    };&#10;    if (!payload.hostname || !payload.password){ setStatus('Completa hostname y password'); return; }&#10;    try{&#10;      btn &amp;&amp; (btn.disabled = true); setStatus('Creando contenedor...');&#10;      const r = await fetch('/api/proxmox/ct', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });&#10;      if (r.status === 401){ setStatus('No autenticado'); btn &amp;&amp; (btn.disabled=false); return; }&#10;      if (r.status === 501){ setStatus('Proxmox no configurado en el servidor'); btn &amp;&amp; (btn.disabled=false); return; }&#10;      if (!r.ok){ const t = await r.json().catch(()=&gt;({})); setStatus('Error: '+(t.error||r.status)); btn &amp;&amp; (btn.disabled=false); return; }&#10;      const { upid, vmid } = await r.json();&#10;      setStatus(`Tarea iniciada (VMID ${vmid}). Esperando finalización...`);&#10;      // poll status&#10;      await pollTask(upid);&#10;      setStatus('Contenedor creado exitosamente');&#10;      setTimeout(()=&gt;{ closeCtModal(); }, 1200);&#10;    }catch(err){ setStatus('Error creando contenedor'); }&#10;    finally{ btn &amp;&amp; (btn.disabled = false); }&#10;  }&#10;  async function pollTask(upid){&#10;    let attempts = 0;&#10;    while (attempts &lt; 120){ // ~4 minutos&#10;      attempts++;&#10;      try{&#10;        const r = await fetch(`/api/proxmox/ct/${encodeURIComponent(upid)}/status`);&#10;        const data = await r.json();&#10;        // data typically: { status: 'running'|'stopped', exitstatus: 'OK'|'ERROR' }&#10;        if (data.status){ setStatus(`Estado: ${data.status}${data.exitstatus? ' · '+data.exitstatus: ''}`); }&#10;        if (data.status === 'stopped'){&#10;          if (String(data.exitstatus||'').toUpperCase().includes('OK')) return true;&#10;          // ended but not OK&#10;          throw new Error(data.exitstatus || 'Tarea detenida');&#10;        }&#10;      }catch(e){ setStatus('Error consultando estado'); throw e; }&#10;      await new Promise(r =&gt; setTimeout(r, 2000));&#10;    }&#10;    throw new Error('Timeout esperando tarea');&#10;  }&#10;  function wire(){&#10;    if (wired) return; wired = true;&#10;    document.addEventListener('click', (e)=&gt;{&#10;      const openBtn = e.target.closest('#createCtBtn');&#10;      if (openBtn){ e.preventDefault(); openCtModal(); return; }&#10;      const closeBtn = e.target.closest('#ctCloseBtn, #ctCancelBtn');&#10;      if (closeBtn){ e.preventDefault(); closeCtModal(); return; }&#10;    });&#10;    qs('ctForm')?.addEventListener('submit', submitCt);&#10;  }&#10;  document.addEventListener('DOMContentLoaded', wire);&#10;})();&#10;&#10;// Init&#10;loadUser();&#10;loadVps();&#10;" />
              <option name="updatedContent" value="// Panel page JS (modularized)&#10;&#10;// Sync CSS var --ph with actual header height to avoid overlap&#10;(function(){&#10;  function setHeaderVar(){&#10;    const h = document.querySelector('header.sticky');&#10;    if(!h) return;&#10;    const ph = h.offsetHeight || 72;&#10;    document.documentElement.style.setProperty('--ph', ph + 'px');&#10;  }&#10;  window.addEventListener('load', setHeaderVar);&#10;  window.addEventListener('resize', setHeaderVar);&#10;})();&#10;&#10;// Sidebar state and handle&#10;(function(){&#10;  const KEY='bh_sb_collapsed';&#10;  try{ if(localStorage.getItem(KEY)==='1'){ document.body.classList.add('sb-collapsed'); } }catch(e){}&#10;  const handle=document.getElementById('sbHandle');&#10;  const updateAria=()=&gt;{ handle?.setAttribute('aria-expanded', String(!document.body.classList.contains('sb-collapsed'))); };&#10;  updateAria();&#10;  handle?.addEventListener('click',()=&gt;{&#10;    document.body.classList.toggle('sb-collapsed');&#10;    updateAria();&#10;    try{ localStorage.setItem(KEY, document.body.classList.contains('sb-collapsed') ? '1' : '0'); }catch(e){}&#10;  });&#10;})();&#10;&#10;async function loadUser(){&#10;  try{&#10;    const res = await fetch('/api/session');&#10;    const data = await res.json();&#10;    const user = data &amp;&amp; data.user;&#10;    const el = document.getElementById('userInfo');&#10;    if(!user){&#10;      // If somehow reached here without a session, bounce to home&#10;      location.replace('/');&#10;      return;&#10;    }&#10;    if(el){ el.textContent = (user.name||user.email||'Usuario'); }&#10;  }catch(e){&#10;    location.replace('/');&#10;  }&#10;}&#10;&#10;async function loadVps(){&#10;  try{&#10;    const res = await fetch('/api/vps');&#10;    if(!res.ok){ if(res.status===401) return location.replace('/'); throw new Error('HTTP '+res.status); }&#10;    const list = await res.json();&#10;    const totalDisk = list.reduce((s,v)=&gt;s+parseInt((v.disk||'0')),0);&#10;    const totalUsed = list.reduce((s,v)=&gt;s+parseInt((v.used||'0')),0);&#10;    const pct = totalDisk? Math.round((totalUsed/totalDisk)*100):0;&#10;    const fill = document.getElementById('totalBarFill');&#10;    if (fill) fill.style.width = pct + '%';&#10;    const label = document.getElementById('totalBarLabel');&#10;    if (label) label.textContent = `${totalUsed} / ${totalDisk} GB usados (${pct}%)`;&#10;    const cards = list.map(item=&gt;{&#10;      const total = parseInt(item.disk||'0');&#10;      const used = parseInt(item.used||'0');&#10;      const p = total? Math.min(100, Math.round((used/total)*100)) : 0;&#10;      return `&#10;        &lt;div class=&quot;card&quot; data-id=&quot;${item.id}&quot;&gt;&#10;          &lt;div style=&quot;flex:1&quot;&gt;&#10;            &lt;div class=&quot;name&quot;&gt;${item.name} &lt;span class=&quot;badge&quot;&gt;${item.id}&lt;/span&gt;&lt;/div&gt;&#10;            &lt;div class=&quot;meta&quot;&gt;&#10;              &lt;span class=&quot;badge&quot;&gt;${item.cpu}&lt;/span&gt;&#10;              &lt;span class=&quot;badge&quot;&gt;${item.ram}&lt;/span&gt;&#10;              &lt;span class=&quot;badge&quot;&gt;${item.disk}&lt;/span&gt;&#10;              &lt;span class=&quot;badge&quot;&gt;${item.region}&lt;/span&gt;&#10;              &lt;span class=&quot;badge&quot;&gt;${item.status}&lt;/span&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;bar&quot;&gt;&lt;span style=&quot;width:${p}%&quot;&gt;&lt;/span&gt;&lt;/div&gt;&#10;            &lt;div class=&quot;meta&quot;&gt;${used} / ${total} GB usados (${p}%)&lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &lt;div class=&quot;actions&quot;&gt;&#10;            &lt;a href=&quot;#&quot; class=&quot;btn del&quot;&gt;Eliminar&lt;/a&gt;&#10;            &lt;a href=&quot;#&quot; class=&quot;btn&quot;&gt;Administrar&lt;/a&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;`&#10;    }).join('');&#10;    const listEl = document.getElementById('vpsList');&#10;    if (listEl) listEl.innerHTML = cards || '&lt;div class=&quot;muted&quot;&gt;Sin VPS&lt;/div&gt;';&#10;  }catch(e){&#10;    const listEl = document.getElementById('vpsList');&#10;    if (listEl) listEl.innerHTML = '&lt;div class=&quot;muted&quot;&gt;Error al cargar VPS&lt;/div&gt;';&#10;  }&#10;}&#10;&#10;async function createVps(){&#10;  try{ await fetch('/api/vps', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({}) }); await loadVps(); }catch(e){}&#10;}&#10;async function deleteVps(id){&#10;  try{ await fetch('/api/vps/' + encodeURIComponent(id), { method: 'DELETE' }); await loadVps(); }catch(e){}&#10;}&#10;&#10;// Event delegation for buttons&#10;document.addEventListener('click', (e)=&gt;{&#10;  const createBtn = e.target.closest('#createVps');&#10;  if(createBtn){ e.preventDefault(); createVps(); return; }&#10;  const delBtn = e.target.closest('.btn.del');&#10;  if(delBtn){ e.preventDefault(); const card = delBtn.closest('.card'); const id = card &amp;&amp; card.getAttribute('data-id'); if(id) deleteVps(id); }&#10;  const exp = e.target.closest('#exportJson');&#10;  if(exp){&#10;    e.preventDefault();&#10;    (async ()=&gt;{&#10;      try{&#10;        const res = await fetch('/api/vps');&#10;        const list = await res.json();&#10;        const url = URL.createObjectURL(new Blob([JSON.stringify(list,null,2)],{type:'application/json'}));&#10;        const a = document.createElement('a'); a.href = url; a.download = 'vps.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);&#10;      }catch(e){}&#10;    })();&#10;  }&#10;});&#10;&#10;// === Proxmox CT (LXC) creation ===&#10;(function(){&#10;  let wired = false;&#10;  function qs(id){ return document.getElementById(id); }&#10;  function show(el){ el &amp;&amp; el.classList.add('show'); }&#10;  function hide(el){ el &amp;&amp; el.classList.remove('show'); }&#10;  function setStatus(msg){ const s = qs('ctStatus'); if (s) s.textContent = msg || ''; }&#10;  async function loadTemplates(){&#10;    const sel = qs('ctTemplate'); if (!sel) return;&#10;    sel.innerHTML = '&lt;option&gt;Cargando templates...&lt;/option&gt;';&#10;    try{&#10;      const r = await fetch('/api/proxmox/templates');&#10;      if (r.status === 501){ sel.innerHTML=''; setStatus('Proxmox no configurado en el servidor'); return; }&#10;      const data = await r.json();&#10;      const list = (data &amp;&amp; data.templates) || [];&#10;      if (!list.length){ sel.innerHTML=''; setStatus('No hay templates disponibles'); return; }&#10;      sel.innerHTML = '';&#10;      list.forEach(v =&gt; {&#10;        const opt = document.createElement('option');&#10;        opt.value = v; opt.textContent = v; sel.appendChild(opt);&#10;      });&#10;    }catch(e){ sel.innerHTML=''; setStatus('Error cargando templates'); }&#10;  }&#10;  function openCtModal(){&#10;    const m = qs('ctModal'); if (!m) return;&#10;    // reset form&#10;    qs('ctForm')?.reset();&#10;    setStatus('');&#10;    show(m);&#10;    loadTemplates();&#10;  }&#10;  function closeCtModal(){ hide(qs('ctModal')); }&#10;  async function submitCt(e){&#10;    e.preventDefault();&#10;    const btn = qs('ctSubmitBtn');&#10;    const form = qs('ctForm');&#10;    if (!form) return;&#10;    const payload = {&#10;      hostname: qs('ctHostname')?.value?.trim(),&#10;      password: qs('ctPassword')?.value || '',&#10;      template: qs('ctTemplate')?.value || '',&#10;      cores: Number(qs('ctCores')?.value || 1),&#10;      memory: Number(qs('ctMemory')?.value || 1024),&#10;      rootfs: Number(qs('ctDisk')?.value || 8),&#10;      swap: Number(qs('ctSwap')?.value || 512),&#10;      netBridge: qs('ctBridge')?.value || 'vmbr0',&#10;      start: qs('ctStart')?.checked ? 1 : 0&#10;    };&#10;    if (!payload.hostname || !payload.password){ setStatus('Completa hostname y password'); return; }&#10;    try{&#10;      btn &amp;&amp; (btn.disabled = true); setStatus('Creando contenedor...');&#10;      const r = await fetch('/api/proxmox/ct', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });&#10;      if (r.status === 401){ setStatus('No autenticado'); btn &amp;&amp; (btn.disabled=false); return; }&#10;      if (r.status === 501){ setStatus('Proxmox no configurado en el servidor'); btn &amp;&amp; (btn.disabled=false); return; }&#10;      if (!r.ok){ const t = await r.json().catch(()=&gt;({})); setStatus('Error: '+(t.error||r.status)); btn &amp;&amp; (btn.disabled=false); return; }&#10;      const { upid, vmid } = await r.json();&#10;      setStatus(`Tarea iniciada (VMID ${vmid}). Esperando finalización...`);&#10;      // poll status&#10;      await pollTask(upid);&#10;      setStatus('Contenedor creado exitosamente');&#10;      setTimeout(()=&gt;{ closeCtModal(); }, 1200);&#10;    }catch(err){ setStatus('Error creando contenedor'); }&#10;    finally{ btn &amp;&amp; (btn.disabled = false); }&#10;  }&#10;  async function pollTask(upid){&#10;    let attempts = 0;&#10;    while (attempts &lt; 120){ // ~4 minutos&#10;      attempts++;&#10;      try{&#10;        const r = await fetch(`/api/proxmox/ct/${encodeURIComponent(upid)}/status`);&#10;        const data = await r.json();&#10;        // data typically: { status: 'running'|'stopped', exitstatus: 'OK'|'ERROR' }&#10;        if (data.status){ setStatus(`Estado: ${data.status}${data.exitstatus? ' · '+data.exitstatus: ''}`); }&#10;        if (data.status === 'stopped'){&#10;          if (String(data.exitstatus||'').toUpperCase().includes('OK')) return true;&#10;          // ended but not OK&#10;          throw new Error(data.exitstatus || 'Tarea detenida');&#10;        }&#10;      }catch(e){ setStatus('Error consultando estado'); throw e; }&#10;      await new Promise(r =&gt; setTimeout(r, 2000));&#10;    }&#10;    throw new Error('Timeout esperando tarea');&#10;  }&#10;  function wire(){&#10;    if (wired) return; wired = true;&#10;    document.addEventListener('click', (e)=&gt;{&#10;      const openBtn = e.target.closest('#createCtBtn');&#10;      if (openBtn){ e.preventDefault(); openCtModal(); return; }&#10;      const closeBtn = e.target.closest('#ctCloseBtn, #ctCancelBtn');&#10;      if (closeBtn){ e.preventDefault(); closeCtModal(); return; }&#10;    });&#10;    qs('ctForm')?.addEventListener('submit', submitCt);&#10;  }&#10;  document.addEventListener('DOMContentLoaded', wire);&#10;})();&#10;&#10;// === Proxmox VM (QEMU) management ===&#10;(function(){&#10;  let wiredVm = false;&#10;  function qs(id){ return document.getElementById(id); }&#10;  function show(el){ el &amp;&amp; el.classList.add('show'); }&#10;  function hide(el){ el &amp;&amp; el.classList.remove('show'); }&#10;  function setVmStatus(msg){ const s = qs('vmStatus'); if (s) s.textContent = msg || ''; }&#10;&#10;  function openVmModal(){ setVmStatus(''); show(qs('vmModal')); qs('vmForm')?.reset(); }&#10;  function closeVmModal(){ hide(qs('vmModal')); }&#10;&#10;  async function submitVm(e){&#10;    e.preventDefault();&#10;    const btn = qs('vmSubmitBtn');&#10;    const payload = {&#10;      name: qs('vmName')?.value?.trim(),&#10;      cores: Number(qs('vmCores')?.value || 1),&#10;      memory: Number(qs('vmMemory')?.value || 1024),&#10;      disk: Number(qs('vmDisk')?.value || 10),&#10;      bridge: qs('vmBridge')?.value || 'vmbr0'&#10;    };&#10;    if (!payload.name){ setVmStatus('Ingresa un nombre'); return; }&#10;    try{&#10;      btn &amp;&amp; (btn.disabled = true); setVmStatus('Creando VM...');&#10;      const r = await fetch('/api/proxmox/vm', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });&#10;      if (r.status === 401){ setVmStatus('No autenticado'); return; }&#10;      if (r.status === 501){ setVmStatus('Proxmox no configurado en el servidor'); return; }&#10;      if (!r.ok){ const t = await r.json().catch(()=&gt;({})); setVmStatus('Error: ' + (t.error||r.status)); return; }&#10;      const { upid, vmid } = await r.json();&#10;      setVmStatus(`Tarea iniciada (VMID ${vmid}). Esperando finalización...`);&#10;      // Optional: poll generic CT status endpoint (works for any task)&#10;      try { await pollTaskStatus(upid); } catch {}&#10;      setVmStatus('VM creada');&#10;      setTimeout(()=&gt;{ closeVmModal(); }, 800);&#10;      // refresh list a bit later&#10;      setTimeout(()=&gt;{ loadVMs(); }, 1200);&#10;    } catch(err){ setVmStatus('Error creando VM'); }&#10;    finally{ btn &amp;&amp; (btn.disabled = false); }&#10;  }&#10;&#10;  async function pollTaskStatus(upid){&#10;    let tries = 0;&#10;    while (tries &lt; 90){&#10;      tries++;&#10;      const r = await fetch(`/api/proxmox/ct/${encodeURIComponent(upid)}/status`);&#10;      const data = await r.json().catch(()=&gt;({}));&#10;      if (data &amp;&amp; data.status){ setVmStatus(`Estado: ${data.status}${data.exitstatus? ' · '+data.exitstatus: ''}`); }&#10;      if (data &amp;&amp; data.status === 'stopped') return data;&#10;      await new Promise(r =&gt; setTimeout(r, 2000));&#10;    }&#10;    throw new Error('timeout');&#10;  }&#10;&#10;  function renderVMCard(vm){&#10;    const vmid = String(vm.vmid);&#10;    const name = (vm.name || ('VM ' + vmid));&#10;    const status = vm.status || 'unknown';&#10;    const maxmem = vm.maxmem ? Math.round(vm.maxmem/1024/1024) + ' MB' : '—';&#10;    const maxdisk = vm.maxdisk ? Math.round(vm.maxdisk/1024/1024/1024) + ' GB' : '—';&#10;    return `&#10;      &lt;div class=&quot;card&quot; data-vmid=&quot;${vmid}&quot;&gt;&#10;        &lt;div style=&quot;flex:1&quot;&gt;&#10;          &lt;div class=&quot;name&quot;&gt;${name} &lt;span class=&quot;badge&quot;&gt;${vmid}&lt;/span&gt;&lt;/div&gt;&#10;          &lt;div class=&quot;meta&quot;&gt;&#10;            &lt;span class=&quot;badge&quot;&gt;Estado: ${status}&lt;/span&gt;&#10;            &lt;span class=&quot;badge&quot;&gt;vCPUs: ${vm.cpus ?? '—'}&lt;/span&gt;&#10;            &lt;span class=&quot;badge&quot;&gt;RAM máx: ${maxmem}&lt;/span&gt;&#10;            &lt;span class=&quot;badge&quot;&gt;Disco máx: ${maxdisk}&lt;/span&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;actions&quot;&gt;&#10;          &lt;a href=&quot;#&quot; class=&quot;btn secondary&quot; data-action=&quot;info-vm&quot; data-vmid=&quot;${vmid}&quot;&gt;Info&lt;/a&gt;&#10;          &lt;a href=&quot;#&quot; class=&quot;btn&quot; data-action=&quot;start-vm&quot; data-vmid=&quot;${vmid}&quot;&gt;Start&lt;/a&gt;&#10;          &lt;a href=&quot;#&quot; class=&quot;btn&quot; data-action=&quot;stop-vm&quot; data-vmid=&quot;${vmid}&quot;&gt;Stop&lt;/a&gt;&#10;          &lt;a href=&quot;#&quot; class=&quot;btn&quot; data-action=&quot;reboot-vm&quot; data-vmid=&quot;${vmid}&quot;&gt;Reboot&lt;/a&gt;&#10;          &lt;a href=&quot;#&quot; class=&quot;btn del&quot; data-action=&quot;delete-vm&quot; data-vmid=&quot;${vmid}&quot;&gt;Eliminar&lt;/a&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;`;&#10;  }&#10;&#10;  async function loadVMs(){&#10;    const listEl = qs('vmsList');&#10;    if (!listEl) return;&#10;    listEl.textContent = 'Cargando VMs...';&#10;    try{&#10;      const r = await fetch('/api/proxmox/vms');&#10;      if (r.status === 501){ listEl.textContent = 'Proxmox no configurado en el servidor'; return; }&#10;      if (r.status === 401){ listEl.textContent = 'No autenticado'; return; }&#10;      const list = await r.json();&#10;      if (!Array.isArray(list) || !list.length){ listEl.textContent = 'Sin VMs'; return; }&#10;      listEl.innerHTML = list.map(renderVMCard).join('');&#10;    }catch(e){ listEl.textContent = 'Error al cargar VMs'; }&#10;  }&#10;&#10;  async function vmAction(vmid, action){&#10;    try{&#10;      const url = action === 'delete' ? `/api/proxmox/vm/${encodeURIComponent(vmid)}`&#10;        : `/api/proxmox/vm/${encodeURIComponent(vmid)}/${action}`;&#10;      const opts = { method: action === 'delete' ? 'DELETE' : 'POST' };&#10;      const r = await fetch(url, opts);&#10;      if (!r.ok){ return false; }&#10;      return true;&#10;    }catch{ return false; }&#10;  }&#10;&#10;  function wireVm(){&#10;    if (wiredVm) return; wiredVm = true;&#10;    document.addEventListener('click', (e)=&gt;{&#10;      const openBtn = e.target.closest('#createVmBtn');&#10;      if (openBtn){ e.preventDefault(); openVmModal(); return; }&#10;      const closeBtn = e.target.closest('#vmCloseBtn, #vmCancelBtn');&#10;      if (closeBtn){ e.preventDefault(); closeVmModal(); return; }&#10;      const refresh = e.target.closest('#refreshVms');&#10;      if (refresh){ e.preventDefault(); loadVMs(); return; }&#10;&#10;      const start = e.target.closest('[data-action=&quot;start-vm&quot;]');&#10;      if (start){ e.preventDefault(); const id = start.getAttribute('data-vmid'); vmAction(id, 'start').then(loadVMs); return; }&#10;      const stop = e.target.closest('[data-action=&quot;stop-vm&quot;]');&#10;      if (stop){ e.preventDefault(); const id = stop.getAttribute('data-vmid'); vmAction(id, 'stop').then(loadVMs); return; }&#10;      const reboot = e.target.closest('[data-action=&quot;reboot-vm&quot;]');&#10;      if (reboot){ e.preventDefault(); const id = reboot.getAttribute('data-vmid'); vmAction(id, 'reboot').then(loadVMs); return; }&#10;      const del = e.target.closest('[data-action=&quot;delete-vm&quot;]');&#10;      if (del){ e.preventDefault(); const id = del.getAttribute('data-vmid'); if (confirm('¿Eliminar VM '+id+'?')) vmAction(id, 'delete').then(loadVMs); return; }&#10;      const info = e.target.closest('[data-action=&quot;info-vm&quot;]');&#10;      if (info){&#10;        e.preventDefault(); const id = info.getAttribute('data-vmid');&#10;        (async ()=&gt;{&#10;          try{&#10;            const r = await fetch(`/api/proxmox/vm/${encodeURIComponent(id)}/info`);&#10;            const data = await r.json();&#10;            const mem = data?.mem ? Math.round(data.mem/1024/1024)+' MB' : '—';&#10;            const maxmem = data?.maxmem ? Math.round(data.maxmem/1024/1024)+' MB' : '—';&#10;            const disk = data?.disk ? Math.round(data.disk/1024/1024/1024)+' GB' : '—';&#10;            const maxdisk = data?.maxdisk ? Math.round(data.maxdisk/1024/1024/1024)+' GB' : '—';&#10;            alert(`VM ${id}\nEstado: ${data?.status || '—'}\nCPU: ${(data?.cpu??0)*100}% de ${data?.cpus||'—'}\nRAM: ${mem} / ${maxmem}\nDisco: ${disk} / ${maxdisk}`);&#10;          }catch{ alert('No se pudo obtener la información'); }&#10;        })();&#10;        return;&#10;      }&#10;    });&#10;&#10;    qs('vmForm')?.addEventListener('submit', submitVm);&#10;    // initial load&#10;    loadVMs();&#10;  }&#10;&#10;  document.addEventListener('DOMContentLoaded', wireVm);&#10;})();&#10;&#10;// Init&#10;loadUser();&#10;loadVps();" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/lib/proxmox.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/lib/proxmox.js" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="// Proxmox management library&#10;// Provides helpers for CT and VM operations via Proxmox API v2&#10;&#10;const https = require('https');&#10;const querystring = require('querystring');&#10;&#10;// Config from environment&#10;const PMX_HOST = process.env.PMX_HOST || '';&#10;const PMX_PORT = process.env.PMX_PORT ? Number(process.env.PMX_PORT) : 8006;&#10;const PMX_USER = process.env.PMX_USER || '';&#10;const PMX_TOKEN_NAME = process.env.PMX_TOKEN_NAME || '';&#10;const PMX_TOKEN_VALUE = process.env.PMX_TOKEN_VALUE || '';&#10;const PMX_NODE = process.env.PMX_NODE || 'pve';&#10;const PMX_STORAGE = process.env.PMX_STORAGE || 'local';&#10;const PMX_NET_BRIDGE = process.env.PMX_NET_BRIDGE || 'vmbr0';&#10;&#10;function haveConfig() {&#10;  return PMX_HOST &amp;&amp; PMX_USER &amp;&amp; PMX_TOKEN_NAME &amp;&amp; PMX_TOKEN_VALUE;&#10;}&#10;&#10;function headers(extra = {}) {&#10;  return Object.assign({&#10;    'Authorization': `PVEAPIToken=${PMX_USER}!${PMX_TOKEN_NAME}=${PMX_TOKEN_VALUE}`&#10;  }, extra);&#10;}&#10;&#10;function request(method, apiPath, { headers: h = {}, body = null } = {}) {&#10;  return new Promise((resolve, reject) =&gt; {&#10;    const options = {&#10;      hostname: PMX_HOST,&#10;      port: PMX_PORT,&#10;      path: `/api2/json${apiPath}`,&#10;      method,&#10;      headers: headers(h),&#10;      rejectUnauthorized: false&#10;    };&#10;    const req = https.request(options, (res) =&gt; {&#10;      let data = '';&#10;      res.on('data', chunk =&gt; data += chunk);&#10;      res.on('end', () =&gt; {&#10;        try {&#10;          const parsed = JSON.parse(data || '{}');&#10;          if (res.statusCode &gt;= 200 &amp;&amp; res.statusCode &lt; 300) return resolve(parsed);&#10;          const err = new Error(`Proxmox API ${res.statusCode}`);&#10;          err.response = parsed; err.statusCode = res.statusCode; return reject(err);&#10;        } catch (e) {&#10;          if (res.statusCode &gt;= 200 &amp;&amp; res.statusCode &lt; 300) return resolve({});&#10;          const err = new Error(`Proxmox API ${res.statusCode}`);&#10;          err.response = data; err.statusCode = res.statusCode; return reject(err);&#10;        }&#10;      });&#10;    });&#10;    req.on('error', reject);&#10;    if (body) req.write(body);&#10;    req.end();&#10;  });&#10;}&#10;&#10;async function nextId() {&#10;  const resp = await request('GET', '/cluster/nextid');&#10;  return resp?.data; // string id&#10;}&#10;&#10;// ----- CT helpers -----&#10;async function listCTTemplates() {&#10;  const resp = await request('GET', `/nodes/${encodeURIComponent(PMX_NODE)}/storage/${encodeURIComponent(PMX_STORAGE)}/content?content=vztmpl`);&#10;  return (resp?.data || []).filter(x =&gt; x.content === 'vztmpl').map(x =&gt; x.volid);&#10;}&#10;&#10;async function createCT(opts = {}) {&#10;  const vmid = await nextId();&#10;  const {&#10;    hostname,&#10;    password,&#10;    template = `${PMX_STORAGE}:vztmpl/debian-12-standard_12.2-1_amd64.tar.zst`,&#10;    storage = PMX_STORAGE,&#10;    cores = 1,&#10;    memory = 1024,&#10;    swap = 512,&#10;    rootfs = 8,&#10;    netBridge = PMX_NET_BRIDGE,&#10;    start = 1&#10;  } = opts;&#10;&#10;  const net0 = `name=eth0,bridge=${netBridge},ip=dhcp`;&#10;  const form = querystring.stringify({&#10;    vmid,&#10;    hostname,&#10;    ostemplate: template,&#10;    storage,&#10;    rootfs: `${storage}:${Number(rootfs)}`,&#10;    cores: Number(cores),&#10;    memory: Number(memory),&#10;    swap: Number(swap),&#10;    password,&#10;    net0,&#10;    start: String(start)&#10;  });&#10;&#10;  const resp = await request('POST', `/nodes/${encodeURIComponent(PMX_NODE)}/lxc`, {&#10;    headers: { 'Content-Type': 'application/x-www-form-urlencoded', 'Content-Length': Buffer.byteLength(form) },&#10;    body: form&#10;  });&#10;  return { upid: resp?.data, vmid };&#10;}&#10;&#10;async function getTaskStatus(upid) {&#10;  const resp = await request('GET', `/nodes/${encodeURIComponent(PMX_NODE)}/tasks/${encodeURIComponent(upid)}/status`);&#10;  return resp?.data || {};&#10;}&#10;&#10;// ----- VM (QEMU) helpers -----&#10;async function createVM(opts = {}) {&#10;  const vmid = await nextId();&#10;  const {&#10;    name,&#10;    cores = 1,&#10;    memory = 1024,&#10;    disk = 10,&#10;    storage = PMX_STORAGE,&#10;    bridge = PMX_NET_BRIDGE&#10;  } = opts;&#10;&#10;  // Minimal blank VM with virtio disk and network, no ISO&#10;  const formObj = {&#10;    vmid,&#10;    name,&#10;    cores: Number(cores),&#10;    memory: Number(memory),&#10;    scsihw: 'virtio-scsi-pci',&#10;    'scsi0': `${storage}:${Number(disk)}`,&#10;    net0: `virtio,bridge=${bridge}`,&#10;    ostype: 'l26',&#10;    agent: 1&#10;  };&#10;  const form = querystring.stringify(formObj);&#10;  const resp = await request('POST', `/nodes/${encodeURIComponent(PMX_NODE)}/qemu`, {&#10;    headers: { 'Content-Type': 'application/x-www-form-urlencoded', 'Content-Length': Buffer.byteLength(form) },&#10;    body: form&#10;  });&#10;  return { upid: resp?.data, vmid };&#10;}&#10;&#10;async function deleteVM(vmid) {&#10;  const resp = await request('DELETE', `/nodes/${encodeURIComponent(PMX_NODE)}/qemu/${encodeURIComponent(vmid)}`);&#10;  return resp?.data;&#10;}&#10;&#10;async function startVM(vmid) {&#10;  const resp = await request('POST', `/nodes/${encodeURIComponent(PMX_NODE)}/qemu/${encodeURIComponent(vmid)}/status/start`);&#10;  return resp?.data;&#10;}&#10;&#10;async function stopVM(vmid) {&#10;  const resp = await request('POST', `/nodes/${encodeURIComponent(PMX_NODE)}/qemu/${encodeURIComponent(vmid)}/status/stop`);&#10;  return resp?.data;&#10;}&#10;&#10;async function rebootVM(vmid) {&#10;  const resp = await request('POST', `/nodes/${encodeURIComponent(PMX_NODE)}/qemu/${encodeURIComponent(vmid)}/status/reboot`);&#10;  return resp?.data;&#10;}&#10;&#10;async function getVMInfo(vmid) {&#10;  const resp = await request('GET', `/nodes/${encodeURIComponent(PMX_NODE)}/qemu/${encodeURIComponent(vmid)}/status/current`);&#10;  // resp.data typically includes: name, status, cpu, cpus, maxmem, mem, maxdisk, disk, uptime&#10;  return resp?.data;&#10;}&#10;&#10;async function listVMs() {&#10;  const resp = await request('GET', `/nodes/${encodeURIComponent(PMX_NODE)}/qemu`);&#10;  return resp?.data || [];&#10;}&#10;&#10;module.exports = {&#10;  haveConfig,&#10;  // shared&#10;  getTaskStatus,&#10;  // CT&#10;  listCTTemplates,&#10;  createCT,&#10;  // VM&#10;  listVMs,&#10;  createVM,&#10;  deleteVM,&#10;  startVM,&#10;  stopVM,&#10;  rebootVM,&#10;  getVMInfo,&#10;};" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/package.json">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/package.json" />
              <option name="originalContent" value="{&#10;  &quot;name&quot;: &quot;WebTest&quot;,&#10;  &quot;version&quot;: &quot;1.0.0&quot;,&#10;  &quot;description&quot;: &quot;&quot;,&#10;  &quot;main&quot;: &quot;js/auth.js&quot;,&#10;  &quot;scripts&quot;: {&#10;  &quot;private&quot;: true&#10;  &quot;private&quot;: true&#10;  &quot;private&quot;: true&#10;&#10;&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="{&#10;  &quot;name&quot;: &quot;WebTest&quot;,&#10;  &quot;version&quot;: &quot;1.0.0&quot;,&#10;  &quot;description&quot;: &quot;&quot;,&#10;  &quot;main&quot;: &quot;js/auth.js&quot;,&#10;  &quot;scripts&quot;: {&#10;    &quot;start&quot;: &quot;node server.js&quot;,&#10;    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;&#10;  },&#10;  &quot;private&quot;: true,&#10;  &quot;dependencies&quot;: {&#10;    &quot;express&quot;: &quot;^4.19.2&quot;&#10;  }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/panel.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/panel.html" />
              <option name="originalContent" value="&lt;!doctype html&gt;&#10;&lt;html lang=&quot;es&quot;&gt;&#10;&lt;head&gt;&#10;  &lt;meta charset=&quot;utf-8&quot; /&gt;&#10;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;&#10;  &lt;title&gt;Panel de Control - BitHosting&lt;/title&gt;&#10;  &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/styles.css&quot; /&gt;&#10;  &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/panel.css&quot; /&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;&lt;header class=&quot;sticky&quot;&gt;&#10;  &lt;div class=&quot;container&quot;&gt;&#10;    &lt;div style=&quot;display:flex;align-items:center;gap:10px&quot;&gt;&#10;      &lt;a href=&quot;/&quot; id=&quot;panelLogo&quot; class=&quot;panel-logo&quot;&gt;&#10;        &lt;!-- Inline SVG logo to avoid loading issues --&gt;&#10;        &lt;svg width=&quot;32&quot; height=&quot;32&quot; viewBox=&quot;0 0 40 40&quot; aria-hidden=&quot;true&quot;&gt;&#10;          &lt;defs&gt;&#10;            &lt;linearGradient id=&quot;bhg2&quot; x1=&quot;0&quot; y1=&quot;0&quot; x2=&quot;1&quot; y2=&quot;1&quot;&gt;&#10;              &lt;stop offset=&quot;0%&quot; stop-color=&quot;#00d4ff&quot;/&gt;&#10;              &lt;stop offset=&quot;100%&quot; stop-color=&quot;#00b8e6&quot;/&gt;&#10;            &lt;/linearGradient&gt;&#10;          &lt;/defs&gt;&#10;          &lt;rect width=&quot;40&quot; height=&quot;40&quot; rx=&quot;8&quot; ry=&quot;8&quot; fill=&quot;url(#bhg2)&quot;/&gt;&#10;          &lt;text x=&quot;50%&quot; y=&quot;50%&quot; dominant-baseline=&quot;middle&quot; text-anchor=&quot;middle&quot; font-family=&quot;Segoe UI, Roboto, sans-serif&quot; font-size=&quot;20&quot; fill=&quot;#001018&quot;&gt;B&lt;/text&gt;&#10;        &lt;/svg&gt;&#10;        &lt;strong&gt;BitHosting · Panel de Control&lt;/strong&gt;&#10;      &lt;/a&gt;&#10;    &lt;/div&gt;&#10;    &lt;div&gt;&#10;      &lt;a href=&quot;/&quot; class=&quot;btn secondary&quot;&gt;Volver al inicio&lt;/a&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/header&gt;&#10;&#10;&lt;!-- Sidebar (only in panel) --&gt;&#10;&lt;aside class=&quot;sidebar&quot; id=&quot;panelSidebar&quot; aria-label=&quot;Navegación lateral&quot;&gt;&#10;  &lt;div class=&quot;sb-brand&quot;&gt;&#10;    &lt;!-- Inline SVG brand icon --&gt;&#10;    &lt;svg width=&quot;28&quot; height=&quot;28&quot; viewBox=&quot;0 0 40 40&quot; aria-hidden=&quot;true&quot; style=&quot;border-radius:6px&quot;&gt;&#10;      &lt;defs&gt;&#10;        &lt;linearGradient id=&quot;bhg3&quot; x1=&quot;0&quot; y1=&quot;0&quot; x2=&quot;1&quot; y2=&quot;1&quot;&gt;&#10;          &lt;stop offset=&quot;0%&quot; stop-color=&quot;#00d4ff&quot;/&gt;&#10;          &lt;stop offset=&quot;100%&quot; stop-color=&quot;#00b8e6&quot;/&gt;&#10;        &lt;/linearGradient&gt;&#10;      &lt;/defs&gt;&#10;      &lt;rect width=&quot;40&quot; height=&quot;40&quot; rx=&quot;8&quot; ry=&quot;8&quot; fill=&quot;url(#bhg3)&quot;/&gt;&#10;      &lt;text x=&quot;50%&quot; y=&quot;50%&quot; dominant-baseline=&quot;middle&quot; text-anchor=&quot;middle&quot; font-family=&quot;Segoe UI, Roboto, sans-serif&quot; font-size=&quot;20&quot; fill=&quot;#001018&quot;&gt;B&lt;/text&gt;&#10;    &lt;/svg&gt;&#10;    &lt;strong&gt;BitHosting&lt;/strong&gt;&#10;  &lt;/div&gt;&#10;  &lt;nav class=&quot;sb-nav&quot;&gt;&#10;    &lt;a class=&quot;sb-link&quot; href=&quot;#&quot;&gt;&#10;      &lt;span class=&quot;sb-ico&quot;&gt;&lt;/span&gt;&#10;      &lt;span class=&quot;sb-text&quot;&gt;Dashboard&lt;/span&gt;&#10;    &lt;/a&gt;&#10;    &lt;a class=&quot;sb-link&quot; href=&quot;#vpsList&quot;&gt;&#10;      &lt;span class=&quot;sb-ico&quot;&gt;️&lt;/span&gt;&#10;      &lt;span class=&quot;sb-text&quot;&gt;Mis VPS&lt;/span&gt;&#10;    &lt;/a&gt;&#10;    &lt;a class=&quot;sb-link&quot; href=&quot;#facturacion&quot;&gt;&#10;      &lt;span class=&quot;sb-ico&quot;&gt;&lt;/span&gt;&#10;      &lt;span class=&quot;sb-text&quot;&gt;Facturación&lt;/span&gt;&#10;    &lt;/a&gt;&#10;    &lt;a class=&quot;sb-link&quot; href=&quot;#soporte&quot;&gt;&#10;      &lt;span class=&quot;sb-ico&quot;&gt;&lt;/span&gt;&#10;      &lt;span class=&quot;sb-text&quot;&gt;Soporte&lt;/span&gt;&#10;    &lt;/a&gt;&#10;  &lt;/nav&gt;&#10;&lt;/aside&gt;&#10;&lt;div class=&quot;sb-handle&quot; id=&quot;sbHandle&quot; title=&quot;Alternar menú&quot; aria-controls=&quot;panelSidebar&quot; aria-expanded=&quot;true&quot;&gt;&lt;span class=&quot;sb-handle-icon&quot;&gt;☰&lt;/span&gt;&lt;/div&gt;&#10;&#10;&lt;main class=&quot;panel-wrap main-with-sidebar&quot;&gt;&#10;  &lt;section class=&quot;summary card&quot; style=&quot;flex-direction:column&quot;&gt;&#10;    &lt;div style=&quot;display:flex;justify-content:space-between;align-items:center;gap:12px;width:100%&quot;&gt;&#10;      &lt;div&gt;&#10;        &lt;div id=&quot;userInfo&quot; class=&quot;muted&quot;&gt;Cargando usuario...&lt;/div&gt;&#10;        &lt;div style=&quot;margin-top:6px&quot;&gt;&lt;strong&gt;Uso total de almacenamiento&lt;/strong&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div style=&quot;display:flex;gap:8px;flex-wrap:wrap&quot;&gt;&#10;        &lt;a href=&quot;#&quot; id=&quot;createVps&quot; class=&quot;btn secondary&quot;&gt;Crear VPS (debug)&lt;/a&gt;&#10;        &lt;a href=&quot;#&quot; id=&quot;createCtBtn&quot; class=&quot;btn&quot;&gt;Crear CT Proxmox&lt;/a&gt;&#10;        &lt;a href=&quot;#&quot; id=&quot;exportJson&quot; class=&quot;btn&quot;&gt;Exportar JSON&lt;/a&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;bar&quot; style=&quot;width:100%&quot;&gt;&lt;span id=&quot;totalBarFill&quot; style=&quot;width:0%&quot;&gt;&lt;/span&gt;&lt;/div&gt;&#10;    &lt;div class=&quot;muted&quot; id=&quot;totalBarLabel&quot;&gt;Cargando...&lt;/div&gt;&#10;  &lt;/section&gt;&#10;&#10;  &lt;section id=&quot;vpsList&quot;&gt;&#10;    &lt;div class=&quot;muted&quot;&gt;Cargando VPS...&lt;/div&gt;&#10;  &lt;/section&gt;&#10;  &lt;!-- Optional placeholder sections to resolve anchors --&gt;&#10;  &lt;section id=&quot;facturacion&quot; class=&quot;card&quot; style=&quot;display:none&quot;&gt;&lt;div class=&quot;muted&quot;&gt;Facturación&lt;/div&gt;&lt;/section&gt;&#10;  &lt;section id=&quot;soporte&quot; class=&quot;card&quot; style=&quot;display:none&quot;&gt;&lt;div class=&quot;muted&quot;&gt;Soporte&lt;/div&gt;&lt;/section&gt;&#10;&lt;/main&gt;&#10;&#10;&lt;!-- Proxmox Create CT Modal --&gt;&#10;&lt;div class=&quot;modal&quot; id=&quot;ctModal&quot; role=&quot;dialog&quot; aria-modal=&quot;true&quot; aria-labelledby=&quot;ctTitle&quot;&gt;&#10;  &lt;div class=&quot;modal-content&quot; style=&quot;max-width:520px&quot;&gt;&#10;    &lt;button type=&quot;button&quot; class=&quot;modal-close&quot; id=&quot;ctCloseBtn&quot; aria-label=&quot;Cerrar&quot;&gt;&amp;times;&lt;/button&gt;&#10;    &lt;h3 id=&quot;ctTitle&quot; style=&quot;margin-bottom:10px&quot;&gt;Crear Contenedor LXC&lt;/h3&gt;&#10;    &lt;form id=&quot;ctForm&quot;&gt;&#10;      &lt;div class=&quot;form-row&quot;&gt;&#10;        &lt;label for=&quot;ctHostname&quot;&gt;Hostname&lt;/label&gt;&#10;        &lt;input id=&quot;ctHostname&quot; name=&quot;hostname&quot; type=&quot;text&quot; required placeholder=&quot;mi-contenedor&quot; /&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-row&quot;&gt;&#10;        &lt;label for=&quot;ctPassword&quot;&gt;Password root&lt;/label&gt;&#10;        &lt;input id=&quot;ctPassword&quot; name=&quot;password&quot; type=&quot;password&quot; required placeholder=&quot;********&quot; /&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-row&quot;&gt;&#10;        &lt;label for=&quot;ctTemplate&quot;&gt;Template&lt;/label&gt;&#10;        &lt;select id=&quot;ctTemplate&quot; name=&quot;template&quot;&gt;&lt;/select&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-grid&quot;&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;ctCores&quot;&gt;Cores&lt;/label&gt;&#10;          &lt;input id=&quot;ctCores&quot; name=&quot;cores&quot; type=&quot;number&quot; min=&quot;1&quot; value=&quot;1&quot; /&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;ctMemory&quot;&gt;Memoria (MB)&lt;/label&gt;&#10;          &lt;input id=&quot;ctMemory&quot; name=&quot;memory&quot; type=&quot;number&quot; min=&quot;256&quot; step=&quot;256&quot; value=&quot;1024&quot; /&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-grid&quot;&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;ctDisk&quot;&gt;Disco (GB)&lt;/label&gt;&#10;          &lt;input id=&quot;ctDisk&quot; name=&quot;rootfs&quot; type=&quot;number&quot; min=&quot;4&quot; step=&quot;1&quot; value=&quot;8&quot; /&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;ctSwap&quot;&gt;Swap (MB)&lt;/label&gt;&#10;          &lt;input id=&quot;ctSwap&quot; name=&quot;swap&quot; type=&quot;number&quot; min=&quot;0&quot; step=&quot;128&quot; value=&quot;512&quot; /&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-row&quot;&gt;&#10;        &lt;label for=&quot;ctBridge&quot;&gt;Bridge&lt;/label&gt;&#10;        &lt;input id=&quot;ctBridge&quot; name=&quot;netBridge&quot; type=&quot;text&quot; value=&quot;vmbr0&quot; /&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-row&quot; style=&quot;display:flex;align-items:center;gap:8px&quot;&gt;&#10;        &lt;input id=&quot;ctStart&quot; name=&quot;start&quot; type=&quot;checkbox&quot; checked /&gt;&#10;        &lt;label for=&quot;ctStart&quot; style=&quot;margin:0&quot;&gt;Iniciar al crear&lt;/label&gt;&#10;      &lt;/div&gt;&#10;      &lt;div id=&quot;ctStatus&quot; class=&quot;muted&quot; aria-live=&quot;polite&quot; style=&quot;min-height:20px;margin:8px 0 4px&quot;&gt;&lt;/div&gt;&#10;      &lt;div style=&quot;display:flex;gap:10px;justify-content:flex-end;margin-top:10px&quot;&gt;&#10;        &lt;button type=&quot;button&quot; class=&quot;btn secondary&quot; id=&quot;ctCancelBtn&quot;&gt;Cancelar&lt;/button&gt;&#10;        &lt;button type=&quot;submit&quot; class=&quot;btn&quot; id=&quot;ctSubmitBtn&quot;&gt;Crear&lt;/button&gt;&#10;      &lt;/div&gt;&#10;    &lt;/form&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;script src=&quot;/js/panel.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
              <option name="updatedContent" value="&lt;!doctype html&gt;&#10;&lt;html lang=&quot;es&quot;&gt;&#10;&lt;head&gt;&#10;  &lt;meta charset=&quot;utf-8&quot; /&gt;&#10;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;&#10;  &lt;title&gt;Panel de Control - BitHosting&lt;/title&gt;&#10;  &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/styles.css&quot; /&gt;&#10;  &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/panel.css&quot; /&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;&lt;header class=&quot;sticky&quot;&gt;&#10;  &lt;div class=&quot;container&quot;&gt;&#10;    &lt;div style=&quot;display:flex;align-items:center;gap:10px&quot;&gt;&#10;      &lt;a href=&quot;/&quot; id=&quot;panelLogo&quot; class=&quot;panel-logo&quot;&gt;&#10;        &lt;!-- Inline SVG logo to avoid loading issues --&gt;&#10;        &lt;svg width=&quot;32&quot; height=&quot;32&quot; viewBox=&quot;0 0 40 40&quot; aria-hidden=&quot;true&quot;&gt;&#10;          &lt;defs&gt;&#10;            &lt;linearGradient id=&quot;bhg2&quot; x1=&quot;0&quot; y1=&quot;0&quot; x2=&quot;1&quot; y2=&quot;1&quot;&gt;&#10;              &lt;stop offset=&quot;0%&quot; stop-color=&quot;#00d4ff&quot;/&gt;&#10;              &lt;stop offset=&quot;100%&quot; stop-color=&quot;#00b8e6&quot;/&gt;&#10;            &lt;/linearGradient&gt;&#10;          &lt;/defs&gt;&#10;          &lt;rect width=&quot;40&quot; height=&quot;40&quot; rx=&quot;8&quot; ry=&quot;8&quot; fill=&quot;url(#bhg2)&quot;/&gt;&#10;          &lt;text x=&quot;50%&quot; y=&quot;50%&quot; dominant-baseline=&quot;middle&quot; text-anchor=&quot;middle&quot; font-family=&quot;Segoe UI, Roboto, sans-serif&quot; font-size=&quot;20&quot; fill=&quot;#001018&quot;&gt;B&lt;/text&gt;&#10;        &lt;/svg&gt;&#10;        &lt;strong&gt;BitHosting · Panel de Control&lt;/strong&gt;&#10;      &lt;/a&gt;&#10;    &lt;/div&gt;&#10;    &lt;div&gt;&#10;      &lt;a href=&quot;/&quot; class=&quot;btn secondary&quot;&gt;Volver al inicio&lt;/a&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/header&gt;&#10;&#10;&lt;!-- Sidebar (only in panel) --&gt;&#10;&lt;aside class=&quot;sidebar&quot; id=&quot;panelSidebar&quot; aria-label=&quot;Navegación lateral&quot;&gt;&#10;  &lt;div class=&quot;sb-brand&quot;&gt;&#10;    &lt;!-- Inline SVG brand icon --&gt;&#10;    &lt;svg width=&quot;28&quot; height=&quot;28&quot; viewBox=&quot;0 0 40 40&quot; aria-hidden=&quot;true&quot; style=&quot;border-radius:6px&quot;&gt;&#10;      &lt;defs&gt;&#10;        &lt;linearGradient id=&quot;bhg3&quot; x1=&quot;0&quot; y1=&quot;0&quot; x2=&quot;1&quot; y2=&quot;1&quot;&gt;&#10;          &lt;stop offset=&quot;0%&quot; stop-color=&quot;#00d4ff&quot;/&gt;&#10;          &lt;stop offset=&quot;100%&quot; stop-color=&quot;#00b8e6&quot;/&gt;&#10;        &lt;/linearGradient&gt;&#10;      &lt;/defs&gt;&#10;      &lt;rect width=&quot;40&quot; height=&quot;40&quot; rx=&quot;8&quot; ry=&quot;8&quot; fill=&quot;url(#bhg3)&quot;/&gt;&#10;      &lt;text x=&quot;50%&quot; y=&quot;50%&quot; dominant-baseline=&quot;middle&quot; text-anchor=&quot;middle&quot; font-family=&quot;Segoe UI, Roboto, sans-serif&quot; font-size=&quot;20&quot; fill=&quot;#001018&quot;&gt;B&lt;/text&gt;&#10;    &lt;/svg&gt;&#10;    &lt;strong&gt;BitHosting&lt;/strong&gt;&#10;  &lt;/div&gt;&#10;  &lt;nav class=&quot;sb-nav&quot;&gt;&#10;    &lt;a class=&quot;sb-link&quot; href=&quot;#&quot;&gt;&#10;      &lt;span class=&quot;sb-ico&quot;&gt;&lt;/span&gt;&#10;      &lt;span class=&quot;sb-text&quot;&gt;Dashboard&lt;/span&gt;&#10;    &lt;/a&gt;&#10;    &lt;a class=&quot;sb-link&quot; href=&quot;#vpsList&quot;&gt;&#10;      &lt;span class=&quot;sb-ico&quot;&gt;️&lt;/span&gt;&#10;      &lt;span class=&quot;sb-text&quot;&gt;Mis VPS&lt;/span&gt;&#10;    &lt;/a&gt;&#10;    &lt;a class=&quot;sb-link&quot; href=&quot;#facturacion&quot;&gt;&#10;      &lt;span class=&quot;sb-ico&quot;&gt;&lt;/span&gt;&#10;      &lt;span class=&quot;sb-text&quot;&gt;Facturación&lt;/span&gt;&#10;    &lt;/a&gt;&#10;    &lt;a class=&quot;sb-link&quot; href=&quot;#soporte&quot;&gt;&#10;      &lt;span class=&quot;sb-ico&quot;&gt;&lt;/span&gt;&#10;      &lt;span class=&quot;sb-text&quot;&gt;Soporte&lt;/span&gt;&#10;    &lt;/a&gt;&#10;  &lt;/nav&gt;&#10;&lt;/aside&gt;&#10;&lt;div class=&quot;sb-handle&quot; id=&quot;sbHandle&quot; title=&quot;Alternar menú&quot; aria-controls=&quot;panelSidebar&quot; aria-expanded=&quot;true&quot;&gt;&lt;span class=&quot;sb-handle-icon&quot;&gt;☰&lt;/span&gt;&lt;/div&gt;&#10;&#10;&lt;main class=&quot;panel-wrap main-with-sidebar&quot;&gt;&#10;  &lt;section class=&quot;summary card&quot; style=&quot;flex-direction:column&quot;&gt;&#10;    &lt;div style=&quot;display:flex;justify-content:space-between;align-items:center;gap:12px;width:100%&quot;&gt;&#10;      &lt;div&gt;&#10;        &lt;div id=&quot;userInfo&quot; class=&quot;muted&quot;&gt;Cargando usuario...&lt;/div&gt;&#10;        &lt;div style=&quot;margin-top:6px&quot;&gt;&lt;strong&gt;Uso total de almacenamiento&lt;/strong&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div style=&quot;display:flex;gap:8px;flex-wrap:wrap&quot;&gt;&#10;        &lt;a href=&quot;#&quot; id=&quot;createVps&quot; class=&quot;btn secondary&quot;&gt;Crear VPS (debug)&lt;/a&gt;&#10;        &lt;a href=&quot;#&quot; id=&quot;createCtBtn&quot; class=&quot;btn&quot;&gt;Crear CT Proxmox&lt;/a&gt;&#10;        &lt;a href=&quot;#&quot; id=&quot;createVmBtn&quot; class=&quot;btn&quot;&gt;Crear VM Proxmox&lt;/a&gt;&#10;        &lt;a href=&quot;#&quot; id=&quot;exportJson&quot; class=&quot;btn&quot;&gt;Exportar JSON&lt;/a&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;bar&quot; style=&quot;width:100%&quot;&gt;&lt;span id=&quot;totalBarFill&quot; style=&quot;width:0%&quot;&gt;&lt;/span&gt;&lt;/div&gt;&#10;    &lt;div class=&quot;muted&quot; id=&quot;totalBarLabel&quot;&gt;Cargando...&lt;/div&gt;&#10;  &lt;/section&gt;&#10;&#10;  &lt;section id=&quot;vpsList&quot;&gt;&#10;    &lt;div class=&quot;muted&quot;&gt;Cargando VPS...&lt;/div&gt;&#10;  &lt;/section&gt;&#10;&#10;  &lt;section id=&quot;vmsSection&quot; class=&quot;card&quot; style=&quot;flex-direction:column&quot;&gt;&#10;    &lt;div style=&quot;display:flex;justify-content:space-between;align-items:center;gap:12px;width:100%;margin-bottom:8px&quot;&gt;&#10;      &lt;strong&gt;Proxmox VMs&lt;/strong&gt;&#10;      &lt;a href=&quot;#&quot; id=&quot;refreshVms&quot; class=&quot;btn secondary&quot;&gt;Actualizar&lt;/a&gt;&#10;    &lt;/div&gt;&#10;    &lt;div id=&quot;vmsList&quot; class=&quot;muted&quot;&gt;Cargando VMs...&lt;/div&gt;&#10;  &lt;/section&gt;&#10;&#10;  &lt;!-- Optional placeholder sections to resolve anchors --&gt;&#10;  &lt;section id=&quot;facturacion&quot; class=&quot;card&quot; style=&quot;display:none&quot;&gt;&lt;div class=&quot;muted&quot;&gt;Facturación&lt;/div&gt;&lt;/section&gt;&#10;  &lt;section id=&quot;soporte&quot; class=&quot;card&quot; style=&quot;display:none&quot;&gt;&lt;div class=&quot;muted&quot;&gt;Soporte&lt;/div&gt;&lt;/section&gt;&#10;&lt;/main&gt;&#10;&#10;&lt;!-- Proxmox Create CT Modal --&gt;&#10;&lt;div class=&quot;modal&quot; id=&quot;ctModal&quot; role=&quot;dialog&quot; aria-modal=&quot;true&quot; aria-labelledby=&quot;ctTitle&quot;&gt;&#10;  &lt;div class=&quot;modal-content&quot; style=&quot;max-width:520px&quot;&gt;&#10;    &lt;button type=&quot;button&quot; class=&quot;modal-close&quot; id=&quot;ctCloseBtn&quot; aria-label=&quot;Cerrar&quot;&gt;&amp;times;&lt;/button&gt;&#10;    &lt;h3 id=&quot;ctTitle&quot; style=&quot;margin-bottom:10px&quot;&gt;Crear Contenedor LXC&lt;/h3&gt;&#10;    &lt;form id=&quot;ctForm&quot;&gt;&#10;      &lt;div class=&quot;form-row&quot;&gt;&#10;        &lt;label for=&quot;ctHostname&quot;&gt;Hostname&lt;/label&gt;&#10;        &lt;input id=&quot;ctHostname&quot; name=&quot;hostname&quot; type=&quot;text&quot; required placeholder=&quot;mi-contenedor&quot; /&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-row&quot;&gt;&#10;        &lt;label for=&quot;ctPassword&quot;&gt;Password root&lt;/label&gt;&#10;        &lt;input id=&quot;ctPassword&quot; name=&quot;password&quot; type=&quot;password&quot; required placeholder=&quot;********&quot; /&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-row&quot;&gt;&#10;        &lt;label for=&quot;ctTemplate&quot;&gt;Template&lt;/label&gt;&#10;        &lt;select id=&quot;ctTemplate&quot; name=&quot;template&quot;&gt;&lt;/select&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-grid&quot;&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;ctCores&quot;&gt;Cores&lt;/label&gt;&#10;          &lt;input id=&quot;ctCores&quot; name=&quot;cores&quot; type=&quot;number&quot; min=&quot;1&quot; value=&quot;1&quot; /&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;ctMemory&quot;&gt;Memoria (MB)&lt;/label&gt;&#10;          &lt;input id=&quot;ctMemory&quot; name=&quot;memory&quot; type=&quot;number&quot; min=&quot;256&quot; step=&quot;256&quot; value=&quot;1024&quot; /&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-grid&quot;&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;ctDisk&quot;&gt;Disco (GB)&lt;/label&gt;&#10;          &lt;input id=&quot;ctDisk&quot; name=&quot;rootfs&quot; type=&quot;number&quot; min=&quot;4&quot; step=&quot;1&quot; value=&quot;8&quot; /&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;ctSwap&quot;&gt;Swap (MB)&lt;/label&gt;&#10;          &lt;input id=&quot;ctSwap&quot; name=&quot;swap&quot; type=&quot;number&quot; min=&quot;0&quot; step=&quot;128&quot; value=&quot;512&quot; /&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-row&quot;&gt;&#10;        &lt;label for=&quot;ctBridge&quot;&gt;Bridge&lt;/label&gt;&#10;        &lt;input id=&quot;ctBridge&quot; name=&quot;netBridge&quot; type=&quot;text&quot; value=&quot;vmbr0&quot; /&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-row&quot; style=&quot;display:flex;align-items:center;gap:8px&quot;&gt;&#10;        &lt;input id=&quot;ctStart&quot; name=&quot;start&quot; type=&quot;checkbox&quot; checked /&gt;&#10;        &lt;label for=&quot;ctStart&quot; style=&quot;margin:0&quot;&gt;Iniciar al crear&lt;/label&gt;&#10;      &lt;/div&gt;&#10;      &lt;div id=&quot;ctStatus&quot; class=&quot;muted&quot; aria-live=&quot;polite&quot; style=&quot;min-height:20px;margin:8px 0 4px&quot;&gt;&lt;/div&gt;&#10;      &lt;div style=&quot;display:flex;gap:10px;justify-content:flex-end;margin-top:10px&quot;&gt;&#10;        &lt;button type=&quot;button&quot; class=&quot;btn secondary&quot; id=&quot;ctCancelBtn&quot;&gt;Cancelar&lt;/button&gt;&#10;        &lt;button type=&quot;submit&quot; class=&quot;btn&quot; id=&quot;ctSubmitBtn&quot;&gt;Crear&lt;/button&gt;&#10;      &lt;/div&gt;&#10;    &lt;/form&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- Proxmox Create VM Modal --&gt;&#10;&lt;div class=&quot;modal&quot; id=&quot;vmModal&quot; role=&quot;dialog&quot; aria-modal=&quot;true&quot; aria-labelledby=&quot;vmTitle&quot;&gt;&#10;  &lt;div class=&quot;modal-content&quot; style=&quot;max-width:520px&quot;&gt;&#10;    &lt;button type=&quot;button&quot; class=&quot;modal-close&quot; id=&quot;vmCloseBtn&quot; aria-label=&quot;Cerrar&quot;&gt;&amp;times;&lt;/button&gt;&#10;    &lt;h3 id=&quot;vmTitle&quot; style=&quot;margin-bottom:10px&quot;&gt;Crear VM (QEMU)&lt;/h3&gt;&#10;    &lt;form id=&quot;vmForm&quot;&gt;&#10;      &lt;div class=&quot;form-row&quot;&gt;&#10;        &lt;label for=&quot;vmName&quot;&gt;Nombre&lt;/label&gt;&#10;        &lt;input id=&quot;vmName&quot; name=&quot;name&quot; type=&quot;text&quot; required placeholder=&quot;mi-vm&quot; /&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-grid&quot;&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;vmCores&quot;&gt;Cores&lt;/label&gt;&#10;          &lt;input id=&quot;vmCores&quot; name=&quot;cores&quot; type=&quot;number&quot; min=&quot;1&quot; value=&quot;1&quot; /&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;vmMemory&quot;&gt;Memoria (MB)&lt;/label&gt;&#10;          &lt;input id=&quot;vmMemory&quot; name=&quot;memory&quot; type=&quot;number&quot; min=&quot;256&quot; step=&quot;256&quot; value=&quot;1024&quot; /&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;form-grid&quot;&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;vmDisk&quot;&gt;Disco (GB)&lt;/label&gt;&#10;          &lt;input id=&quot;vmDisk&quot; name=&quot;disk&quot; type=&quot;number&quot; min=&quot;5&quot; step=&quot;1&quot; value=&quot;10&quot; /&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;form-row&quot;&gt;&#10;          &lt;label for=&quot;vmBridge&quot;&gt;Bridge&lt;/label&gt;&#10;          &lt;input id=&quot;vmBridge&quot; name=&quot;bridge&quot; type=&quot;text&quot; value=&quot;vmbr0&quot; /&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div id=&quot;vmStatus&quot; class=&quot;muted&quot; aria-live=&quot;polite&quot; style=&quot;min-height:20px;margin:8px 0 4px&quot;&gt;&lt;/div&gt;&#10;      &lt;div style=&quot;display:flex;gap:10px;justify-content:flex-end;margin-top:10px&quot;&gt;&#10;        &lt;button type=&quot;button&quot; class=&quot;btn secondary&quot; id=&quot;vmCancelBtn&quot;&gt;Cancelar&lt;/button&gt;&#10;        &lt;button type=&quot;submit&quot; class=&quot;btn&quot; id=&quot;vmSubmitBtn&quot;&gt;Crear&lt;/button&gt;&#10;      &lt;/div&gt;&#10;    &lt;/form&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;script src=&quot;/js/panel.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/server.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/server.js" />
              <option name="originalContent" value="// Simple Express server to serve static site and JSON storage per user&#10;const express = require('express');&#10;const fs = require('fs');&#10;const path = require('path');&#10;const https = require('https');&#10;const querystring = require('querystring');&#10;&#10;const app = express();&#10;const PORT = process.env.PORT || 8080;&#10;&#10;// Paths for persistent data&#10;const DATA_DIR = path.join(__dirname, 'data');&#10;const VPS_DIR = path.join(DATA_DIR, 'vps');&#10;const USERS_FILE = path.join(DATA_DIR, 'users.json');&#10;&#10;// Ensure data directories exist&#10;fs.mkdirSync(VPS_DIR, { recursive: true });&#10;if (!fs.existsSync(USERS_FILE)) {&#10;  fs.writeFileSync(USERS_FILE, JSON.stringify({ users: {} }, null, 2));&#10;}&#10;&#10;app.use(express.json());&#10;app.use(express.urlencoded({ extended: false }));&#10;&#10;// In-memory session store keyed by remote IP&#10;const sessionsByIp = new Map();&#10;&#10;function getClientIp(req) {&#10;  return (&#10;    (req.headers['x-forwarded-for']?.split(',')[0] || '').trim() ||&#10;    req.socket.remoteAddress ||&#10;    req.ip ||&#10;    'unknown'&#10;  );&#10;}&#10;&#10;function userKey(user) {&#10;  const base = (user.email || user.sub || 'anon').toLowerCase();&#10;  return base.replace(/[^a-z0-9._-]+/g, '_');&#10;}&#10;&#10;function loadUserVps(key) {&#10;  const file = path.join(VPS_DIR, `${key}.json`);&#10;  if (!fs.existsSync(file)) return null;&#10;  try { return JSON.parse(fs.readFileSync(file, 'utf8')); } catch { return null; }&#10;}&#10;&#10;function saveUserVps(key, vpsList) {&#10;  const file = path.join(VPS_DIR, `${key}.json`);&#10;  fs.writeFileSync(file, JSON.stringify(vpsList, null, 2));&#10;}&#10;&#10;function ensureUserStored(user) {&#10;  try {&#10;    const data = JSON.parse(fs.readFileSync(USERS_FILE, 'utf8'));&#10;    const key = userKey(user);&#10;    if (!data.users[key]) {&#10;      data.users[key] = { name: user.name, email: user.email, sub: user.sub, picture: user.picture, createdAt: new Date().toISOString() };&#10;      fs.writeFileSync(USERS_FILE, JSON.stringify(data, null, 2));&#10;    }&#10;  } catch (e) {&#10;    // recreate file on error&#10;    const data = { users: {} };&#10;    const key = userKey(user);&#10;    data.users[key] = { name: user.name, email: user.email, sub: user.sub, picture: user.picture, createdAt: new Date().toISOString() };&#10;    fs.writeFileSync(USERS_FILE, JSON.stringify(data, null, 2));&#10;  }&#10;}&#10;&#10;// Set headers to allow Google popup to postMessage back (avoid COOP blocking)&#10;app.use((req, res, next) =&gt; {&#10;  res.setHeader('Cross-Origin-Opener-Policy', 'same-origin-allow-popups');&#10;  // Do not set Cross-Origin-Embedder-Policy here to avoid cross-origin isolation&#10;  next();&#10;});&#10;&#10;// Session endpoints&#10;app.get('/api/session', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip) || null;&#10;  res.json({ user });&#10;});&#10;&#10;app.post('/api/session', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = req.body?.user;&#10;  if (!user || (!user.email &amp;&amp; !user.sub)) return res.status(400).json({ error: 'user required' });&#10;  sessionsByIp.set(ip, user);&#10;  ensureUserStored(user);&#10;  // Ensure VPS file exists but start empty for new users&#10;  const key = userKey(user);&#10;  let vps = loadUserVps(key);&#10;  if (!vps) {&#10;    vps = [];&#10;    saveUserVps(key, vps);&#10;  }&#10;  res.json({ ok: true });&#10;});&#10;&#10;// Add missing DELETE to clear session&#10;app.delete('/api/session', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  sessionsByIp.delete(ip);&#10;  res.json({ ok: true });&#10;});&#10;&#10;// Accept Google credential directly and create session&#10;app.post('/api/gsicred', (req, res) =&gt; {&#10;  try {&#10;    const cred = req.body &amp;&amp; req.body.credential;&#10;    if (!cred) return res.status(400).json({ error: 'missing credential' });&#10;    const parts = cred.split('.');&#10;    if (parts.length &lt; 2) return res.status(400).json({ error: 'bad credential' });&#10;    const payloadJson = Buffer.from(parts[1], 'base64url').toString('utf8');&#10;    const payload = JSON.parse(payloadJson);&#10;    const user = { name: payload.name, email: payload.email, picture: payload.picture, sub: payload.sub };&#10;    const ip = getClientIp(req);&#10;    sessionsByIp.set(ip, user);&#10;    ensureUserStored(user);&#10;    const key = userKey(user);&#10;    let vps = loadUserVps(key);&#10;    if (!vps) { saveUserVps(key, []); }&#10;    res.json({ user });&#10;  } catch (e) {&#10;    console.error('GSICred error:', e);&#10;    res.status(500).json({ error: 'failed to process credential' });&#10;  }&#10;});&#10;&#10;// VPS endpoints&#10;app.get('/api/vps', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  const key = userKey(user);&#10;  let vps = loadUserVps(key);&#10;  if (!vps) {&#10;    vps = [];&#10;    saveUserVps(key, vps);&#10;  }&#10;  res.json(vps);&#10;});&#10;&#10;// Create a new VPS for current user&#10;app.post('/api/vps', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  const key = userKey(user);&#10;  const list = loadUserVps(key) || [];&#10;&#10;  const now = Date.now();&#10;  const body = req.body || {};&#10;  const diskNum = parseInt(body.disk, 10) || [20, 40, 80, 160][now % 4];&#10;  const usedNum = Math.min(diskNum - 1, Math.max(1, Math.floor(diskNum * 0.3)));&#10;&#10;  const vps = {&#10;    id: body.id || `vps-${now}`,&#10;    name: body.name || `VPS-${(now % 10000)}`,&#10;    region: body.region || 'Buenos Aires',&#10;    status: body.status || 'running',&#10;    cpu: body.cpu || '1 vCPU',&#10;    ram: body.ram || '1024 MB',&#10;    disk: (body.disk ? String(body.disk) : String(diskNum)) + ' GB',&#10;    used: (body.used ? String(body.used) : String(usedNum)) + ' GB'&#10;  };&#10;&#10;  list.push(vps);&#10;  saveUserVps(key, list);&#10;  res.status(201).json(vps);&#10;});&#10;&#10;// Delete a VPS by id for current user&#10;app.delete('/api/vps/:id', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  const key = userKey(user);&#10;  const list = loadUserVps(key) || [];&#10;  const id = req.params.id;&#10;  const newList = list.filter(v =&gt; v.id !== id);&#10;  if (newList.length === list.length) {&#10;    return res.status(404).json({ error: 'not found' });&#10;  }&#10;  saveUserVps(key, newList);&#10;  res.json({ ok: true });&#10;});&#10;&#10;// Delete ALL VPS for current user&#10;app.delete('/api/vps', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  const key = userKey(user);&#10;  saveUserVps(key, []);&#10;  res.json({ ok: true });&#10;});&#10;&#10;// Handle Google Sign-In redirect mode callback&#10;app.post('/auth/callback', (req, res) =&gt; {&#10;  try {&#10;    const cred = req.body &amp;&amp; req.body.credential;&#10;    if (!cred) return res.status(400).send('Missing credential');&#10;    const parts = cred.split('.');&#10;    if (parts.length &lt; 2) return res.status(400).send('Bad credential');&#10;    const payloadJson = Buffer.from(parts[1], 'base64url').toString('utf8');&#10;    const payload = JSON.parse(payloadJson);&#10;    const user = {&#10;      name: payload.name,&#10;      email: payload.email,&#10;      picture: payload.picture,&#10;      sub: payload.sub&#10;    };&#10;    const ip = getClientIp(req);&#10;    sessionsByIp.set(ip, user);&#10;    ensureUserStored(user);&#10;    // Ensure VPS file exists&#10;    const key = userKey(user);&#10;    let vps = loadUserVps(key);&#10;    if (!vps) { saveUserVps(key, []); }&#10;    // Redirect to home where client will sync session&#10;    res.redirect('/');&#10;  } catch (e) {&#10;    console.error('Auth callback error:', e);&#10;    res.status(500).send('Auth failed');&#10;  }&#10;});&#10;&#10;// Protected Control Panel route&#10;app.get('/panel', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) {&#10;    return res.redirect('/');&#10;  }&#10;  res.sendFile(path.join(__dirname, 'panel.html'));&#10;});&#10;&#10;// Also protect direct access to /panel.html&#10;app.get('/panel.html', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) {&#10;    return res.redirect('/');&#10;  }&#10;  res.sendFile(path.join(__dirname, 'panel.html'));&#10;});&#10;&#10;// Static files&#10;app.use(express.static(__dirname));&#10;&#10;// Fallback to index.html&#10;app.get('*', (req, res) =&gt; {&#10;  res.sendFile(path.join(__dirname, 'index.html'));&#10;});&#10;&#10;app.listen(PORT, () =&gt; {&#10;  console.log(`Server running on http://localhost:${PORT}`);&#10;});&#10;//root key 4e003e52-2917-4d46-bc1f-7524094b1f88&#10;&#10;// Proxmox config (set via environment variables)&#10;const PMX_HOST = process.env.PMX_HOST || '';&#10;const PMX_PORT = process.env.PMX_PORT ? Number(process.env.PMX_PORT) : 8006;&#10;const PMX_USER = process.env.PMX_USER || '';&#10;const PMX_TOKEN_NAME = process.env.PMX_TOKEN_NAME || '';&#10;const PMX_TOKEN_VALUE = process.env.PMX_TOKEN_VALUE || '';&#10;const PMX_NODE = process.env.PMX_NODE || 'pve';&#10;const PMX_STORAGE = process.env.PMX_STORAGE || 'local';&#10;const PMX_NET_BRIDGE = process.env.PMX_NET_BRIDGE || 'vmbr0';&#10;&#10;function haveProxmoxConfig() {&#10;  return PMX_HOST &amp;&amp; PMX_USER &amp;&amp; PMX_TOKEN_NAME &amp;&amp; PMX_TOKEN_VALUE;&#10;}&#10;&#10;function pmxHeaders(extra = {}) {&#10;  return Object.assign({&#10;    'Authorization': `PVEAPIToken=${PMX_USER}!${PMX_TOKEN_NAME}=${PMX_TOKEN_VALUE}`&#10;  }, extra);&#10;}&#10;&#10;function pmxRequest(method, apiPath, { headers = {}, body = null } = {}) {&#10;  return new Promise((resolve, reject) =&gt; {&#10;    const options = {&#10;      hostname: PMX_HOST,&#10;      port: PMX_PORT,&#10;      path: `/api2/json${apiPath}`,&#10;      method,&#10;      headers: pmxHeaders(headers),&#10;      rejectUnauthorized: false // allow self-signed in lab environments&#10;    };&#10;    const req = https.request(options, (res) =&gt; {&#10;      let data = '';&#10;      res.on('data', chunk =&gt; data += chunk);&#10;      res.on('end', () =&gt; {&#10;        try {&#10;          const parsed = JSON.parse(data || '{}');&#10;          if (res.statusCode &gt;= 200 &amp;&amp; res.statusCode &lt; 300) return resolve(parsed);&#10;          const err = new Error(`Proxmox API ${res.statusCode}`);&#10;          err.response = parsed;&#10;          return reject(err);&#10;        } catch (e) {&#10;          if (res.statusCode &gt;= 200 &amp;&amp; res.statusCode &lt; 300) return resolve({});&#10;          const err = new Error(`Proxmox API ${res.statusCode}`);&#10;          err.response = data;&#10;          return reject(err);&#10;        }&#10;      });&#10;    });&#10;    req.on('error', reject);&#10;    if (body) req.write(body);&#10;    req.end();&#10;  });&#10;}&#10;&#10;async function pmxNextId() {&#10;  const resp = await pmxRequest('GET', '/cluster/nextid');&#10;  return resp?.data; // string id&#10;}&#10;&#10;// List available CT templates&#10;app.get('/api/proxmox/templates', async (req, res) =&gt; {&#10;  if (!haveProxmoxConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  try {&#10;    const resp = await pmxRequest('GET', `/nodes/${encodeURIComponent(PMX_NODE)}/storage/${encodeURIComponent(PMX_STORAGE)}/content?content=vztmpl`);&#10;    const list = (resp?.data || []).filter(x =&gt; x.content === 'vztmpl').map(x =&gt; x.volid);&#10;    res.json({ templates: list });&#10;  } catch (e) {&#10;    res.status(500).json({ error: 'No se pudieron listar templates', detail: e?.response || e.message });&#10;  }&#10;});&#10;&#10;// Create a Proxmox LXC container&#10;app.post('/api/proxmox/ct', async (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  if (!haveProxmoxConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;&#10;  try {&#10;    const { hostname, password, template, storage, cores, memory, swap, rootfs, netBridge, start } = req.body || {};&#10;    if (!hostname) return res.status(400).json({ error: 'hostname requerido' });&#10;    if (!password) return res.status(400).json({ error: 'password requerido' });&#10;&#10;    const vmid = await pmxNextId();&#10;    const ostemplate = template || `${PMX_STORAGE}:vztmpl/debian-12-standard_12.2-1_amd64.tar.zst`;&#10;    const useStorage = storage || PMX_STORAGE;&#10;    const sizeGb = Number(rootfs) || 8;&#10;    const net0 = `name=eth0,bridge=${netBridge || PMX_NET_BRIDGE},ip=dhcp`;&#10;&#10;    const form = querystring.stringify({&#10;      vmid,&#10;      hostname,&#10;      ostemplate,&#10;      storage: useStorage,&#10;      rootfs: `${useStorage}:${sizeGb}`,&#10;      cores: Number(cores) || 1,&#10;      memory: Number(memory) || 1024,&#10;      swap: Number(swap) || 512,&#10;      password,&#10;      net0,&#10;      start: String(start ?? 1)&#10;    });&#10;&#10;    const resp = await pmxRequest('POST', `/nodes/${encodeURIComponent(PMX_NODE)}/lxc`, {&#10;      headers: { 'Content-Type': 'application/x-www-form-urlencoded', 'Content-Length': Buffer.byteLength(form) },&#10;      body: form&#10;    });&#10;&#10;    const upid = resp?.data; // task id&#10;    res.status(202).json({ upid, vmid, node: PMX_NODE });&#10;  } catch (e) {&#10;    res.status(500).json({ error: 'No se pudo crear el CT', detail: e?.response || e.message });&#10;  }&#10;});&#10;&#10;// Poll task status&#10;app.get('/api/proxmox/ct/:upid/status', async (req, res) =&gt; {&#10;  if (!haveProxmoxConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  const upid = req.params.upid;&#10;  try {&#10;    const resp = await pmxRequest('GET', `/nodes/${encodeURIComponent(PMX_NODE)}/tasks/${encodeURIComponent(upid)}/status`);&#10;    res.json(resp?.data || {});&#10;  } catch (e) {&#10;    res.status(500).json({ error: 'No se pudo obtener el estado', detail: e?.response || e.message });&#10;  }&#10;});&#10;&#10;" />
              <option name="updatedContent" value="// Simple Express server to serve static site and JSON storage per user&#10;const express = require('express');&#10;const fs = require('fs');&#10;const path = require('path');&#10;const https = require('https');&#10;const querystring = require('querystring');&#10;const pmx = require('./lib/proxmox');&#10;&#10;const app = express();&#10;const PORT = process.env.PORT || 8080;&#10;&#10;// Paths for persistent data&#10;const DATA_DIR = path.join(__dirname, 'data');&#10;const VPS_DIR = path.join(DATA_DIR, 'vps');&#10;const USERS_FILE = path.join(DATA_DIR, 'users.json');&#10;&#10;// Ensure data directories exist&#10;fs.mkdirSync(VPS_DIR, { recursive: true });&#10;if (!fs.existsSync(USERS_FILE)) {&#10;  fs.writeFileSync(USERS_FILE, JSON.stringify({ users: {} }, null, 2));&#10;}&#10;&#10;app.use(express.json());&#10;app.use(express.urlencoded({ extended: false }));&#10;&#10;// In-memory session store keyed by remote IP&#10;const sessionsByIp = new Map();&#10;&#10;function getClientIp(req) {&#10;  return (&#10;    (req.headers['x-forwarded-for']?.split(',')[0] || '').trim() ||&#10;    req.socket.remoteAddress ||&#10;    req.ip ||&#10;    'unknown'&#10;  );&#10;}&#10;&#10;function userKey(user) {&#10;  const base = (user.email || user.sub || 'anon').toLowerCase();&#10;  return base.replace(/[^a-z0-9._-]+/g, '_');&#10;}&#10;&#10;function loadUserVps(key) {&#10;  const file = path.join(VPS_DIR, `${key}.json`);&#10;  if (!fs.existsSync(file)) return null;&#10;  try { return JSON.parse(fs.readFileSync(file, 'utf8')); } catch { return null; }&#10;}&#10;&#10;function saveUserVps(key, vpsList) {&#10;  const file = path.join(VPS_DIR, `${key}.json`);&#10;  fs.writeFileSync(file, JSON.stringify(vpsList, null, 2));&#10;}&#10;&#10;function ensureUserStored(user) {&#10;  try {&#10;    const data = JSON.parse(fs.readFileSync(USERS_FILE, 'utf8'));&#10;    const key = userKey(user);&#10;    if (!data.users[key]) {&#10;      data.users[key] = { name: user.name, email: user.email, sub: user.sub, picture: user.picture, createdAt: new Date().toISOString() };&#10;      fs.writeFileSync(USERS_FILE, JSON.stringify(data, null, 2));&#10;    }&#10;  } catch (e) {&#10;    // recreate file on error&#10;    const data = { users: {} };&#10;    const key = userKey(user);&#10;    data.users[key] = { name: user.name, email: user.email, sub: user.sub, picture: user.picture, createdAt: new Date().toISOString() };&#10;    fs.writeFileSync(USERS_FILE, JSON.stringify(data, null, 2));&#10;  }&#10;}&#10;&#10;// Set headers to allow Google popup to postMessage back (avoid COOP blocking)&#10;app.use((req, res, next) =&gt; {&#10;  res.setHeader('Cross-Origin-Opener-Policy', 'same-origin-allow-popups');&#10;  // Do not set Cross-Origin-Embedder-Policy here to avoid cross-origin isolation&#10;  next();&#10;});&#10;&#10;// Session endpoints&#10;app.get('/api/session', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip) || null;&#10;  res.json({ user });&#10;});&#10;&#10;app.post('/api/session', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = req.body?.user;&#10;  if (!user || (!user.email &amp;&amp; !user.sub)) return res.status(400).json({ error: 'user required' });&#10;  sessionsByIp.set(ip, user);&#10;  ensureUserStored(user);&#10;  // Ensure VPS file exists but start empty for new users&#10;  const key = userKey(user);&#10;  let vps = loadUserVps(key);&#10;  if (!vps) {&#10;    vps = [];&#10;    saveUserVps(key, vps);&#10;  }&#10;  res.json({ ok: true });&#10;});&#10;&#10;// Add missing DELETE to clear session&#10;app.delete('/api/session', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  sessionsByIp.delete(ip);&#10;  res.json({ ok: true });&#10;});&#10;&#10;// Accept Google credential directly and create session&#10;app.post('/api/gsicred', (req, res) =&gt; {&#10;  try {&#10;    const cred = req.body &amp;&amp; req.body.credential;&#10;    if (!cred) return res.status(400).json({ error: 'missing credential' });&#10;    const parts = cred.split('.');&#10;    if (parts.length &lt; 2) return res.status(400).json({ error: 'bad credential' });&#10;    const payloadJson = Buffer.from(parts[1], 'base64url').toString('utf8');&#10;    const payload = JSON.parse(payloadJson);&#10;    const user = { name: payload.name, email: payload.email, picture: payload.picture, sub: payload.sub };&#10;    const ip = getClientIp(req);&#10;    sessionsByIp.set(ip, user);&#10;    ensureUserStored(user);&#10;    const key = userKey(user);&#10;    let vps = loadUserVps(key);&#10;    if (!vps) { saveUserVps(key, []); }&#10;    res.json({ user });&#10;  } catch (e) {&#10;    console.error('GSICred error:', e);&#10;    res.status(500).json({ error: 'failed to process credential' });&#10;  }&#10;});&#10;&#10;// VPS endpoints&#10;app.get('/api/vps', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  const key = userKey(user);&#10;  let vps = loadUserVps(key);&#10;  if (!vps) {&#10;    vps = [];&#10;    saveUserVps(key, vps);&#10;  }&#10;  res.json(vps);&#10;});&#10;&#10;// Create a new VPS for current user&#10;app.post('/api/vps', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  const key = userKey(user);&#10;  const list = loadUserVps(key) || [];&#10;&#10;  const now = Date.now();&#10;  const body = req.body || {};&#10;  const diskNum = parseInt(body.disk, 10) || [20, 40, 80, 160][now % 4];&#10;  const usedNum = Math.min(diskNum - 1, Math.max(1, Math.floor(diskNum * 0.3)));&#10;&#10;  const vps = {&#10;    id: body.id || `vps-${now}`,&#10;    name: body.name || `VPS-${(now % 10000)}`,&#10;    region: body.region || 'Buenos Aires',&#10;    status: body.status || 'running',&#10;    cpu: body.cpu || '1 vCPU',&#10;    ram: body.ram || '1024 MB',&#10;    disk: (body.disk ? String(body.disk) : String(diskNum)) + ' GB',&#10;    used: (body.used ? String(body.used) : String(usedNum)) + ' GB'&#10;  };&#10;&#10;  list.push(vps);&#10;  saveUserVps(key, list);&#10;  res.status(201).json(vps);&#10;});&#10;&#10;// Delete a VPS by id for current user&#10;app.delete('/api/vps/:id', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  const key = userKey(user);&#10;  const list = loadUserVps(key) || [];&#10;  const id = req.params.id;&#10;  const newList = list.filter(v =&gt; v.id !== id);&#10;  if (newList.length === list.length) {&#10;    return res.status(404).json({ error: 'not found' });&#10;  }&#10;  saveUserVps(key, newList);&#10;  res.json({ ok: true });&#10;});&#10;&#10;// Delete ALL VPS for current user&#10;app.delete('/api/vps', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  const key = userKey(user);&#10;  saveUserVps(key, []);&#10;  res.json({ ok: true });&#10;});&#10;&#10;// Handle Google Sign-In redirect mode callback&#10;app.post('/auth/callback', (req, res) =&gt; {&#10;  try {&#10;    const cred = req.body &amp;&amp; req.body.credential;&#10;    if (!cred) return res.status(400).send('Missing credential');&#10;    const parts = cred.split('.');&#10;    if (parts.length &lt; 2) return res.status(400).send('Bad credential');&#10;    const payloadJson = Buffer.from(parts[1], 'base64url').toString('utf8');&#10;    const payload = JSON.parse(payloadJson);&#10;    const user = {&#10;      name: payload.name,&#10;      email: payload.email,&#10;      picture: payload.picture,&#10;      sub: payload.sub&#10;    };&#10;    const ip = getClientIp(req);&#10;    sessionsByIp.set(ip, user);&#10;    ensureUserStored(user);&#10;    // Ensure VPS file exists&#10;    const key = userKey(user);&#10;    let vps = loadUserVps(key);&#10;    if (!vps) { saveUserVps(key, []); }&#10;    // Redirect to home where client will sync session&#10;    res.redirect('/');&#10;  } catch (e) {&#10;    console.error('Auth callback error:', e);&#10;    res.status(500).send('Auth failed');&#10;  }&#10;});&#10;&#10;// Protected Control Panel route&#10;app.get('/panel', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) {&#10;    return res.redirect('/');&#10;  }&#10;  res.sendFile(path.join(__dirname, 'panel.html'));&#10;});&#10;&#10;// Also protect direct access to /panel.html&#10;app.get('/panel.html', (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) {&#10;    return res.redirect('/');&#10;  }&#10;  res.sendFile(path.join(__dirname, 'panel.html'));&#10;});&#10;&#10;// Static files&#10;app.use(express.static(__dirname));&#10;&#10;// Fallback to index.html&#10;app.get('*', (req, res) =&gt; {&#10;  res.sendFile(path.join(__dirname, 'index.html'));&#10;});&#10;&#10;app.listen(PORT, () =&gt; {&#10;  console.log(`Server running on http://localhost:${PORT}`);&#10;});&#10;&#10;// List available CT templates (via lib)&#10;app.get('/api/proxmox/templates', async (req, res) =&gt; {&#10;  if (!pmx.haveConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  try {&#10;    const list = await pmx.listCTTemplates();&#10;    res.json({ templates: list });&#10;  } catch (e) {&#10;    res.status(500).json({ error: 'No se pudieron listar templates', detail: e?.response || e.message });&#10;  }&#10;});&#10;&#10;// Create a Proxmox LXC container (via lib)&#10;app.post('/api/proxmox/ct', async (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  if (!pmx.haveConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;&#10;  try {&#10;    const { hostname, password, template, storage, cores, memory, swap, rootfs, netBridge, start } = req.body || {};&#10;    if (!hostname) return res.status(400).json({ error: 'hostname requerido' });&#10;    if (!password) return res.status(400).json({ error: 'password requerido' });&#10;&#10;    const { upid, vmid } = await pmx.createCT({ hostname, password, template, storage, cores, memory, swap, rootfs, netBridge, start });&#10;    res.status(202).json({ upid, vmid, node: process.env.PMX_NODE || 'pve' });&#10;  } catch (e) {&#10;    res.status(500).json({ error: 'No se pudo crear el CT', detail: e?.response || e.message });&#10;  }&#10;});&#10;&#10;// Poll task status (via lib)&#10;app.get('/api/proxmox/ct/:upid/status', async (req, res) =&gt; {&#10;  if (!pmx.haveConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  try {&#10;    const data = await pmx.getTaskStatus(req.params.upid);&#10;    res.json(data);&#10;  } catch (e) {&#10;    res.status(500).json({ error: 'No se pudo obtener el estado', detail: e?.response || e.message });&#10;  }&#10;});&#10;&#10;// ===== VM endpoints (QEMU) using lib =====&#10;// List VMs&#10;app.get('/api/proxmox/vms', async (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  if (!pmx.haveConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  try {&#10;    const list = await pmx.listVMs();&#10;    res.json(list);&#10;  } catch (e) {&#10;    res.status(500).json({ error: 'No se pudieron listar VMs', detail: e?.response || e.message });&#10;  }&#10;});&#10;&#10;// Create VM&#10;app.post('/api/proxmox/vm', async (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  if (!pmx.haveConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  try {&#10;    const { name, cores, memory, disk, storage, bridge } = req.body || {};&#10;    if (!name) return res.status(400).json({ error: 'name requerido' });&#10;    const { upid, vmid } = await pmx.createVM({ name, cores, memory, disk, storage, bridge });&#10;    res.status(202).json({ upid, vmid });&#10;  } catch (e) {&#10;    res.status(500).json({ error: 'No se pudo crear la VM', detail: e?.response || e.message });&#10;  }&#10;});&#10;&#10;// Delete VM&#10;app.delete('/api/proxmox/vm/:vmid', async (req, res) =&gt; {&#10;  const ip = getClientIp(req);&#10;  const user = sessionsByIp.get(ip);&#10;  if (!user) return res.status(401).json({ error: 'not authenticated' });&#10;  if (!pmx.haveConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  try {&#10;    const data = await pmx.deleteVM(req.params.vmid);&#10;    res.json({ ok: true, data });&#10;  } catch (e) {&#10;    res.status(500).json({ error: 'No se pudo eliminar la VM', detail: e?.response || e.message });&#10;  }&#10;});&#10;&#10;// Start VM&#10;app.post('/api/proxmox/vm/:vmid/start', async (req, res) =&gt; {&#10;  if (!pmx.haveConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  try { const data = await pmx.startVM(req.params.vmid); res.json({ ok: true, data }); }&#10;  catch (e) { res.status(500).json({ error: 'No se pudo iniciar la VM', detail: e?.response || e.message }); }&#10;});&#10;&#10;// Stop VM&#10;app.post('/api/proxmox/vm/:vmid/stop', async (req, res) =&gt; {&#10;  if (!pmx.haveConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  try { const data = await pmx.stopVM(req.params.vmid); res.json({ ok: true, data }); }&#10;  catch (e) { res.status(500).json({ error: 'No se pudo detener la VM', detail: e?.response || e.message }); }&#10;});&#10;&#10;// Reboot VM&#10;app.post('/api/proxmox/vm/:vmid/reboot', async (req, res) =&gt; {&#10;  if (!pmx.haveConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  try { const data = await pmx.rebootVM(req.params.vmid); res.json({ ok: true, data }); }&#10;  catch (e) { res.status(500).json({ error: 'No se pudo reiniciar la VM', detail: e?.response || e.message }); }&#10;});&#10;&#10;// VM info&#10;app.get('/api/proxmox/vm/:vmid/info', async (req, res) =&gt; {&#10;  if (!pmx.haveConfig()) return res.status(501).json({ error: 'Proxmox no configurado (PMX_* env vars)' });&#10;  try { const data = await pmx.getVMInfo(req.params.vmid); res.json(data || {}); }&#10;  catch (e) { res.status(500).json({ error: 'No se pudo obtener info de VM', detail: e?.response || e.message }); }&#10;});&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>