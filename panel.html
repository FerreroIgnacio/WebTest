<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Panel de Control - BitHosting</title>
  <link rel="stylesheet" href="/css/styles.css" />
  <link rel="stylesheet" href="/css/panel.css" />
</head>
<body>
<header class="sticky">
  <div class="container">
    <div style="display:flex;align-items:center;gap:10px">
      <a href="/" id="panelLogo" class="panel-logo">
        <!-- Inline SVG logo to avoid loading issues -->
        <svg width="32" height="32" viewBox="0 0 40 40" aria-hidden="true">
          <defs>
            <linearGradient id="bhg2" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#00d4ff"/>
              <stop offset="100%" stop-color="#00b8e6"/>
            </linearGradient>
          </defs>
          <rect width="40" height="40" rx="8" ry="8" fill="url(#bhg2)"/>
          <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-family="Segoe UI, Roboto, sans-serif" font-size="20" fill="#001018">B</text>
        </svg>
        <strong>BitHosting ¬∑ Panel de Control</strong>
      </a>
    </div>
    <div>
      <a href="/" class="btn secondary">Volver al inicio</a>
    </div>
  </div>
</header>

<!-- Sidebar (only in panel) -->
<aside class="sidebar" id="panelSidebar" aria-label="Navegaci√≥n lateral">
  <div class="sb-brand">
    <!-- Inline SVG brand icon -->
    <svg width="28" height="28" viewBox="0 0 40 40" aria-hidden="true" style="border-radius:6px">
      <defs>
        <linearGradient id="bhg3" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0%" stop-color="#00d4ff"/>
          <stop offset="100%" stop-color="#00b8e6"/>
        </linearGradient>
      </defs>
      <rect width="40" height="40" rx="8" ry="8" fill="url(#bhg3)"/>
      <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-family="Segoe UI, Roboto, sans-serif" font-size="20" fill="#001018">B</text>
    </svg>
    <strong>BitHosting</strong>
  </div>
  <nav class="sb-nav">
    <a class="sb-link" href="#">
      <span class="sb-ico">üè†</span>
      <span class="sb-text">Dashboard</span>
    </a>
    <a class="sb-link" href="#vpsList">
      <span class="sb-ico">üñ•Ô∏è</span>
      <span class="sb-text">Mis VPS</span>
    </a>
    <a class="sb-link" href="#facturacion">
      <span class="sb-ico">üí≥</span>
      <span class="sb-text">Facturaci√≥n</span>
    </a>
    <a class="sb-link" href="#soporte">
      <span class="sb-ico">üõü</span>
      <span class="sb-text">Soporte</span>
    </a>
  </nav>
</aside>
<div class="sb-handle" id="sbHandle" title="Alternar men√∫" aria-controls="panelSidebar" aria-expanded="true"><span class="sb-handle-icon">‚ò∞</span></div>

<main class="panel-wrap main-with-sidebar">
  <section class="summary card" style="flex-direction:column">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;width:100%">
      <div>
        <div id="userInfo" class="muted">Cargando usuario...</div>
        <div style="margin-top:6px"><strong>Uso total de almacenamiento</strong></div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <a href="#" id="createVps" class="btn secondary">Crear VPS (debug)</a>
        <a href="#" id="createCtBtn" class="btn">Crear CT Proxmox</a>
        <a href="#" id="createVmBtn" class="btn">Crear VM Proxmox</a>
        <a href="#" id="exportJson" class="btn">Exportar JSON</a>
      </div>
    </div>
    <div class="bar" style="width:100%"><span id="totalBarFill" style="width:0%"></span></div>
    <div class="muted" id="totalBarLabel">Cargando...</div>
  </section>

  <section id="vpsList">
    <div class="muted">Cargando VPS...</div>
  </section>

  <section id="vmsSection" class="card" style="flex-direction:column">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;width:100%;margin-bottom:8px">
      <strong>Proxmox VMs</strong>
      <a href="#" id="refreshVms" class="btn secondary">Actualizar</a>
    </div>
    <div id="vmsList" class="muted">Cargando VMs...</div>
  </section>

  <!-- Optional placeholder sections to resolve anchors -->
  <section id="facturacion" class="card" style="display:none"><div class="muted">Facturaci√≥n</div></section>
  <section id="soporte" class="card" style="display:none"><div class="muted">Soporte</div></section>
</main>

<!-- Proxmox Create CT Modal -->
<div class="modal" id="ctModal" role="dialog" aria-modal="true" aria-labelledby="ctTitle">
  <div class="modal-content" style="max-width:520px">
    <button type="button" class="modal-close" id="ctCloseBtn" aria-label="Cerrar">&times;</button>
    <h3 id="ctTitle" style="margin-bottom:10px">Crear Contenedor LXC</h3>
    <form id="ctForm">
      <div class="form-row">
        <label for="ctHostname">Hostname</label>
        <input id="ctHostname" name="hostname" type="text" required placeholder="mi-contenedor" />
      </div>
      <div class="form-row">
        <label for="ctPassword">Password root</label>
        <input id="ctPassword" name="password" type="password" required placeholder="********" />
      </div>
      <div class="form-row">
        <label for="ctTemplate">Template</label>
        <select id="ctTemplate" name="template"></select>
      </div>
      <div class="form-grid">
        <div class="form-row">
          <label for="ctCores">Cores</label>
          <input id="ctCores" name="cores" type="number" min="1" value="1" />
        </div>
        <div class="form-row">
          <label for="ctMemory">Memoria (MB)</label>
          <input id="ctMemory" name="memory" type="number" min="256" step="256" value="1024" />
        </div>
      </div>
      <div class="form-grid">
        <div class="form-row">
          <label for="ctDisk">Disco (GB)</label>
          <input id="ctDisk" name="rootfs" type="number" min="4" step="1" value="8" />
        </div>
        <div class="form-row">
          <label for="ctSwap">Swap (MB)</label>
          <input id="ctSwap" name="swap" type="number" min="0" step="128" value="512" />
        </div>
      </div>
      <div class="form-row">
        <label for="ctBridge">Bridge</label>
        <input id="ctBridge" name="netBridge" type="text" value="vmbr0" />
      </div>
      <div class="form-row" style="display:flex;align-items:center;gap:8px">
        <input id="ctStart" name="start" type="checkbox" checked />
        <label for="ctStart" style="margin:0">Iniciar al crear</label>
      </div>
      <div id="ctStatus" class="muted" aria-live="polite" style="min-height:20px;margin:8px 0 4px"></div>
      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:10px">
        <button type="button" class="btn secondary" id="ctCancelBtn">Cancelar</button>
        <button type="submit" class="btn" id="ctSubmitBtn">Crear</button>
      </div>
    </form>
  </div>
</div>

<!-- Proxmox Create VM Modal -->
<div class="modal" id="vmModal" role="dialog" aria-modal="true" aria-labelledby="vmTitle">
  <div class="modal-content" style="max-width:520px">
    <button type="button" class="modal-close" id="vmCloseBtn" aria-label="Cerrar">&times;</button>
    <h3 id="vmTitle" style="margin-bottom:10px">Crear VM (QEMU)</h3>
    <form id="vmForm">
      <div class="form-row">
        <label for="vmName">Nombre</label>
        <input id="vmName" name="name" type="text" required placeholder="mi-vm" />
      </div>
      <div class="form-grid">
        <div class="form-row">
          <label for="vmCores">Cores</label>
          <input id="vmCores" name="cores" type="number" min="1" value="1" />
        </div>
        <div class="form-row">
          <label for="vmMemory">Memoria (MB)</label>
          <input id="vmMemory" name="memory" type="number" min="256" step="256" value="1024" />
        </div>
      </div>
      <div class="form-grid">
        <div class="form-row">
          <label for="vmDisk">Disco (GB)</label>
          <input id="vmDisk" name="disk" type="number" min="5" step="1" value="10" />
        </div>
        <div class="form-row">
          <label for="vmBridge">Bridge</label>
          <input id="vmBridge" name="bridge" type="text" value="vmbr0" />
        </div>
      </div>
      <div id="vmStatus" class="muted" aria-live="polite" style="min-height:20px;margin:8px 0 4px"></div>
      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:10px">
        <button type="button" class="btn secondary" id="vmCancelBtn">Cancelar</button>
        <button type="submit" class="btn" id="vmSubmitBtn">Crear</button>
      </div>
    </form>
  </div>
</div>

<script src="/js/panel.js"></script>
</body>
</html>
